(()=>{"use strict";const e=(()=>{let e=[];return{addToList:function(t){e.push(t),console.log(e)},TodoList:e}})(),t=(e,t,n)=>({title:e,taskList:t,id:n}),n=(()=>{let n,o=[],r=e.TodoList;const c=t("General",r,0);o.push(c);let i=0;return{submitProject:function(){document.querySelector("#createProject").addEventListener("click",(e=>{e.preventDefault(),function(){n=document.querySelector("#projectTitle").value;const e=0===o.length?0:o[o.length-1].id+1;if(""!==n){const r=t(n,[],e);console.log(r),function(e){o.push(e),console.log(o)}(r)}}(),""!==n&&(s.displayProject(),document.querySelector("#projectTitle").value="",n="")}))},grabProjectId:function(e){let t=parseInt(e.target.getAttribute("data-projectId"));return i=t,i},grabCurrentProject:function(){return i},grabProjectList:function(){return o},projectList:o}})();function o(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function r(e){const t=o(e);return t.setHours(0,0,0,0),t}function c(e){return t=e,n=Date.now(),+r(t)==+r(n);var t,n}let i={};function l(){return i}function d(e,t){const n=l(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,c=o(e),i=c.getDay(),d=(i<r?7:0)+i-r;return c.setDate(c.getDate()-d),c.setHours(0,0,0,0),c}function u(e,t){return function(e,t,n){return+d(e,n)==+d(t,n)}(e,Date.now(),t)}const a=(()=>{function e(e,t){const n=document.createElement("div");n.setAttribute("data-taskId",`${e.id}`);const o=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div"),i=document.createElement("div");return o.textContent=`Title: ${e.title}`,r.textContent=`Due Date: ${e.duedate}`,c.textContent=`Description: ${e.description}`,i.textContent=`Priority: ${e.priority}`,n.append(o,r,c,i),t.appendChild(n),t}return{displayNewInput:function(){let t=n.projectList[0].taskList;e(t[t.length-1],document.querySelector("#general"))},displayInbox:function(){let t=n.projectList[0].taskList;const o=document.querySelector("#general");for(;o.lastElementChild;)o.removeChild(o.lastElementChild);t.forEach((t=>e(t,o)))},displayDaily:function(){let t=n.projectList[0].taskList;const r=document.querySelector("#general");for(;r.lastElementChild;)r.removeChild(r.lastElementChild);t.filter((e=>c(o(e.duedate)))).forEach((t=>e(t,r)))},displayWeekly:function(){let t=n.projectList[0].taskList;const r=document.querySelector("#general");for(;r.lastElementChild;)r.removeChild(r.lastElementChild);t.filter((e=>u(o(e.duedate)))).forEach((t=>e(t,r)))},displayAllTask:e}})(),s={displayProject:function(){let e=n.projectList,t=e[e.length-1];const o=document.querySelector(".all-projects"),r=document.createElement("div"),c=document.createElement("div"),i=document.createElement("button");return r.classList.add(`project-${t.id}`),r.setAttribute("data-projectId",`${t.id}`),i.setAttribute("data-projectId",`${t.id}`),i.setAttribute("id",`project-${t.id}`),c.textContent=`${t.title}`,i.textContent="+",r.addEventListener("click",(e=>{e.stopPropagation(),function(e){let t=n.projectList;const o=document.querySelector("#general");for(;o.lastElementChild;)o.removeChild(o.lastElementChild);let r=t.filter((t=>t.id===e))[0].taskList;console.log(r),r.forEach((e=>a.displayAllTask(e,o)))}(t.id)})),i.addEventListener("click",(e=>{e.stopPropagation(),console.log("project id",n.grabProjectId(e));const t=document.querySelector("#main-form");n.grabProjectId(e),t.removeAttribute("hidden"),e.preventDefault()})),r.append(c,i),o.appendChild(r),o}},m=(()=>{let t,r;function i(){const i=n.grabProjectList();t=document.getElementById("title").value,r=document.getElementById("description").value;let l=document.getElementById("date").value,d=document.getElementById("priority").value,a=function(){let t=e.TodoList;return 0===t.length?0:t[t.length-1].id+1}(),s=n.grabCurrentProject();if(console.log(u(o(l))),console.log(c(o(l))),""!==t&&""!==r&&""!==l){const n=((e,t,n,o,r,c)=>({id:e,title:t,description:n,duedate:o,priority:r,project:c}))(a,t,r,l,d,s);console.log(n),0===s&&(i[0].taskList.push(n),console.log(i));for(let t=1;t<i.length;t++)i[t].id===s&&(e.addToList(n),i[t].taskList.push(n),console.log(i))}}function l(){document.getElementById("title").value="",t="",document.getElementById("description").value="",r="",document.getElementById("date").value="",document.getElementById("priority").value="Low"}return{createNewTask:i,initSubmitBtn:function(){document.querySelector("#submit").addEventListener("click",(e=>{!function(){const e=document.querySelector("#main-form"),n=document.querySelector("#newTask");i(),""!==t&&""!==r&&(a.displayNewInput(),l(),e.setAttribute("hidden",""),n.removeAttribute("hidden"))}(),e.preventDefault()}))},cancelTask:function(){const e=document.querySelector("#cancel"),t=document.querySelector("#main-form"),n=document.querySelector("#newTask");e.addEventListener("click",(e=>{l(),t.setAttribute("hidden",""),n.removeAttribute("hidden"),e.preventDefault()}))},openTaskCreator:function(){const e=document.querySelector("#newTask"),t=document.querySelector("#main-form");e.addEventListener("click",(o=>{n.grabProjectId(o),t.removeAttribute("hidden"),e.setAttribute("hidden",""),o.preventDefault()}))}}})();m.initSubmitBtn(),m.cancelTask(),m.openTaskCreator(),n.submitProject();const p=document.querySelector("#today"),y=document.querySelector("#weekly"),f=document.querySelector("#inbox");p.addEventListener("click",a.displayDaily),y.addEventListener("click",a.displayWeekly),f.addEventListener("click",a.displayInbox)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixJQUNBUixFQUFZdkIsYUFBYSxTQUFVLElBQ25DaUMsRUFBV1QsZ0JBQWdCLFVBQzNCN0UsRUFBRUMsZ0JBQWdCLEdBRTFCLEVBY21EeUYsZ0JBWm5ELFdBQ0ksTUFBTUosRUFBYXpGLFNBQVNDLGNBQWMsWUFDcEM4RSxFQUFjL0UsU0FBU0MsY0FBYyxjQUUzQ3dGLEVBQVd2RixpQkFBaUIsU0FBVUMsSUFDbENULEVBQVNtQixjQUFjVixHQUN2QjRFLEVBQVlDLGdCQUFnQixVQUM1QlMsRUFBV2pDLGFBQWEsU0FBVSxJQUNsQ3JELEVBQUVDLGdCQUFnQixHQUUxQixFQUdILEVBdEhlLEdDUmhCNkUsRUFBUU8sZ0JBQ1JQLEVBQVFVLGFBQ1JWLEVBQVFZLGtCQUVSbkcsRUFBU0ssZ0JBRVQsTUFBTStGLEVBQVc5RixTQUFTQyxjQUFjLFVBQ2xDOEYsRUFBVS9GLFNBQVNDLGNBQWMsV0FDakMrRixFQUFXaEcsU0FBU0MsY0FBYyxVQUV4QzZGLEVBQVM1RixpQkFBaUIsUUFBUWdELEVBQVdtQixjQUM3QzBCLEVBQVE3RixpQkFBaUIsUUFBU2dELEVBQVdxQixlQUM3Q3lCLEVBQVM5RixpQkFBaUIsUUFBU2dELEVBQVdlLGEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbWFuYWdlTGlzdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbWFuYWdlUHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvdG9EYXRlLm1qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3RhcnRPZkRheS5tanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2lzVG9kYXkubWpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9pc1NhbWVEYXkubWpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL2RlZmF1bHRPcHRpb25zLm1qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3RhcnRPZldlZWsubWpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9pc1RoaXNXZWVrLm1qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvaXNTYW1lV2Vlay5tanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL1VJLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9tYW5hZ2VUYXNrLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBBZGR0b0xpc3QgPSAoKCkgPT4ge1xuICAgIGxldCBUb2RvTGlzdCA9IFtdO1xuXG4gICAgZnVuY3Rpb24gYWRkVG9MaXN0KHRhc2spIHtcbiAgICAgICAgVG9kb0xpc3QucHVzaCh0YXNrKTtcbiAgICAgICAgY29uc29sZS5sb2coVG9kb0xpc3QpO1xuICAgIH1cblxuICAgIHJldHVybiB7IGFkZFRvTGlzdCwgVG9kb0xpc3QgfTtcbn0pKClcblxuXG5leHBvcnQgeyBBZGR0b0xpc3QgfSIsImltcG9ydCB7IHJlbmRlclByb2plY3QgfSBmcm9tIFwiLi9VSVwiO1xuaW1wb3J0IHsgQWRkdG9MaXN0IH0gZnJvbSBcIi4vbWFuYWdlTGlzdFwiO1xuaW1wb3J0IHsgTmV3VGFzayB9IGZyb20gXCIuL21hbmFnZVRhc2tcIjtcblxuY29uc3QgbmV3UHJvamVjdCA9ICh0aXRsZSwgdGFza0xpc3QsIGlkKSA9PiB7XG4gICAgcmV0dXJuIHsgdGl0bGUsIHRhc2tMaXN0LCBpZCB9O1xufVxuXG5jb25zdCBwcm9qZWN0cyA9ICgoKSA9PiB7XG4gICAgbGV0IHByb2plY3RUaXRsZVxuICAgIGxldCBwcm9qZWN0TGlzdCA9IFtdO1xuXG4gICAgbGV0IHRhc2tMaXN0ID0gQWRkdG9MaXN0LlRvZG9MaXN0O1xuXG4gICAgY29uc3QgZ2VuZXJhbExpc3QgPSBuZXdQcm9qZWN0KCdHZW5lcmFsJywgdGFza0xpc3QsIDApO1xuICAgIHByb2plY3RMaXN0LnB1c2goZ2VuZXJhbExpc3QpO1xuXG4gICAgbGV0IGN1cnJlbnRQcm9qZWN0ID0gMDtcblxuICAgIGZ1bmN0aW9uIGdyYWJDdXJyZW50UHJvamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRQcm9qZWN0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdyYWJQcm9qZWN0TGlzdCgpIHtcbiAgICAgICAgcmV0dXJuIHByb2plY3RMaXN0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVByb2plY3QoKSB7XG4gICAgICAgIHByb2plY3RUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0VGl0bGUnKS52YWx1ZTtcbiAgICAgICAgY29uc3QgcHJvamVjdElkID0gY3JlYXRlUHJvamVjdElkKClcbiAgICAgICAgY29uc3QgcHJvamVjdFRhc2tzID0gW107XG5cbiAgICAgICAgaWYgKHByb2plY3RUaXRsZSA9PT0gJycpIHJldHVyblxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3QgPSBuZXdQcm9qZWN0KHByb2plY3RUaXRsZSwgcHJvamVjdFRhc2tzLCBwcm9qZWN0SWQpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocHJvamVjdCk7XG4gICAgICAgICAgICBhZGRUb1Byb2plY3RMaXN0KHByb2plY3QpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlUHJvamVjdElkKCkge1xuICAgICAgICBsZXQgaWQ7XG4gICAgICAgIGlmIChwcm9qZWN0TGlzdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBpZCA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaWQgPSBwcm9qZWN0TGlzdFtwcm9qZWN0TGlzdC5sZW5ndGggLSAxXS5pZCArIDE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRUb1Byb2plY3RMaXN0KHByb2plY3QpIHtcbiAgICAgICAgcHJvamVjdExpc3QucHVzaChwcm9qZWN0KTtcbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdExpc3QpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgICBsZXQgcHJvamVjdFRpdGxlVmFsdWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdFRpdGxlJyk7XG4gICAgICAgIHByb2plY3RUaXRsZVZhbHVlLnZhbHVlID0gJyc7XG4gICAgICAgIHByb2plY3RUaXRsZSA9ICcnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN1Ym1pdFByb2plY3QoKSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZVByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3JlYXRlUHJvamVjdCcpO1xuXG4gICAgICAgIGNyZWF0ZVByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjcmVhdGVQcm9qZWN0KCk7XG4gICAgICAgICAgICBpZiAocHJvamVjdFRpdGxlID09PSAnJykgcmV0dXJuXG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZW5kZXJQcm9qZWN0LmRpc3BsYXlQcm9qZWN0KCk7XG4gICAgICAgICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBncmFiUHJvamVjdElkKGUpIHtcbiAgICAgICAgbGV0IHByb2plY3RJZCA9IHBhcnNlSW50KGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1wcm9qZWN0SWQnKSk7XG5cbiAgICAgICAgY3VycmVudFByb2plY3QgPSBwcm9qZWN0SWQ7XG5cbiAgICAgICAgcmV0dXJuIGN1cnJlbnRQcm9qZWN0O1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Ym1pdFByb2plY3QsIGdyYWJQcm9qZWN0SWQsIGdyYWJDdXJyZW50UHJvamVjdCwgZ3JhYlByb2plY3RMaXN0LCBwcm9qZWN0TGlzdCB9XG59KSgpXG5cbmV4cG9ydCB7IHByb2plY3RzIH1cblxuIiwiLyoqXG4gKiBAbmFtZSB0b0RhdGVcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGFuIGluc3RhbmNlIG9mIERhdGUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIGl0cyBjbG9uZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBudW1iZXIsIGl0IGlzIHRyZWF0ZWQgYXMgYSB0aW1lc3RhbXAuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIG5vbmUgb2YgdGhlIGFib3ZlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBJbnZhbGlkIERhdGUuXG4gKlxuICogKipOb3RlKio6ICphbGwqIERhdGUgYXJndW1lbnRzIHBhc3NlZCB0byBhbnkgKmRhdGUtZm5zKiBmdW5jdGlvbiBpcyBwcm9jZXNzZWQgYnkgYHRvRGF0ZWAuXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKlxuICogQHBhcmFtIGFyZ3VtZW50IC0gVGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDbG9uZSB0aGUgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZShuZXcgRGF0ZSgyMDE0LCAxLCAxMSwgMTEsIDMwLCAzMCkpXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHRoZSB0aW1lc3RhbXAgdG8gZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZSgxMzkyMDk4NDMwMDAwKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRGF0ZShhcmd1bWVudCkge1xuICBjb25zdCBhcmdTdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnQpO1xuXG4gIC8vIENsb25lIHRoZSBkYXRlXG4gIGlmIChcbiAgICBhcmd1bWVudCBpbnN0YW5jZW9mIERhdGUgfHxcbiAgICAodHlwZW9mIGFyZ3VtZW50ID09PSBcIm9iamVjdFwiICYmIGFyZ1N0ciA9PT0gXCJbb2JqZWN0IERhdGVdXCIpXG4gICkge1xuICAgIC8vIFByZXZlbnQgdGhlIGRhdGUgdG8gbG9zZSB0aGUgbWlsbGlzZWNvbmRzIHdoZW4gcGFzc2VkIHRvIG5ldyBEYXRlKCkgaW4gSUUxMFxuICAgIHJldHVybiBuZXcgYXJndW1lbnQuY29uc3RydWN0b3IoK2FyZ3VtZW50KTtcbiAgfSBlbHNlIGlmIChcbiAgICB0eXBlb2YgYXJndW1lbnQgPT09IFwibnVtYmVyXCIgfHxcbiAgICBhcmdTdHIgPT09IFwiW29iamVjdCBOdW1iZXJdXCIgfHxcbiAgICB0eXBlb2YgYXJndW1lbnQgPT09IFwic3RyaW5nXCIgfHxcbiAgICBhcmdTdHIgPT09IFwiW29iamVjdCBTdHJpbmddXCJcbiAgKSB7XG4gICAgLy8gVE9ETzogQ2FuIHdlIGdldCByaWQgb2YgYXM/XG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBUT0RPOiBDYW4gd2UgZ2V0IHJpZCBvZiBhcz9cbiAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgfVxufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IHRvRGF0ZTtcbiIsImltcG9ydCB7IHRvRGF0ZSB9IGZyb20gXCIuL3RvRGF0ZS5tanNcIjtcblxuLyoqXG4gKiBAbmFtZSBzdGFydE9mRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIG9yaWdpbmFsIGRhdGVcbiAqXG4gKiBAcmV0dXJucyBUaGUgc3RhcnQgb2YgYSBkYXlcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgZGF5IGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZkRheShuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBUdWUgU2VwIDAyIDIwMTQgMDA6MDA6MDBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0T2ZEYXkoZGF0ZSkge1xuICBjb25zdCBfZGF0ZSA9IHRvRGF0ZShkYXRlKTtcbiAgX2RhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIHJldHVybiBfZGF0ZTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBzdGFydE9mRGF5O1xuIiwiaW1wb3J0IHsgaXNTYW1lRGF5IH0gZnJvbSBcIi4vaXNTYW1lRGF5Lm1qc1wiO1xuXG4vKipcbiAqIEBuYW1lIGlzVG9kYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKiBAcHVyZSBmYWxzZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgZGF0ZSB0byBjaGVja1xuICpcbiAqIEByZXR1cm5zIFRoZSBkYXRlIGlzIHRvZGF5XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDYgT2N0b2JlciAyMDE0LCBpcyA2IE9jdG9iZXIgMTQ6MDA6MDAgdG9kYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1RvZGF5KG5ldyBEYXRlKDIwMTQsIDksIDYsIDE0LCAwKSlcbiAqIC8vPT4gdHJ1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUb2RheShkYXRlKSB7XG4gIHJldHVybiBpc1NhbWVEYXkoZGF0ZSwgRGF0ZS5ub3coKSk7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgaXNUb2RheTtcbiIsImltcG9ydCB7IHN0YXJ0T2ZEYXkgfSBmcm9tIFwiLi9zdGFydE9mRGF5Lm1qc1wiO1xuXG4vKipcbiAqIEBuYW1lIGlzU2FtZURheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpP1xuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICpcbiAqIEBwYXJhbSBkYXRlTGVmdCAtIFRoZSBmaXJzdCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0gZGF0ZVJpZ2h0IC0gVGhlIHNlY29uZCBkYXRlIHRvIGNoZWNrXG5cbiAqIEByZXR1cm5zIFRoZSBkYXRlcyBhcmUgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciAwNjowMDowMCBhbmQgNCBTZXB0ZW1iZXIgMTg6MDA6MDAgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQsIDYsIDApLCBuZXcgRGF0ZSgyMDE0LCA4LCA0LCAxOCwgMCkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyIGFuZCA0IE9jdG9iZXIgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQpLCBuZXcgRGF0ZSgyMDE0LCA5LCA0KSlcbiAqIC8vPT4gZmFsc2VcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyLCAyMDE0IGFuZCA0IFNlcHRlbWJlciwgMjAxNSBpbiB0aGUgc2FtZSBkYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCksIG5ldyBEYXRlKDIwMTUsIDgsIDQpKVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTYW1lRGF5KGRhdGVMZWZ0LCBkYXRlUmlnaHQpIHtcbiAgY29uc3QgZGF0ZUxlZnRTdGFydE9mRGF5ID0gc3RhcnRPZkRheShkYXRlTGVmdCk7XG4gIGNvbnN0IGRhdGVSaWdodFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRhdGVSaWdodCk7XG5cbiAgcmV0dXJuICtkYXRlTGVmdFN0YXJ0T2ZEYXkgPT09ICtkYXRlUmlnaHRTdGFydE9mRGF5O1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGlzU2FtZURheTtcbiIsImxldCBkZWZhdWx0T3B0aW9ucyA9IHt9O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdE9wdGlvbnMoKSB7XG4gIHJldHVybiBkZWZhdWx0T3B0aW9ucztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRPcHRpb25zKG5ld09wdGlvbnMpIHtcbiAgZGVmYXVsdE9wdGlvbnMgPSBuZXdPcHRpb25zO1xufVxuIiwiaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLm1qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdE9wdGlvbnMgfSBmcm9tIFwiLi9fbGliL2RlZmF1bHRPcHRpb25zLm1qc1wiO1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgc3RhcnRPZldlZWt9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBzdGFydE9mV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCB3aXRoIG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyBUaGUgc3RhcnQgb2YgYSB3ZWVrXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBTdW4gQXVnIDMxIDIwMTQgMDA6MDA6MDBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdGhlIHdlZWsgc3RhcnRzIG9uIE1vbmRheSwgdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSwgeyB3ZWVrU3RhcnRzT246IDEgfSlcbiAqIC8vPT4gTW9uIFNlcCAwMSAyMDE0IDAwOjAwOjAwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydE9mV2VlayhkYXRlLCBvcHRpb25zKSB7XG4gIGNvbnN0IGRlZmF1bHRPcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMoKTtcbiAgY29uc3Qgd2Vla1N0YXJ0c09uID1cbiAgICBvcHRpb25zPy53ZWVrU3RhcnRzT24gPz9cbiAgICBvcHRpb25zPy5sb2NhbGU/Lm9wdGlvbnM/LndlZWtTdGFydHNPbiA/P1xuICAgIGRlZmF1bHRPcHRpb25zLndlZWtTdGFydHNPbiA/P1xuICAgIGRlZmF1bHRPcHRpb25zLmxvY2FsZT8ub3B0aW9ucz8ud2Vla1N0YXJ0c09uID8/XG4gICAgMDtcblxuICBjb25zdCBfZGF0ZSA9IHRvRGF0ZShkYXRlKTtcbiAgY29uc3QgZGF5ID0gX2RhdGUuZ2V0RGF5KCk7XG4gIGNvbnN0IGRpZmYgPSAoZGF5IDwgd2Vla1N0YXJ0c09uID8gNyA6IDApICsgZGF5IC0gd2Vla1N0YXJ0c09uO1xuXG4gIF9kYXRlLnNldERhdGUoX2RhdGUuZ2V0RGF0ZSgpIC0gZGlmZik7XG4gIF9kYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gX2RhdGU7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgc3RhcnRPZldlZWs7XG4iLCJpbXBvcnQgeyBpc1NhbWVXZWVrIH0gZnJvbSBcIi4vaXNTYW1lV2Vlay5tanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIGlzVGhpc1dlZWt9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBpc1RoaXNXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBJcyB0aGUgZ2l2ZW4gZGF0ZSBpbiB0aGUgc2FtZSB3ZWVrIGFzIHRoZSBjdXJyZW50IGRhdGU/XG4gKiBAcHVyZSBmYWxzZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIHNhbWUgd2VlayBhcyB0aGUgY3VycmVudCBkYXRlP1xuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9iamVjdCB3aXRoIG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyBUaGUgZGF0ZSBpcyBpbiB0aGlzIHdlZWtcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgMjUgU2VwdGVtYmVyIDIwMTQsIGlzIDIxIFNlcHRlbWJlciAyMDE0IGluIHRoaXMgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzVGhpc1dlZWsobmV3IERhdGUoMjAxNCwgOCwgMjEpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDI1IFNlcHRlbWJlciAyMDE0IGFuZCB3ZWVrIHN0YXJ0cyB3aXRoIE1vbmRheVxuICogLy8gaXMgMjEgU2VwdGVtYmVyIDIwMTQgaW4gdGhpcyB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNUaGlzV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyMSksIHsgd2Vla1N0YXJ0c09uOiAxIH0pXG4gKiAvLz0+IGZhbHNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1RoaXNXZWVrKGRhdGUsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIGlzU2FtZVdlZWsoZGF0ZSwgRGF0ZS5ub3coKSwgb3B0aW9ucyk7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgaXNUaGlzV2VlaztcbiIsImltcG9ydCB7IHN0YXJ0T2ZXZWVrIH0gZnJvbSBcIi4vc3RhcnRPZldlZWsubWpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBpc1NhbWVXZWVrfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgaXNTYW1lV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpP1xuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICpcbiAqIEBwYXJhbSBkYXRlTGVmdCAtIFRoZSBmaXJzdCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0gZGF0ZVJpZ2h0IC0gVGhlIHNlY29uZCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCB3aXRoIG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyBUaGUgZGF0ZXMgYXJlIGluIHRoZSBzYW1lIHdlZWsgKGFuZCBtb250aCBhbmQgeWVhcilcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDMxIEF1Z3VzdCAyMDE0IGFuZCA0IFNlcHRlbWJlciAyMDE0IGluIHRoZSBzYW1lIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDcsIDMxKSwgbmV3IERhdGUoMjAxNCwgOCwgNCkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgd2VlayBzdGFydHMgd2l0aCBNb25kYXksXG4gKiAvLyBhcmUgMzEgQXVndXN0IDIwMTQgYW5kIDQgU2VwdGVtYmVyIDIwMTQgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgNywgMzEpLCBuZXcgRGF0ZSgyMDE0LCA4LCA0KSwge1xuICogICB3ZWVrU3RhcnRzT246IDFcbiAqIH0pXG4gKiAvLz0+IGZhbHNlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSAxIEphbnVhcnkgMjAxNCBhbmQgMSBKYW51YXJ5IDIwMTUgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgMCwgMSksIG5ldyBEYXRlKDIwMTUsIDAsIDEpKVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTYW1lV2VlayhkYXRlTGVmdCwgZGF0ZVJpZ2h0LCBvcHRpb25zKSB7XG4gIGNvbnN0IGRhdGVMZWZ0U3RhcnRPZldlZWsgPSBzdGFydE9mV2VlayhkYXRlTGVmdCwgb3B0aW9ucyk7XG4gIGNvbnN0IGRhdGVSaWdodFN0YXJ0T2ZXZWVrID0gc3RhcnRPZldlZWsoZGF0ZVJpZ2h0LCBvcHRpb25zKTtcblxuICByZXR1cm4gK2RhdGVMZWZ0U3RhcnRPZldlZWsgPT09ICtkYXRlUmlnaHRTdGFydE9mV2Vlaztcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBpc1NhbWVXZWVrO1xuIiwiaW1wb3J0IHsgcHJvamVjdHMgfSBmcm9tIFwiLi9tYW5hZ2VQcm9qZWN0XCI7XG5pbXBvcnQgeyBpc1RvZGF5LCB0b0RhdGUsIGlzVGhpc1dlZWsgfSBmcm9tIFwiZGF0ZS1mbnNcIjtcblxuY29uc3QgcmVuZGVyVGFzayA9ICgoKSA9PiB7XG4gICAgZnVuY3Rpb24gZGlzcGxheUFsbFRhc2soaXRlbXMsIGRpc3BsYXkpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS10YXNrSWQnLCBgJHtpdGVtcy5pZH1gKVxuXG4gICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgY29uc3QgZHVlZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gYFRpdGxlOiAke2l0ZW1zLnRpdGxlfWA7XG4gICAgICAgIGR1ZWRhdGUudGV4dENvbnRlbnQgPSBgRHVlIERhdGU6ICR7aXRlbXMuZHVlZGF0ZX1gO1xuICAgICAgICBkZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGBEZXNjcmlwdGlvbjogJHtpdGVtcy5kZXNjcmlwdGlvbn1gO1xuICAgICAgICBwcmlvcml0eS50ZXh0Q29udGVudCA9IGBQcmlvcml0eTogJHtpdGVtcy5wcmlvcml0eX1gO1xuXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmQodGl0bGUsIGR1ZWRhdGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSk7XG4gICAgICAgIGRpc3BsYXkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblxuICAgICAgICByZXR1cm4gZGlzcGxheTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaXNwbGF5TmV3SW5wdXQoKSB7XG4gICAgICAgIGxldCBsaXN0ID0gcHJvamVjdHMucHJvamVjdExpc3RbMF0udGFza0xpc3Q7XG4gICAgICAgIGxldCBpdGVtcyA9IGxpc3RbbGlzdC5sZW5ndGggLSAxXTtcblxuICAgICAgICBjb25zdCBnZW5lcmFsTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnZW5lcmFsJyk7XG4gICAgICAgIFxuICAgICAgICBkaXNwbGF5QWxsVGFzayhpdGVtcywgZ2VuZXJhbExpc3QpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRpc3BsYXlJbmJveCgpIHtcbiAgICAgICAgbGV0IGxpc3QgPSBwcm9qZWN0cy5wcm9qZWN0TGlzdFswXS50YXNrTGlzdDtcbiAgICAgICAgY29uc3QgZ2VuZXJhbExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2VuZXJhbCcpO1xuXG4gICAgICAgIHdoaWxlIChnZW5lcmFsTGlzdC5sYXN0RWxlbWVudENoaWxkKSBnZW5lcmFsTGlzdC5yZW1vdmVDaGlsZChnZW5lcmFsTGlzdC5sYXN0RWxlbWVudENoaWxkKTtcblxuICAgICAgICBsaXN0LmZvckVhY2godGFzayA9PiBkaXNwbGF5QWxsVGFzayh0YXNrLCBnZW5lcmFsTGlzdCkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRpc3BsYXlEYWlseSgpIHtcbiAgICAgICAgbGV0IGxpc3QgPSBwcm9qZWN0cy5wcm9qZWN0TGlzdFswXS50YXNrTGlzdDtcbiAgICAgICAgY29uc3QgZ2VuZXJhbExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2VuZXJhbCcpO1xuXG4gICAgICAgIHdoaWxlIChnZW5lcmFsTGlzdC5sYXN0RWxlbWVudENoaWxkKSBnZW5lcmFsTGlzdC5yZW1vdmVDaGlsZChnZW5lcmFsTGlzdC5sYXN0RWxlbWVudENoaWxkKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGRhaWx5VGFza3MgPSBsaXN0LmZpbHRlcih0YXNrID0+IGlzVG9kYXkodG9EYXRlKHRhc2suZHVlZGF0ZSkpKTtcbiAgICAgICAgXG4gICAgICAgIGRhaWx5VGFza3MuZm9yRWFjaCh0YXNrID0+IGRpc3BsYXlBbGxUYXNrKHRhc2ssIGdlbmVyYWxMaXN0KSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlzcGxheVdlZWtseSgpIHtcbiAgICAgICAgbGV0IGxpc3QgPSBwcm9qZWN0cy5wcm9qZWN0TGlzdFswXS50YXNrTGlzdDtcbiAgICAgICAgY29uc3QgZ2VuZXJhbExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2VuZXJhbCcpO1xuXG4gICAgICAgIHdoaWxlIChnZW5lcmFsTGlzdC5sYXN0RWxlbWVudENoaWxkKSBnZW5lcmFsTGlzdC5yZW1vdmVDaGlsZChnZW5lcmFsTGlzdC5sYXN0RWxlbWVudENoaWxkKTtcblxuICAgICAgICBjb25zdCB3ZWVrbHlUYXNrcyA9IGxpc3QuZmlsdGVyKHRhc2sgPT4gaXNUaGlzV2Vlayh0b0RhdGUodGFzay5kdWVkYXRlKSkpO1xuXG4gICAgICAgIHdlZWtseVRhc2tzLmZvckVhY2godGFzayA9PiBkaXNwbGF5QWxsVGFzayh0YXNrLCBnZW5lcmFsTGlzdCkpO1xuICAgIH1cblxuICAgIHJldHVybiB7IGRpc3BsYXlOZXdJbnB1dCwgZGlzcGxheUluYm94LCBkaXNwbGF5RGFpbHksIGRpc3BsYXlXZWVrbHksIGRpc3BsYXlBbGxUYXNrIH1cbn0pKClcblxuY29uc3QgcmVuZGVyUHJvamVjdCA9ICgoKSA9PiB7XG4gICAgZnVuY3Rpb24gZGlzcGxheVByb2plY3QoKSB7XG4gICAgICAgIGxldCBsaXN0ID0gcHJvamVjdHMucHJvamVjdExpc3Q7XG4gICAgICAgIGxldCBwcm9qZWN0ID0gbGlzdFtsaXN0Lmxlbmd0aCAtIDFdO1xuXG4gICAgICAgIGNvbnN0IHByb2plY3REaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsbC1wcm9qZWN0cycpO1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBjb25zdCBwcm9qZWN0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29uc3QgcHJvamVjdFRhc2tCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcblxuICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChgcHJvamVjdC0ke3Byb2plY3QuaWR9YCk7XG4gICAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvamVjdElkJywgYCR7cHJvamVjdC5pZH1gKTtcbiAgICAgICAgcHJvamVjdFRhc2tCdG4uc2V0QXR0cmlidXRlKCdkYXRhLXByb2plY3RJZCcsIGAke3Byb2plY3QuaWR9YCk7XG4gICAgICAgIHByb2plY3RUYXNrQnRuLnNldEF0dHJpYnV0ZSgnaWQnLCBgcHJvamVjdC0ke3Byb2plY3QuaWR9YCk7XG5cbiAgICAgICAgcHJvamVjdFRpdGxlLnRleHRDb250ZW50ID0gYCR7cHJvamVjdC50aXRsZX1gO1xuICAgICAgICBwcm9qZWN0VGFza0J0bi50ZXh0Q29udGVudCA9ICcrJztcblxuICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGRpc3BsYXlQcm9qZWN0VGFza3MocHJvamVjdC5pZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHByb2plY3RUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncHJvamVjdCBpZCcsIHByb2plY3RzLmdyYWJQcm9qZWN0SWQoZSkpO1xuICAgICAgICAgICAgY29uc3QgbmV3VGFza0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWFpbi1mb3JtJyk7XG5cbiAgICAgICAgICAgIHByb2plY3RzLmdyYWJQcm9qZWN0SWQoZSk7XG4gICAgICAgICAgICBuZXdUYXNrRm9ybS5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmQocHJvamVjdFRpdGxlLCBwcm9qZWN0VGFza0J0bik7XG4gICAgICAgIHByb2plY3REaXNwbGF5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cbiAgICAgICAgcmV0dXJuIHByb2plY3REaXNwbGF5XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlzcGxheVByb2plY3RUYXNrcyhpZCkge1xuICAgICAgICBsZXQgbGlzdCA9IHByb2plY3RzLnByb2plY3RMaXN0O1xuICAgICAgICBjb25zdCBnZW5lcmFsTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnZW5lcmFsJyk7XG5cbiAgICAgICAgd2hpbGUgKGdlbmVyYWxMaXN0Lmxhc3RFbGVtZW50Q2hpbGQpIGdlbmVyYWxMaXN0LnJlbW92ZUNoaWxkKGdlbmVyYWxMaXN0Lmxhc3RFbGVtZW50Q2hpbGQpO1xuXG4gICAgICAgIGxldCBwcm9qZWN0TGlzdCA9IGxpc3QuZmlsdGVyKHRhc2sgPT4gdGFzay5pZCA9PT0gaWQpO1xuICAgICAgICBsZXQgcHJvamVjdFRhc2tzID0gcHJvamVjdExpc3RbMF0udGFza0xpc3Q7XG4gICAgICAgIGNvbnNvbGUubG9nKHByb2plY3RUYXNrcyk7XG5cbiAgICAgICAgcHJvamVjdFRhc2tzLmZvckVhY2godGFzayA9PiByZW5kZXJUYXNrLmRpc3BsYXlBbGxUYXNrKHRhc2ssIGdlbmVyYWxMaXN0KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgZGlzcGxheVByb2plY3QgfVxufSkoKVxuXG5leHBvcnQgeyByZW5kZXJUYXNrLCByZW5kZXJQcm9qZWN0IH0iLCJpbXBvcnQgeyBBZGR0b0xpc3QgfSBmcm9tIFwiLi9tYW5hZ2VMaXN0XCI7XG5pbXBvcnQgeyByZW5kZXJUYXNrIH0gZnJvbSBcIi4vVUlcIjtcbmltcG9ydCB7IHByb2plY3RzIH0gZnJvbSBcIi4vbWFuYWdlUHJvamVjdFwiO1xuaW1wb3J0IHsgdG9EYXRlLCBpc1RoaXNXZWVrLCBpc1RvZGF5IH0gZnJvbSBcImRhdGUtZm5zXCI7XG5cblxuY29uc3QgY3JlYXRlVGFzayA9IChpZCwgdGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVkYXRlLCBwcmlvcml0eSwgcHJvamVjdCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIGlkLCB0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZWRhdGUsIHByaW9yaXR5LCBwcm9qZWN0XG4gICAgfVxufVxuXG5jb25zdCBOZXdUYXNrID0gKCgpID0+IHtcblxuICAgIGxldCB0aXRsZTtcbiAgICBsZXQgZGVzY3JpcHRpb247XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVOZXdUYXNrKCkge1xuICAgICAgICBjb25zdCBwcm9qZWN0TGlzdCA9IHByb2plY3RzLmdyYWJQcm9qZWN0TGlzdCgpO1xuXG4gICAgICAgIHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpdGxlJykudmFsdWU7XG4gICAgICAgIGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rlc2NyaXB0aW9uJykudmFsdWU7XG5cbiAgICAgICAgbGV0IGR1ZWRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0ZScpLnZhbHVlO1xuICAgICAgICBsZXQgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpb3JpdHknKS52YWx1ZTtcbiAgICAgICAgbGV0IGlkID0gY3JlYXRlSWQoKTtcbiAgICAgICAgbGV0IHByb2plY3RJZCA9IHByb2plY3RzLmdyYWJDdXJyZW50UHJvamVjdCgpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGlzVGhpc1dlZWsodG9EYXRlKGR1ZWRhdGUpKSlcbiAgICAgICAgY29uc29sZS5sb2coaXNUb2RheSh0b0RhdGUoZHVlZGF0ZSkpKVxuXG4gICAgICAgIGlmICh0aXRsZSA9PT0gJycgfHxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID09PSAnJyB8fFxuICAgICAgICAgICAgZHVlZGF0ZSA9PT0gJycpIHJldHVyblxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2sgPSBjcmVhdGVUYXNrKGlkLCB0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZWRhdGUsIHByaW9yaXR5LCBwcm9qZWN0SWQpO1xuICAgICAgICAgICAgY29uc29sZS5sb2codGFzayk7XG5cbiAgICAgICAgICAgIGlmIChwcm9qZWN0SWQgPT09IDApIHtcbiAgICAgICAgICAgICAgICBwcm9qZWN0TGlzdFswXS50YXNrTGlzdC5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb2plY3RMaXN0KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHByb2plY3RMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb2plY3RMaXN0W2ldLmlkID09PSBwcm9qZWN0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgQWRkdG9MaXN0LmFkZFRvTGlzdCh0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdExpc3RbaV0udGFza0xpc3QucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocHJvamVjdExpc3QpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUlkKCkge1xuICAgICAgICBsZXQgbGlzdCA9IEFkZHRvTGlzdC5Ub2RvTGlzdDtcbiAgICAgICAgbGV0IGlkO1xuXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGlkID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpZCA9IGxpc3RbbGlzdC5sZW5ndGgtMV0uaWQgKyAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICAgIGxldCB0aXRsZVZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpdGxlJyk7XG4gICAgICAgIHRpdGxlVmFsdWUudmFsdWUgPSAnJztcbiAgICAgICAgdGl0bGUgPSAnJztcblxuICAgICAgICBsZXQgZGVzY3JpcHRpb25WYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXNjcmlwdGlvbicpO1xuICAgICAgICBkZXNjcmlwdGlvblZhbHVlLnZhbHVlID0gJyc7XG4gICAgICAgIGRlc2NyaXB0aW9uID0gJyc7XG5cbiAgICAgICAgbGV0IGR1ZWRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0ZScpO1xuICAgICAgICBkdWVkYXRlLnZhbHVlID0gJyc7XG5cbiAgICAgICAgbGV0IHByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW9yaXR5Jyk7XG4gICAgICAgIHByaW9yaXR5LnZhbHVlID0gJ0xvdyc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdFN1Ym1pdEJ0bigpIHtcbiAgICAgICAgY29uc3Qgc3VibWl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N1Ym1pdCcpO1xuXG4gICAgICAgIHN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBzdWJtaXRUYXNrKCk7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdWJtaXRUYXNrKCkge1xuICAgICAgICBjb25zdCBuZXdUYXNrRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtYWluLWZvcm0nKTtcbiAgICAgICAgY29uc3QgbmV3VGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdUYXNrJyk7XG4gICAgICAgIFxuICAgICAgICBjcmVhdGVOZXdUYXNrKCk7XG5cbiAgICAgICAgaWYgKHRpdGxlID09PSAnJyB8fCBkZXNjcmlwdGlvbiA9PT0gJycpIHJldHVyblxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlbmRlclRhc2suZGlzcGxheU5ld0lucHV0KCk7XG4gICAgICAgICAgICByZXNldCgpO1xuICAgICAgICAgICAgbmV3VGFza0Zvcm0uc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAnJyk7XG4gICAgICAgICAgICBuZXdUYXNrQnRuLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5jZWxUYXNrKCkge1xuICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FuY2VsJyk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21haW4tZm9ybScpO1xuICAgICAgICBjb25zdCBuZXdUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ld1Rhc2snKTtcblxuICAgICAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgICAgIG5ld1Rhc2tGb3JtLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpO1xuICAgICAgICAgICAgbmV3VGFza0J0bi5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9wZW5UYXNrQ3JlYXRvcigpIHtcbiAgICAgICAgY29uc3QgbmV3VGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdUYXNrJyk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21haW4tZm9ybScpO1xuXG4gICAgICAgIG5ld1Rhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgcHJvamVjdHMuZ3JhYlByb2plY3RJZChlKTtcbiAgICAgICAgICAgIG5ld1Rhc2tGb3JtLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICBuZXdUYXNrQnRuLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiB7IGNyZWF0ZU5ld1Rhc2ssIGluaXRTdWJtaXRCdG4sIGNhbmNlbFRhc2ssIG9wZW5UYXNrQ3JlYXRvciB9XG59KSgpO1xuXG5leHBvcnQgeyBOZXdUYXNrIH1cbiIsImltcG9ydCB7IE5ld1Rhc2sgfSBmcm9tIFwiLi9tYW5hZ2VUYXNrLmpzXCI7XG5pbXBvcnQgeyBwcm9qZWN0cyB9IGZyb20gXCIuL21hbmFnZVByb2plY3QuanNcIjtcbmltcG9ydCB7IHJlbmRlclRhc2sgfSBmcm9tIFwiLi9VSS5qc1wiO1xuXG5OZXdUYXNrLmluaXRTdWJtaXRCdG4oKTtcbk5ld1Rhc2suY2FuY2VsVGFzaygpO1xuTmV3VGFzay5vcGVuVGFza0NyZWF0b3IoKTtcblxucHJvamVjdHMuc3VibWl0UHJvamVjdCgpO1xuXG5jb25zdCB0b2RheVRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RheScpO1xuY29uc3Qgd2Vla1RhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3ZWVrbHknKTtcbmNvbnN0IGluYm94VGFiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2luYm94Jyk7XG5cbnRvZGF5VGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxyZW5kZXJUYXNrLmRpc3BsYXlEYWlseSk7XG53ZWVrVGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVuZGVyVGFzay5kaXNwbGF5V2Vla2x5KTtcbmluYm94VGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVuZGVyVGFzay5kaXNwbGF5SW5ib3gpOyJdLCJuYW1lcyI6WyJBZGR0b0xpc3QiLCJUb2RvTGlzdCIsImFkZFRvTGlzdCIsInRhc2siLCJwdXNoIiwiY29uc29sZSIsImxvZyIsIm5ld1Byb2plY3QiLCJ0aXRsZSIsInRhc2tMaXN0IiwiaWQiLCJwcm9qZWN0cyIsInByb2plY3RUaXRsZSIsInByb2plY3RMaXN0IiwiZ2VuZXJhbExpc3QiLCJjdXJyZW50UHJvamVjdCIsInN1Ym1pdFByb2plY3QiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwidmFsdWUiLCJwcm9qZWN0SWQiLCJsZW5ndGgiLCJwcm9qZWN0IiwiYWRkVG9Qcm9qZWN0TGlzdCIsImNyZWF0ZVByb2plY3QiLCJyZW5kZXJQcm9qZWN0IiwiZGlzcGxheVByb2plY3QiLCJncmFiUHJvamVjdElkIiwicGFyc2VJbnQiLCJ0YXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJncmFiQ3VycmVudFByb2plY3QiLCJncmFiUHJvamVjdExpc3QiLCJ0b0RhdGUiLCJhcmd1bWVudCIsImFyZ1N0ciIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsIkRhdGUiLCJjb25zdHJ1Y3RvciIsIk5hTiIsInN0YXJ0T2ZEYXkiLCJkYXRlIiwiX2RhdGUiLCJzZXRIb3VycyIsImlzVG9kYXkiLCJkYXRlTGVmdCIsImRhdGVSaWdodCIsIm5vdyIsImRlZmF1bHRPcHRpb25zIiwiZ2V0RGVmYXVsdE9wdGlvbnMiLCJzdGFydE9mV2VlayIsIm9wdGlvbnMiLCJ3ZWVrU3RhcnRzT24iLCJsb2NhbGUiLCJkYXkiLCJnZXREYXkiLCJkaWZmIiwic2V0RGF0ZSIsImdldERhdGUiLCJpc1RoaXNXZWVrIiwiaXNTYW1lV2VlayIsInJlbmRlclRhc2siLCJkaXNwbGF5QWxsVGFzayIsIml0ZW1zIiwiZGlzcGxheSIsImNvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJkdWVkYXRlIiwiZGVzY3JpcHRpb24iLCJwcmlvcml0eSIsInRleHRDb250ZW50IiwiYXBwZW5kIiwiYXBwZW5kQ2hpbGQiLCJkaXNwbGF5TmV3SW5wdXQiLCJsaXN0IiwiZGlzcGxheUluYm94IiwibGFzdEVsZW1lbnRDaGlsZCIsInJlbW92ZUNoaWxkIiwiZm9yRWFjaCIsImRpc3BsYXlEYWlseSIsImZpbHRlciIsImRpc3BsYXlXZWVrbHkiLCJwcm9qZWN0RGlzcGxheSIsInByb2plY3RUYXNrQnRuIiwiY2xhc3NMaXN0IiwiYWRkIiwic3RvcFByb3BhZ2F0aW9uIiwicHJvamVjdFRhc2tzIiwiZGlzcGxheVByb2plY3RUYXNrcyIsIm5ld1Rhc2tGb3JtIiwicmVtb3ZlQXR0cmlidXRlIiwiTmV3VGFzayIsImNyZWF0ZU5ld1Rhc2siLCJnZXRFbGVtZW50QnlJZCIsImNyZWF0ZUlkIiwiY3JlYXRlVGFzayIsImkiLCJyZXNldCIsImluaXRTdWJtaXRCdG4iLCJuZXdUYXNrQnRuIiwic3VibWl0VGFzayIsImNhbmNlbFRhc2siLCJjYW5jZWxCdG4iLCJvcGVuVGFza0NyZWF0b3IiLCJ0b2RheVRhYiIsIndlZWtUYWIiLCJpbmJveFRhYiJdLCJzb3VyY2VSb290IjoiIn0=