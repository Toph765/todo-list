(()=>{"use strict";const t=(()=>{let t=[];return{addToList:function(e){t.push(e),console.log(t)},TodoList:t,removeTask:function(e){return t=t.filter((t=>e!==t.id))}}})(),e=function(){const t=r.grabProjectList();var e;localStorage.setItem("project",(e=t,JSON.stringify(e))),console.log(JSON.parse(localStorage.getItem("project")))},o=function(){const t=JSON.parse(localStorage.getItem("project"));t.filter((t=>0!==t.id)).forEach((t=>{t.taskList=[],r.addToProjectList(t),p.displayProject(t)})),t[0].taskList.forEach((t=>{g.addToTasklist(t.project,t),m.updateDisplay(t.project)}))},n=(t,e,o)=>({title:t,taskList:e,id:o}),r=(()=>{let o,r=[],i=t.TodoList;const s=n("General",i,0);r.push(s);let a=0;function l(t){r.push(t),console.log(r)}return{submitProject:function(){document.querySelector("#createProject").addEventListener("click",(t=>{if(t.preventDefault(),function(){o=document.querySelector("#projectTitle").value;const t=0===r.length?0:r[r.length-1].id+1;if(""!==o){const r=n(o,[],t);console.log(r),l(r),e()}}(),""!==o){let t=r[r.length-1];p.displayProject(t),document.querySelector("#projectTitle").value="",o=""}}))},grabProjectId:function(t){let e=parseInt(t.target.getAttribute("data-projectId"));return a=e,a},grabCurrentProject:function(){return a},grabProjectList:function(){return r},projectList:r,updateGeneralList:function(t){return s.taskList=t,console.log(s.taskList),s},updateProject:function(t){let e=s.taskList.filter((e=>e.project===t));return console.log(e),0!==t?r.filter((e=>e.id===t))[0].taskList=e:void 0},grabCurrentProjectTasks:function(t){return console.log(r.filter((e=>e.id===t))[0].taskList),r.filter((e=>e.id===t))[0].taskList},removeProject:function(t){return console.log("before",r),r=r.filter((e=>e.id!==t)),console.log("after",r),r},addToProjectList:l}})();function i(t){const e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new t.constructor(+t):"number"==typeof t||"[object Number]"===e||"string"==typeof t||"[object String]"===e?new Date(t):new Date(NaN)}function s(t){const e=i(t);return e.setHours(0,0,0,0),e}function a(t){return e=t,o=Date.now(),+s(e)==+s(o);var e,o}let l={};function c(){return l}function d(t,e){const o=c(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0,r=i(t),s=r.getDay(),a=(s<n?7:0)+s-n;return r.setDate(r.getDate()-a),r.setHours(0,0,0,0),r}function u(t,e){return function(t,e,o){return+d(t,o)==+d(e,o)}(t,Date.now(),e)}const m=(()=>{function o(o,i){const s=document.createElement("div");s.setAttribute("data-taskId",`${o.id}`),s.classList.add("task");const a=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),u=document.createElement("div"),m=document.createElement("div"),p=document.createElement("button"),g=document.createElement("button"),b=document.createElement("input"),f=document.createElement("label"),y=document.createElement("div"),L=document.createElement("img"),v=document.createElement("img"),h=document.createElement("div");return a.textContent=`${o.title}`,c.textContent=`${o.duedate}`,d.textContent=`${o.details}`,f.textContent="Done?",a.classList.add("title"),c.classList.add("duedate"),d.classList.add("details"),m.classList.add("status-cont"),f.classList.add("label"),b.classList.add("checkbox"),u.classList.add(`${o.priority}`),u.classList.add("priority"),y.classList.add("taskBtns"),p.classList.add("delete"),g.classList.add("edit"),L.classList.add("icon"),v.classList.add("icon"),h.classList.add("taskFunc"),b.setAttribute("type","checkbox"),b.setAttribute("id",`status-${o.id}`),b.setAttribute("name","status"),b.setAttribute("value","off"),f.setAttribute("for",`status-${o.id}`),p.setAttribute("data-taskId",`${o.id}`),L.setAttribute("src","img/trash-can-outline.svg"),L.setAttribute("alt","delete icon"),v.setAttribute("src","img/text-box-edit-outline.svg"),v.setAttribute("alt","edit icon"),b.addEventListener("click",(()=>{"off"===b.value?n(o,b,f,g,v,s):function(t,e,o,n,r,i){o.textContent="Done?",o.removeAttribute("style"),e.value="off",n.removeAttribute("disabled"),r.removeAttribute("style"),t.status="unfinished",i.classList.remove("finished")}(o,b,f,g,v,s),e()})),p.addEventListener("click",(()=>function(o,n){let i=t.removeTask(o);const s=document.querySelector("#general");for(r.updateGeneralList(i),r.updateProject(n),e();s.lastElementChild;)s.removeChild(s.lastElementChild);l(n),console.log(r.projectList),console.log(n)}(o.id,o.project))),g.addEventListener("click",(()=>{!function(t){const e=document.querySelector("#main-form"),o=document.querySelector(".dialog");e.classList.add("edit-mode"),e.setAttribute("data-taskId",`${t.id}`);let n=document.getElementById("title"),r=document.getElementById("details"),i=document.getElementById("date"),s=document.getElementById("priority");const a=t.title,l=t.details,c=t.duedate,d=t.priority;n.value=a,r.value=l,i.value=c,s.value=d,o.showModal()}(o)})),"finished"===o.status&&(b.setAttribute("checked",""),n(o,b,f,g,v,s)),p.append(L),g.append(v),m.append(f,b),y.append(p,g),h.append(y,m),s.append(u,a,c,d,h),i.appendChild(s),i}function n(t,e,o,n,r,i){o.textContent="Done!",o.setAttribute("style","font-weight: bold;"),e.value="on",n.setAttribute("disabled",""),r.setAttribute("style","opacity: 0.5;"),t.status="finished",i.classList.add("finished")}function s(){return document.querySelector("#general").getAttribute("class")}function l(t){let e=s();"inboxTab"===e?c():"todayTab"===e?d():"weekTab"===e?m():e===`${t}`&&0!==t&&p.displayProjectTasks(t)}function c(){let t=r.grabProjectList()[0].taskList;const e=document.querySelector(".empty"),n=document.querySelector("#newTask"),i=document.querySelector("#general");if(n.setAttribute("data-projectId","0"),i.classList.replace(i.getAttribute("class"),"inboxTab"),0===t.length)e.removeAttribute("hidden");else{for(e.setAttribute("hidden","");i.lastElementChild;)i.removeChild(i.lastElementChild);console.log(t),t.forEach((t=>o(t,i))),console.log(r.projectList)}}function d(){let t=r.grabProjectList()[0].taskList;const e=document.querySelector(".empty"),n=document.querySelector("#newTask"),s=document.querySelector("#general");for(n.setAttribute("data-projectId","0"),s.classList.replace(s.getAttribute("class"),"todayTab");s.lastElementChild;)s.removeChild(s.lastElementChild);const l=t.filter((t=>a(i(t.duedate))));0===l.length?e.removeAttribute("hidden"):(e.setAttribute("hidden",""),l.forEach((t=>o(t,s))))}function m(){let t=r.grabProjectList()[0].taskList;const e=document.querySelector(".empty"),n=document.querySelector("#newTask"),s=document.querySelector("#general");for(n.setAttribute("data-projectId","0"),s.classList.replace(s.getAttribute("class"),"weekTab");s.lastElementChild;)s.removeChild(s.lastElementChild);const a=t.filter((t=>u(i(t.duedate))));0===a.length?e.removeAttribute("hidden"):(e.setAttribute("hidden",""),a.forEach((t=>o(t,s))))}return{displayInbox:c,displayDaily:d,displayWeekly:m,displayAllTask:o,updateDisplay:l,grabTab:s}})(),p=(()=>{function o(t){const e=document.querySelector(".empty"),o=document.querySelector("#general");for(o.classList.replace(o.getAttribute("class"),`${t}`);o.lastElementChild;)o.removeChild(o.lastElementChild);let n=r.grabCurrentProjectTasks(t);0===n.length?e.removeAttribute("hidden"):(e.setAttribute("hidden",""),n.forEach((t=>m.displayAllTask(t,o))))}return{displayProject:function n(i){const s=document.querySelector("#newTask"),a=document.querySelector(".all-projects"),l=document.createElement("div"),c=document.createElement("div"),d=document.createElement("button"),u=document.createElement("img");return l.classList.add(`project-${i.id}`),l.classList.add("container-project"),c.classList.add("project-title"),d.classList.add("del-project"),u.classList.add("projDelImg"),l.setAttribute("data-projectId",`${i.id}`),d.setAttribute("hidden",""),u.setAttribute("src","img/trash-can-outline.svg"),u.setAttribute("alt","delete icon"),c.textContent=`${i.title}`,l.addEventListener("click",(t=>{t.stopPropagation(),s.setAttribute("data-projectId",`${i.id}`),o(i.id)})),l.addEventListener("mouseover",(()=>{d.removeAttribute("hidden"),l.setAttribute("style","border: 2px solid black;")})),l.addEventListener("mouseleave",(()=>{d.setAttribute("hidden",""),l.removeAttribute("style")})),d.addEventListener("click",(o=>{o.stopPropagation(),function(o){r.removeProject(o);let i=r.grabProjectList();t.TodoList.filter((t=>t.project===o)).forEach((e=>{let o=t.removeTask(e.id);r.updateGeneralList(o)}));let s=document.querySelector(".all-projects");for(;s.lastElementChild;)s.removeChild(s.lastElementChild);i.forEach((t=>{t.id>0&&n(t)})),parseInt(m.grabTab(o))===o?m.displayInbox():m.updateDisplay(o),e()}(i.id)})),d.appendChild(u),l.append(c,d),a.appendChild(l),a},displayProjectTasks:o}})(),g=(()=>{let o,n;function s(){r.grabProjectList(),o=document.getElementById("title").value,n=document.getElementById("details").value;let t=document.getElementById("date").value,e=document.getElementById("priority").value,s=function(){let t=r.grabProjectList()[0].taskList;return 0===t.length?0:t[t.length-1].id+1}(),c=r.grabCurrentProject();if(console.log(u(i(t))),console.log(a(i(t))),""===o||""===n||""===t)return;const d=((t,e,o,n,r,i,s)=>({id:t,title:e,details:o,duedate:n,priority:r,project:i,status:"unfinished"}))(s,o,n,t,e,c);console.log(d),l(c,d)}function l(e,o){const n=r.grabProjectList();0===e&&(n[0].taskList.push(o),console.log(n));for(let r=1;r<n.length;r++)n[r].id===e&&(t.addToList(o),n[r].taskList.push(o),console.log(n))}function c(){document.getElementById("title").value="",o="",document.getElementById("details").value="",n="",document.getElementById("date").value="",document.getElementById("priority").value="Low"}return{createNewTask:s,initSubmitBtn:function(){document.querySelector("#submit").addEventListener("click",(t=>{!function(){const t=document.querySelector("#main-form"),i=parseInt(t.getAttribute("data-taskId")),a=document.querySelector(".dialog");if(t.classList.contains("edit-mode")?(console.log("werk"),function(t){let e=document.getElementById("title").value,i=document.getElementById("details").value,s=document.getElementById("date").value,a=document.getElementById("priority").value;const l=r.grabProjectList()[0].taskList,c=l.filter((e=>t===e.id))[0];c.title=e,c.details=i,c.duedate=s,c.priority=a,o=e,n=i;for(let e=0;e<l.length;e++)l[e].id===t&&(l[e]=c,r.updateProject(l[e].project),console.log(r.grabProjectList()))}(i)):s(),e(),""===o||""===n)return;let l,d=r.grabProjectList()[0].taskList;t.classList.contains("edit-mode")?(l=d.filter((t=>i===t.id))[0].project,t.classList.remove("edit-mode")):l=d[d.length-1].project,m.updateDisplay(l),c(),a.close()}(),t.preventDefault()}))},cancelTask:function(){const t=document.querySelector("#cancel"),e=document.querySelector(".dialog");t.addEventListener("click",(t=>{c(),e.close(),t.preventDefault()}))},openTaskCreator:function(){const t=document.querySelector("#newTask"),e=document.querySelector(".dialog");t.addEventListener("click",(t=>{r.grabProjectId(t),e.showModal(),t.preventDefault()}))},addToTasklist:l}})();g.initSubmitBtn(),g.cancelTask(),g.openTaskCreator(),r.submitProject();const b=document.querySelector("#today"),f=document.querySelector("#weekly"),y=document.querySelector("#inbox");b.addEventListener("click",m.displayDaily),f.addEventListener("click",m.displayWeekly),y.addEventListener("click",m.displayInbox),document.addEventListener("DOMContentLoaded",o)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQUEsTUFBTUEsRUFBWSxNQUNkLElBQUlDLEVBQVcsR0FXZixNQUFPLENBQUVDLFVBVFQsU0FBbUJDLEdBQ2ZGLEVBQVNHLEtBQUtELEdBQ2RFLFFBQVFDLElBQUlMLEVBQ2hCLEVBTW9CQSxXQUFVTSxXQUo5QixTQUFvQkMsR0FDaEIsT0FBT1AsRUFBV0EsRUFBU1EsUUFBT04sR0FBUUssSUFBT0wsRUFBS0ssSUFDMUQsRUFHSCxFQWJpQixHQ0laRSxFQUtGLFdBQ0ksTUFBTUMsRUFBY0MsRUFBU0Msa0JBTGpDLElBQW1CQyxFQU1mQyxhQUFhQyxRQUFRLFdBTk5GLEVBTTJCSCxFQUxuQ00sS0FBS0MsVUFBVUosS0FNdEJULFFBQVFDLElBQUlXLEtBQUtFLE1BQU1KLGFBQWFLLFFBQVEsWUFDaEQsRUFURVYsRUFXRixXQUNJLE1BQU1XLEVBQVVKLEtBQUtFLE1BQU1KLGFBQWFLLFFBQVEsWUFFM0JDLEVBQVFaLFFBQU9hLEdBQTBCLElBQWZBLEVBQVFkLEtBQ3hDZSxTQUFRRCxJQUNuQkEsRUFBUUUsU0FBVyxHQUNuQlosRUFBU2EsaUJBQWlCSCxHQUMxQkksRUFBY0MsZUFBZUwsRUFBUSxJQUczQkQsRUFBUSxHQUVkRyxTQUFTRCxTQUFRcEIsSUFDckJ5QixFQUFRQyxjQUFjMUIsRUFBS21CLFFBQVNuQixHQUNwQzJCLEVBQVdDLGNBQWM1QixFQUFLbUIsUUFBUSxHQUc5QyxFQzVCRVUsRUFBYSxDQUFDQyxFQUFPVCxFQUFVaEIsS0FDMUIsQ0FBRXlCLFFBQU9ULFdBQVVoQixPQUd4QkksRUFBVyxNQUNiLElBQUlzQixFQUNBdkIsRUFBYyxHQUVkYSxFQUFXeEIsRUFBVUMsU0FFekIsTUFBTWtDLEVBQWNILEVBQVcsVUFBV1IsRUFBVSxHQUNwRGIsRUFBWVAsS0FBSytCLEdBRWpCLElBQUlDLEVBQWlCLEVBMkRyQixTQUFTWCxFQUFpQkgsR0FDdEJYLEVBQVlQLEtBQUtrQixHQUNqQmpCLFFBQVFDLElBQUlLLEVBQ2hCLENBaUNBLE1BQU8sQ0FBRTBCLGNBekJULFdBQzZCQyxTQUFTQyxjQUFjLGtCQUUvQkMsaUJBQWlCLFNBQVVDLElBSXhDLEdBSEFBLEVBQUVDLGlCQXRDVixXQUNJUixFQUFlSSxTQUFTQyxjQUFjLGlCQUFpQkksTUFDdkQsTUFBTUMsRUFjcUIsSUFBdkJqQyxFQUFZa0MsT0FDQSxFQUVBbEMsRUFBWUEsRUFBWWtDLE9BQVMsR0FBR3JDLEdBQUssRUFkekQsR0FBcUIsS0FBakIwQixFQUNDLENBQ0QsTUFBTVosRUFBVVUsRUFBV0UsRUFKVixHQUlzQ1UsR0FDdkR2QyxRQUFRQyxJQUFJZ0IsR0FDWkcsRUFBaUJILEdBQ2pCWixHQUNKLENBQ0osQ0E0QlFvQyxHQUNxQixLQUFqQlosRUFDQyxDQUNELElBQUlaLEVBQVVYLEVBQVlBLEVBQVlrQyxPQUFRLEdBRTlDbkIsRUFBY0MsZUFBZUwsR0FoQmJnQixTQUFTQyxjQUFjLGlCQUM3QkksTUFBUSxHQUMxQlQsRUFBZSxFQWdCWCxJQUVSLEVBV1NhLGNBVFQsU0FBdUJOLEdBQ25CLElBQUlHLEVBQVlJLFNBQVNQLEVBQUVRLE9BQU9DLGFBQWEsbUJBSS9DLE9BRkFkLEVBQWlCUSxFQUVWUixDQUNYLEVBSVNlLG1CQXJFVCxXQUNJLE9BQU9mLENBQ1gsRUFvRVN2QixnQkFsRVQsV0FDSSxPQUFPRixDQUNYLEVBaUVTQSxjQUNBeUMsa0JBbEdULFNBQTJCL0IsR0FHdkIsT0FGQWMsRUFBWVgsU0FBV0gsRUFDdkJoQixRQUFRQyxJQUFJNkIsRUFBWVgsVUFDakJXLENBQ1gsRUErRlNrQixjQTdGVCxTQUF1QjdDLEdBQ25CLElBQUk4QyxFQUFTbkIsRUFBWVgsU0FBU2YsUUFBT04sR0FBUUEsRUFBS21CLFVBQVlkLElBRWxFLE9BREFILFFBQVFDLElBQUlnRCxHQUNELElBQVA5QyxFQUNPRyxFQUFZRixRQUFPYSxHQUFXQSxFQUFRZCxLQUFPQSxJQUFJLEdBQUdnQixTQUFXOEIsT0FDbkUsQ0FDWCxFQXdGU0Msd0JBdEZULFNBQWlDL0MsR0FFN0IsT0FEQUgsUUFBUUMsSUFBSUssRUFBWUYsUUFBT2EsR0FBV0EsRUFBUWQsS0FBT0EsSUFBSSxHQUFHZ0IsVUFDekRiLEVBQVlGLFFBQU9hLEdBQVdBLEVBQVFkLEtBQU9BLElBQUksR0FBR2dCLFFBQy9ELEVBb0ZTZ0MsY0FsRlQsU0FBdUJoRCxHQUluQixPQUhBSCxRQUFRQyxJQUFJLFNBQVVLLEdBQ3RCQSxFQUFjQSxFQUFZRixRQUFPYSxHQUFXQSxFQUFRZCxLQUFPQSxJQUMzREgsUUFBUUMsSUFBSSxRQUFTSyxHQUNkQSxDQUNYLEVBOEVTYyxtQkFDWixFQWxIZ0IsR0N3QlYsU0FBU2dDLEVBQU9DLEdBQ3JCLE1BQU1DLEVBQVNDLE9BQU9DLFVBQVVDLFNBQVNDLEtBQUtMLEdBRzlDLE9BQ0VBLGFBQW9CTSxNQUNDLGlCQUFiTixHQUFvQyxrQkFBWEMsRUFHMUIsSUFBSUQsRUFBU08sYUFBYVAsR0FFYixpQkFBYkEsR0FDSSxvQkFBWEMsR0FDb0IsaUJBQWJELEdBQ0ksb0JBQVhDLEVBR08sSUFBSUssS0FBS04sR0FHVCxJQUFJTSxLQUFLRSxJQUVwQixDQ2hDTyxTQUFTQyxFQUFXQyxHQUN6QixNQUFNQyxFQUFRWixFQUFPVyxHQUVyQixPQURBQyxFQUFNQyxTQUFTLEVBQUcsRUFBRyxFQUFHLEdBQ2pCRCxDQUNULENDSk8sU0FBU0UsRUFBUUgsR0FDdEIsT0NTd0JJLEVEVFBKLEVDU2lCSyxFRFRYVCxLQUFLVSxPQ1VEUCxFQUFXSyxLQUNWTCxFQUFXTSxHQUZsQyxJQUFtQkQsRUFBVUMsQ0RScEMsQ0V4QkEsSUFBSUUsRUFBaUIsQ0FBQyxFQUVmLFNBQVNDLElBQ2QsT0FBT0QsQ0FDVCxDQzZCTyxTQUFTRSxFQUFZVCxFQUFNVSxHQUNoQyxNQUFNSCxFQUFpQkMsSUFDakJHLEVBQ0pELEdBQVNDLGNBQ1RELEdBQVNFLFFBQVFGLFNBQVNDLGNBQzFCSixFQUFlSSxjQUNmSixFQUFlSyxRQUFRRixTQUFTQyxjQUNoQyxFQUVJVixFQUFRWixFQUFPVyxHQUNmYSxFQUFNWixFQUFNYSxTQUNaQyxHQUFRRixFQUFNRixFQUFlLEVBQUksR0FBS0UsRUFBTUYsRUFJbEQsT0FGQVYsRUFBTWUsUUFBUWYsRUFBTWdCLFVBQVlGLEdBQ2hDZCxFQUFNQyxTQUFTLEVBQUcsRUFBRyxFQUFHLEdBQ2pCRCxDQUNULENDaEJPLFNBQVNpQixFQUFXbEIsRUFBTVUsR0FDL0IsT0NNSyxTQUFvQk4sRUFBVUMsRUFBV0ssR0FJOUMsT0FINEJELEVBQVlMLEVBQVVNLEtBQ3JCRCxFQUFZSixFQUFXSyxFQUd0RCxDRFhTUyxDQUFXbkIsRUFBTUosS0FBS1UsTUFBT0ksRUFDdEMsQ0FHQSxNRWpDTWhELEVBQWEsTUFDZixTQUFTMEQsRUFBZUMsRUFBT0MsR0FDM0IsTUFBTUMsRUFBWXJELFNBQVNzRCxjQUFjLE9BRXpDRCxFQUFVRSxhQUFhLGNBQWUsR0FBR0osRUFBTWpGLE1BRS9DbUYsRUFBVUcsVUFBVUMsSUFBSSxRQUV4QixNQUFNOUQsRUFBUUssU0FBU3NELGNBQWMsT0FDL0JJLEVBQVUxRCxTQUFTc0QsY0FBYyxPQUNqQ0ssRUFBVTNELFNBQVNzRCxjQUFjLE9BQ2pDTSxFQUFXNUQsU0FBU3NELGNBQWMsT0FDbENPLEVBQWE3RCxTQUFTc0QsY0FBYyxPQUNwQ1EsRUFBWTlELFNBQVNzRCxjQUFjLFVBQ25DUyxFQUFVL0QsU0FBU3NELGNBQWMsVUFDakNVLEVBQVdoRSxTQUFTc0QsY0FBYyxTQUNsQ1csRUFBUWpFLFNBQVNzRCxjQUFjLFNBQy9CWSxFQUFXbEUsU0FBU3NELGNBQWMsT0FDbENhLEVBQVNuRSxTQUFTc0QsY0FBYyxPQUNoQ2MsRUFBVXBFLFNBQVNzRCxjQUFjLE9BQ2pDZSxFQUFXckUsU0FBU3NELGNBQWMsT0EwRHhDLE9BeERBM0QsRUFBTTJFLFlBQWMsR0FBR25CLEVBQU14RCxRQUM3QitELEVBQVFZLFlBQWMsR0FBR25CLEVBQU1PLFVBQy9CQyxFQUFRVyxZQUFjLEdBQUduQixFQUFNUSxVQUMvQk0sRUFBTUssWUFBYyxRQUVwQjNFLEVBQU02RCxVQUFVQyxJQUFJLFNBQ3BCQyxFQUFRRixVQUFVQyxJQUFJLFdBQ3RCRSxFQUFRSCxVQUFVQyxJQUFJLFdBQ3RCSSxFQUFXTCxVQUFVQyxJQUFJLGVBQ3pCUSxFQUFNVCxVQUFVQyxJQUFJLFNBQ3BCTyxFQUFTUixVQUFVQyxJQUFJLFlBQ3ZCRyxFQUFTSixVQUFVQyxJQUFJLEdBQUdOLEVBQU1TLFlBQ2hDQSxFQUFTSixVQUFVQyxJQUFJLFlBQ3ZCUyxFQUFTVixVQUFVQyxJQUFJLFlBQ3ZCSyxFQUFVTixVQUFVQyxJQUFJLFVBQ3hCTSxFQUFRUCxVQUFVQyxJQUFJLFFBQ3RCVSxFQUFPWCxVQUFVQyxJQUFJLFFBQ3JCVyxFQUFRWixVQUFVQyxJQUFJLFFBQ3RCWSxFQUFTYixVQUFVQyxJQUFJLFlBRXZCTyxFQUFTVCxhQUFhLE9BQVEsWUFDOUJTLEVBQVNULGFBQWEsS0FBTSxVQUFVSixFQUFNakYsTUFDNUM4RixFQUFTVCxhQUFhLE9BQVEsVUFDOUJTLEVBQVNULGFBQWEsUUFBUyxPQUMvQlUsRUFBTVYsYUFBYSxNQUFPLFVBQVVKLEVBQU1qRixNQUMxQzRGLEVBQVVQLGFBQWEsY0FBZSxHQUFHSixFQUFNakYsTUFFL0NpRyxFQUFPWixhQUFhLE1BQU8sNkJBQzNCWSxFQUFPWixhQUFhLE1BQU8sZUFDM0JhLEVBQVFiLGFBQWEsTUFBTyxpQ0FDNUJhLEVBQVFiLGFBQWEsTUFBTyxhQUc1QlMsRUFBUzlELGlCQUFpQixTQUFTLEtBQ1IsUUFBbkI4RCxFQUFTM0QsTUFBa0JrRSxFQUFlcEIsRUFBT2EsRUFBVUMsRUFBT0YsRUFBU0ssRUFBU2YsR0FtQ2hHLFNBQXlCRixFQUFPYSxFQUFVQyxFQUFPRixFQUFTSyxFQUFTZixHQUMvRFksRUFBTUssWUFBYyxRQUNwQkwsRUFBTU8sZ0JBQWdCLFNBQ3RCUixFQUFTM0QsTUFBUSxNQUNqQjBELEVBQVFTLGdCQUFnQixZQUN4QkosRUFBUUksZ0JBQWdCLFNBQ3hCckIsRUFBTXNCLE9BQVMsYUFDZnBCLEVBQVVHLFVBQVVrQixPQUFPLFdBQy9CLENBMUNjQyxDQUFnQnhCLEVBQU9hLEVBQVVDLEVBQU9GLEVBQVNLLEVBQVNmLEdBRWhFakYsR0FBMEIsSUFHOUIwRixFQUFVNUQsaUJBQWlCLFNBQVMsSUFpRXhDLFNBQW9CaEMsRUFBSW9DLEdBQ3BCLElBQUlzRSxFQUFVbEgsRUFBVU8sV0FBV0MsR0FDbkMsTUFBTTJCLEVBQWNHLFNBQVNDLGNBQWMsWUFNM0MsSUFKQTNCLEVBQVN3QyxrQkFBa0I4RCxHQUMzQnRHLEVBQVN5QyxjQUFjVCxHQUN2QmxDLElBRU95QixFQUFZZ0Ysa0JBQWtCaEYsRUFBWWlGLFlBQVlqRixFQUFZZ0Ysa0JBRXpFcEYsRUFBY2EsR0FFZHZDLFFBQVFDLElBQUlNLEVBQVNELGFBQ3JCTixRQUFRQyxJQUFJc0MsRUFDaEIsQ0EvRThDeUUsQ0FBVzVCLEVBQU1qRixHQUFJaUYsRUFBTW5FLFdBQ3JFK0UsRUFBUTdELGlCQUFpQixTQUFTLE1Bc0N0QyxTQUFxQnJDLEdBQ2pCLE1BQU1tSCxFQUFXaEYsU0FBU0MsY0FBYyxjQUNsQ2dGLEVBQVNqRixTQUFTQyxjQUFjLFdBRXRDK0UsRUFBU3hCLFVBQVVDLElBQUksYUFDdkJ1QixFQUFTekIsYUFBYSxjQUFlLEdBQUcxRixFQUFLSyxNQUU3QyxJQUFJeUIsRUFBUUssU0FBU2tGLGVBQWUsU0FDaEN2QixFQUFVM0QsU0FBU2tGLGVBQWUsV0FDbENwRCxFQUFPOUIsU0FBU2tGLGVBQWUsUUFDL0J0QixFQUFXNUQsU0FBU2tGLGVBQWUsWUFFdkMsTUFBTUMsRUFBWXRILEVBQUs4QixNQUNqQnlGLEVBQWN2SCxFQUFLOEYsUUFDbkIwQixFQUFXeEgsRUFBSzZGLFFBQ2hCNEIsRUFBZXpILEVBQUsrRixTQUUxQmpFLEVBQU1VLE1BQVE4RSxFQUNkeEIsRUFBUXRELE1BQVErRSxFQUNoQnRELEVBQUt6QixNQUFRZ0YsRUFDYnpCLEVBQVN2RCxNQUFRaUYsRUFHakJMLEVBQU9NLFdBQ1gsQ0E5RDZDQyxDQUFZckMsRUFBSyxJQUVyQyxhQUFqQkEsRUFBTXNCLFNBQ05ULEVBQVNULGFBQWEsVUFBVSxJQUNoQ2dCLEVBQWVwQixFQUFPYSxFQUFVQyxFQUFPRixFQUFTSyxFQUFTZixJQUc3RFMsRUFBVTJCLE9BQU90QixHQUNqQkosRUFBUTBCLE9BQU9yQixHQUNmUCxFQUFXNEIsT0FBT3hCLEVBQU9ELEdBQ3pCRSxFQUFTdUIsT0FBTzNCLEVBQVdDLEdBQzNCTSxFQUFTb0IsT0FBT3ZCLEVBQVVMLEdBQzFCUixFQUFVb0MsT0FBTzdCLEVBQVVqRSxFQUFPK0QsRUFBU0MsRUFBU1UsR0FDcERqQixFQUFRc0MsWUFBWXJDLEdBRWJELENBQ1gsQ0FFQSxTQUFTbUIsRUFBZXBCLEVBQU9hLEVBQVVDLEVBQU9GLEVBQVNLLEVBQVNmLEdBQzlEWSxFQUFNSyxZQUFjLFFBQ3BCTCxFQUFNVixhQUFhLFFBQVMsc0JBQzVCUyxFQUFTM0QsTUFBUSxLQUNqQjBELEVBQVFSLGFBQWEsV0FBWSxJQUNqQ2EsRUFBUWIsYUFBYSxRQUFTLGlCQUM5QkosRUFBTXNCLE9BQVMsV0FDZnBCLEVBQVVHLFVBQVVDLElBQUksV0FDNUIsQ0FzREEsU0FBU2tDLElBRUwsT0FEaUIzRixTQUFTQyxjQUFjLFlBQVlXLGFBQWEsUUFFckUsQ0FFQSxTQUFTbkIsRUFBY3ZCLEdBQ25CLElBQUkwSCxFQUFNRCxJQUNFLGFBQVJDLEVBQW9CQyxJQUNQLGFBQVJELEVBQW9CRSxJQUNaLFlBQVJGLEVBQW1CRyxJQUNuQkgsSUFBUSxHQUFHMUgsS0FBZSxJQUFQQSxHQUFVa0IsRUFBYzRHLG9CQUFvQjlILEVBQzVFLENBRUEsU0FBUzJILElBQ0wsSUFBSUksRUFBTzNILEVBQVNDLGtCQUFrQixHQUFHVyxTQUN6QyxNQUFNZ0gsRUFBY2xHLFNBQVNDLGNBQWMsVUFDckNrRyxFQUFhbkcsU0FBU0MsY0FBYyxZQUNwQ0osRUFBY0csU0FBU0MsY0FBYyxZQUkzQyxHQUhBa0csRUFBVzVDLGFBQWEsaUJBQWtCLEtBQzFDMUQsRUFBWTJELFVBQVU0QyxRQUFRdkcsRUFBWWUsYUFBYSxTQUFVLFlBRTdDLElBQWhCcUYsRUFBSzFGLE9BQ0wyRixFQUFZMUIsZ0JBQWdCLGNBQ3pCLENBR0gsSUFGQTBCLEVBQVkzQyxhQUFhLFNBQVUsSUFFNUIxRCxFQUFZZ0Ysa0JBQWtCaEYsRUFBWWlGLFlBQVlqRixFQUFZZ0Ysa0JBQ3pFOUcsUUFBUUMsSUFBSWlJLEdBQ1pBLEVBQUtoSCxTQUFRcEIsR0FBUXFGLEVBQWVyRixFQUFNZ0MsS0FDMUM5QixRQUFRQyxJQUFJTSxFQUFTRCxZQUN6QixDQUlKLENBRUEsU0FBU3lILElBQ0wsSUFBSUcsRUFBTzNILEVBQVNDLGtCQUFrQixHQUFHVyxTQUN6QyxNQUFNZ0gsRUFBY2xHLFNBQVNDLGNBQWMsVUFDckNrRyxFQUFhbkcsU0FBU0MsY0FBYyxZQUNwQ0osRUFBY0csU0FBU0MsY0FBYyxZQUkzQyxJQUhBa0csRUFBVzVDLGFBQWEsaUJBQWtCLEtBQzFDMUQsRUFBWTJELFVBQVU0QyxRQUFRdkcsRUFBWWUsYUFBYSxTQUFVLFlBRTFEZixFQUFZZ0Ysa0JBQWtCaEYsRUFBWWlGLFlBQVlqRixFQUFZZ0Ysa0JBRXpFLE1BQU13QixFQUFhSixFQUFLOUgsUUFBT04sR0FBUW9FLEVBQVFkLEVBQU90RCxFQUFLNkYsWUFFakMsSUFBdEIyQyxFQUFXOUYsT0FDWDJGLEVBQVkxQixnQkFBZ0IsV0FFNUIwQixFQUFZM0MsYUFBYSxTQUFVLElBRW5DOEMsRUFBV3BILFNBQVFwQixHQUFRcUYsRUFBZXJGLEVBQU1nQyxLQUV4RCxDQUVBLFNBQVNrRyxJQUNMLElBQUlFLEVBQU8zSCxFQUFTQyxrQkFBa0IsR0FBR1csU0FDekMsTUFBTWdILEVBQWNsRyxTQUFTQyxjQUFjLFVBQ3JDa0csRUFBYW5HLFNBQVNDLGNBQWMsWUFDcENKLEVBQWNHLFNBQVNDLGNBQWMsWUFJM0MsSUFIQWtHLEVBQVc1QyxhQUFhLGlCQUFrQixLQUMxQzFELEVBQVkyRCxVQUFVNEMsUUFBUXZHLEVBQVllLGFBQWEsU0FBVSxXQUUxRGYsRUFBWWdGLGtCQUFrQmhGLEVBQVlpRixZQUFZakYsRUFBWWdGLGtCQUV6RSxNQUFNeUIsRUFBY0wsRUFBSzlILFFBQU9OLEdBQVFtRixFQUFXN0IsRUFBT3RELEVBQUs2RixZQUVwQyxJQUF2QjRDLEVBQVkvRixPQUNaMkYsRUFBWTFCLGdCQUFnQixXQUU1QjBCLEVBQVkzQyxhQUFhLFNBQVUsSUFFbkMrQyxFQUFZckgsU0FBUXBCLEdBQVFxRixFQUFlckYsRUFBTWdDLEtBRXpELENBRUEsTUFBTyxDQUFFZ0csZUFBY0MsZUFBY0MsZ0JBQWU3QyxpQkFBZ0J6RCxnQkFBZWtHLFVBQ3RGLEVBOU5rQixHQWdPYnZHLEVBQWdCLE1BNEVsQixTQUFTNEcsRUFBb0I5SCxHQUV6QixNQUFNZ0ksRUFBY2xHLFNBQVNDLGNBQWMsVUFDckNKLEVBQWNHLFNBQVNDLGNBQWMsWUFHM0MsSUFGQUosRUFBWTJELFVBQVU0QyxRQUFRdkcsRUFBWWUsYUFBYSxTQUFVLEdBQUcxQyxLQUU3RDJCLEVBQVlnRixrQkFBa0JoRixFQUFZaUYsWUFBWWpGLEVBQVlnRixrQkFFekUsSUFBSTBCLEVBQWVqSSxFQUFTMkMsd0JBQXdCL0MsR0FFeEIsSUFBeEJxSSxFQUFhaEcsT0FDYjJGLEVBQVkxQixnQkFBZ0IsV0FFNUIwQixFQUFZM0MsYUFBYSxTQUFVLElBQ25DZ0QsRUFBYXRILFNBQVFwQixHQUFRMkIsRUFBVzBELGVBQWVyRixFQUFNZ0MsS0FFckUsQ0FFQSxNQUFPLENBQUVSLGVBN0ZULFNBQVNBLEVBQWVMLEdBQ3BCLE1BQU1tSCxFQUFhbkcsU0FBU0MsY0FBYyxZQUNwQ3VHLEVBQWlCeEcsU0FBU0MsY0FBYyxpQkFDeENvRCxFQUFZckQsU0FBU3NELGNBQWMsT0FFbkMxRCxFQUFlSSxTQUFTc0QsY0FBYyxPQUN0Q21ELEVBQWdCekcsU0FBU3NELGNBQWMsVUFDdkNvRCxFQUFhMUcsU0FBU3NELGNBQWMsT0F3QzFDLE9BdENBRCxFQUFVRyxVQUFVQyxJQUFJLFdBQVd6RSxFQUFRZCxNQUMzQ21GLEVBQVVHLFVBQVVDLElBQUkscUJBQ3hCN0QsRUFBYTRELFVBQVVDLElBQUksaUJBQzNCZ0QsRUFBY2pELFVBQVVDLElBQUksZUFDNUJpRCxFQUFXbEQsVUFBVUMsSUFBSSxjQUV6QkosRUFBVUUsYUFBYSxpQkFBa0IsR0FBR3ZFLEVBQVFkLE1BQ3BEdUksRUFBY2xELGFBQWEsU0FBVSxJQUNyQ21ELEVBQVduRCxhQUFhLE1BQU8sNkJBQy9CbUQsRUFBV25ELGFBQWEsTUFBTyxlQUUvQjNELEVBQWEwRSxZQUFjLEdBQUd0RixFQUFRVyxRQUV0QzBELEVBQVVuRCxpQkFBaUIsU0FBVUMsSUFDakNBLEVBQUV3RyxrQkFFRlIsRUFBVzVDLGFBQWEsaUJBQWtCLEdBQUd2RSxFQUFRZCxNQUNyRDhILEVBQW9CaEgsRUFBUWQsR0FBRyxJQUduQ21GLEVBQVVuRCxpQkFBaUIsYUFBYSxLQUNwQ3VHLEVBQWNqQyxnQkFBZ0IsVUFDOUJuQixFQUFVRSxhQUFhLFFBQVMsMkJBQTJCLElBRS9ERixFQUFVbkQsaUJBQWlCLGNBQWMsS0FDckN1RyxFQUFjbEQsYUFBYSxTQUFVLElBQ3JDRixFQUFVbUIsZ0JBQWdCLFFBQVEsSUFHdENpQyxFQUFjdkcsaUJBQWlCLFNBQVVDLElBQ3JDQSxFQUFFd0csa0JBV1YsU0FBd0JyRyxHQUNwQmhDLEVBQVM0QyxjQUFjWixHQUV2QixJQUFJc0csRUFBa0J0SSxFQUFTQyxrQkFDaEJiLEVBQVVDLFNBQ01RLFFBQU9OLEdBQVFBLEVBQUttQixVQUFZc0IsSUFFL0NyQixTQUFRcEIsSUFDcEIsSUFBSWtCLEVBQVVyQixFQUFVTyxXQUFXSixFQUFLSyxJQUN4Q0ksRUFBU3dDLGtCQUFrQi9CLEVBQVEsSUFHdkMsSUFBSThILEVBQWtCN0csU0FBU0MsY0FBYyxpQkFDN0MsS0FBTzRHLEVBQWdCaEMsa0JBQWtCZ0MsRUFBZ0IvQixZQUFZK0IsRUFBZ0JoQyxrQkFFckYrQixFQUFnQjNILFNBQVFELElBQ2hCQSxFQUFRZCxHQUFLLEdBQUdtQixFQUFlTCxFQUFRLElBRzNDMEIsU0FBU2xCLEVBQVdtRyxRQUFRckYsTUFBZ0JBLEVBQVdkLEVBQVdxRyxlQUNqRXJHLEVBQVdDLGNBQWNhLEdBRTlCbEMsR0FDSixDQWpDUTBJLENBQWU5SCxFQUFRZCxHQUFHLElBRzlCdUksRUFBY2YsWUFBWWdCLEdBQzFCckQsRUFBVW9DLE9BQU83RixFQUFjNkcsR0FDL0JELEVBQWVkLFlBQVlyQyxHQUVwQm1ELENBQ1gsRUE2Q3lCUixzQkFDNUIsRUEvRnFCLEdDeE5oQjFHLEVBQVUsTUFFWixJQUFJSyxFQUNBZ0UsRUFFSixTQUFTb0QsSUFDZXpJLEVBQVNDLGtCQUU3Qm9CLEVBQVFLLFNBQVNrRixlQUFlLFNBQVM3RSxNQUN6Q3NELEVBQVUzRCxTQUFTa0YsZUFBZSxXQUFXN0UsTUFFN0MsSUFBSXFELEVBQVUxRCxTQUFTa0YsZUFBZSxRQUFRN0UsTUFDMUN1RCxFQUFXNUQsU0FBU2tGLGVBQWUsWUFBWTdFLE1BQy9DbkMsRUFnQ1IsV0FDSSxJQUFJK0gsRUFBTzNILEVBQVNDLGtCQUFrQixHQUFHVyxTQUd6QyxPQUFvQixJQUFoQitHLEVBQUsxRixPQUNPLEVBRUEwRixFQUFLQSxFQUFLMUYsT0FBTyxHQUFHckMsR0FBSyxDQUU3QyxDQXpDYThJLEdBQ0wxRyxFQUFZaEMsRUFBU3VDLHFCQU16QixHQUhBOUMsUUFBUUMsSUFBSWdGLEVBQVc3QixFQUFPdUMsS0FDOUIzRixRQUFRQyxJQUFJaUUsRUFBUWQsRUFBT3VDLEtBRWIsS0FBVi9ELEdBQTRCLEtBQVpnRSxHQUE4QixLQUFaRCxFQUFnQixPQUV0RCxNQUFNN0YsRUE1QkssRUFBQ0ssRUFBSXlCLEVBQU9nRSxFQUFTRCxFQUFTRSxFQUFVNUUsRUFBU3lGLEtBQ3pELENBQ0h2RyxLQUFJeUIsUUFBT2dFLFVBQVNELFVBQVNFLFdBQVU1RSxVQUFTeUYsT0FtQm5DLGVBT0F3QyxDQUFXL0ksRUFBSXlCLEVBQU9nRSxFQUFTRCxFQUFTRSxFQUFVdEQsR0FDL0R2QyxRQUFRQyxJQUFJSCxHQUVaMEIsRUFBY2UsRUFBV3pDLEVBQzdCLENBRUEsU0FBUzBCLEVBQWNlLEVBQVd6QyxHQUM5QixNQUFNUSxFQUFjQyxFQUFTQyxrQkFFWCxJQUFkK0IsSUFDQWpDLEVBQVksR0FBR2EsU0FBU3BCLEtBQUtELEdBQzdCRSxRQUFRQyxJQUFJSyxJQUdoQixJQUFLLElBQUk2SSxFQUFJLEVBQUdBLEVBQUk3SSxFQUFZa0MsT0FBUTJHLElBQ2hDN0ksRUFBWTZJLEdBQUdoSixLQUFPb0MsSUFDdEI1QyxFQUFVRSxVQUFVQyxHQUNwQlEsRUFBWTZJLEdBQUdoSSxTQUFTcEIsS0FBS0QsR0FDN0JFLFFBQVFDLElBQUlLLEdBR3hCLENBYUEsU0FBUzhJLElBQ1luSCxTQUFTa0YsZUFBZSxTQUM5QjdFLE1BQVEsR0FDbkJWLEVBQVEsR0FFV0ssU0FBU2tGLGVBQWUsV0FDOUI3RSxNQUFRLEdBQ3JCc0QsRUFBVSxHQUVJM0QsU0FBU2tGLGVBQWUsUUFDOUI3RSxNQUFRLEdBRURMLFNBQVNrRixlQUFlLFlBQzlCN0UsTUFBUSxLQUNyQixDQWtHQSxNQUFPLENBQUUwRyxnQkFBZUssY0FoR3hCLFdBQ3NCcEgsU0FBU0MsY0FBYyxXQUUvQkMsaUJBQWlCLFNBQVVDLEtBZ0N6QyxXQUNJLE1BQU1rSCxFQUFjckgsU0FBU0MsY0FBYyxjQUVyQ3FILEVBQVM1RyxTQUFTMkcsRUFBWXpHLGFBQWEsZ0JBQzNDcUUsRUFBU2pGLFNBQVNDLGNBQWMsV0FRdEMsR0FOSW9ILEVBQVk3RCxVQUFVK0QsU0FBUyxjQUMvQnhKLFFBQVFDLElBQUksUUFqQ3BCLFNBQWtCRSxHQUNkLElBQUlpSCxFQUFZbkYsU0FBU2tGLGVBQWUsU0FBUzdFLE1BQzdDK0UsRUFBY3BGLFNBQVNrRixlQUFlLFdBQVc3RSxNQUNqRGdGLEVBQVdyRixTQUFTa0YsZUFBZSxRQUFRN0UsTUFDM0NpRixFQUFldEYsU0FBU2tGLGVBQWUsWUFBWTdFLE1BRXZELE1BQU1uQixFQUFXWixFQUFTQyxrQkFBa0IsR0FBR1csU0FDekNzSSxFQUFhdEksRUFBU2YsUUFBT04sR0FBUUssSUFBT0wsRUFBS0ssS0FBSSxHQUUzRHNKLEVBQVc3SCxNQUFRd0YsRUFDbkJxQyxFQUFXN0QsUUFBVXlCLEVBQ3JCb0MsRUFBVzlELFFBQVUyQixFQUNyQm1DLEVBQVc1RCxTQUFXMEIsRUFFdEIzRixFQUFRd0YsRUFDUnhCLEVBQVV5QixFQUVWLElBQUssSUFBSThCLEVBQUksRUFBR0EsRUFBSWhJLEVBQVNxQixPQUFRMkcsSUFDN0JoSSxFQUFTZ0ksR0FBR2hKLEtBQU9BLElBQ25CZ0IsRUFBU2dJLEdBQUtNLEVBQ2RsSixFQUFTeUMsY0FBYzdCLEVBQVNnSSxHQUFHbEksU0FDbkNqQixRQUFRQyxJQUFJTSxFQUFTQyxtQkFHakMsQ0FVUWtKLENBQVNILElBQ0xQLElBQ1IzSSxJQUVjLEtBQVZ1QixHQUE0QixLQUFaZ0UsRUFBZ0IsT0FFcEMsSUFBSXJELEVBQ0FwQixFQUFXWixFQUFTQyxrQkFBa0IsR0FBR1csU0FFekNtSSxFQUFZN0QsVUFBVStELFNBQVMsY0FDL0JqSCxFQUFZcEIsRUFBU2YsUUFBT04sR0FBUXlKLElBQVd6SixFQUFLSyxLQUFJLEdBQUdjLFFBQzNEcUksRUFBWTdELFVBQVVrQixPQUFPLGNBRTdCcEUsRUFBWXBCLEVBQVNBLEVBQVNxQixPQUFTLEdBQUd2QixRQUc5Q1EsRUFBV0MsY0FBY2EsR0FDekI2RyxJQUNBbEMsRUFBT3lDLE9BSVgsQ0E3RFFDLEdBQ0F4SCxFQUFFQyxnQkFBZ0IsR0FFMUIsRUF5RnVDd0gsV0E3QnZDLFdBQ0ksTUFBTUMsRUFBWTdILFNBQVNDLGNBQWMsV0FDbkNnRixFQUFTakYsU0FBU0MsY0FBYyxXQUl0QzRILEVBQVUzSCxpQkFBaUIsU0FBVUMsSUFDakNnSCxJQUNBbEMsRUFBT3lDLFFBR1B2SCxFQUFFQyxnQkFBZ0IsR0FFMUIsRUFnQm1EMEgsZ0JBZG5ELFdBQ0ksTUFBTTNCLEVBQWFuRyxTQUFTQyxjQUFjLFlBQ3BDZ0YsRUFBU2pGLFNBQVNDLGNBQWMsV0FHdENrRyxFQUFXakcsaUJBQWlCLFNBQVVDLElBQ2xDN0IsRUFBU21DLGNBQWNOLEdBQ3ZCOEUsRUFBT00sWUFHUHBGLEVBQUVDLGdCQUFnQixHQUUxQixFQUVvRWIsZ0JBQ3ZFLEVBektlLEdDUmhCRCxFQUFROEgsZ0JBQ1I5SCxFQUFRc0ksYUFDUnRJLEVBQVF3SSxrQkFFUnhKLEVBQVN5QixnQkFFVCxNQUFNZ0ksRUFBVy9ILFNBQVNDLGNBQWMsVUFDbEMrSCxFQUFVaEksU0FBU0MsY0FBYyxXQUNqQ2dJLEVBQVdqSSxTQUFTQyxjQUFjLFVBRXhDOEgsRUFBUzdILGlCQUFpQixRQUFRVixFQUFXc0csY0FDN0NrQyxFQUFROUgsaUJBQWlCLFFBQVNWLEVBQVd1RyxlQUM3Q2tDLEVBQVMvSCxpQkFBaUIsUUFBU1YsRUFBV3FHLGNBRTlDN0YsU0FBU0UsaUJBQWlCLG1CQUFvQjlCLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbWFuYWdlTGlzdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvc3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbWFuYWdlUHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvdG9EYXRlLm1qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3RhcnRPZkRheS5tanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2lzVG9kYXkubWpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9pc1NhbWVEYXkubWpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL2RlZmF1bHRPcHRpb25zLm1qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3RhcnRPZldlZWsubWpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9pc1RoaXNXZWVrLm1qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvaXNTYW1lV2Vlay5tanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL1VJLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9tYW5hZ2VUYXNrLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBBZGR0b0xpc3QgPSAoKCkgPT4ge1xuICAgIGxldCBUb2RvTGlzdCA9IFtdO1xuXG4gICAgZnVuY3Rpb24gYWRkVG9MaXN0KHRhc2spIHtcbiAgICAgICAgVG9kb0xpc3QucHVzaCh0YXNrKTtcbiAgICAgICAgY29uc29sZS5sb2coVG9kb0xpc3QpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZVRhc2soaWQpIHtcbiAgICAgICAgcmV0dXJuIFRvZG9MaXN0ID0gVG9kb0xpc3QuZmlsdGVyKHRhc2sgPT4gaWQgIT09IHRhc2suaWQpO1xuICAgIH1cblxuICAgIHJldHVybiB7IGFkZFRvTGlzdCwgVG9kb0xpc3QsIHJlbW92ZVRhc2sgfTtcbn0pKClcblxuXG5leHBvcnQgeyBBZGR0b0xpc3QgfSIsImltcG9ydCB7IHByb2plY3RzIH0gZnJvbSBcIi4vbWFuYWdlUHJvamVjdFwiO1xuaW1wb3J0IHsgcmVuZGVyUHJvamVjdCwgcmVuZGVyVGFzayB9IGZyb20gXCIuL1VJXCI7XG5pbXBvcnQgeyBOZXdUYXNrIH0gZnJvbSBcIi4vbWFuYWdlVGFza1wiO1xuXG5jb25zdCBzdG9yZUxvY2FsID0gKCgpID0+IHtcbiAgICBmdW5jdGlvbiBzdHJpbmdpZnkoaXRlbSkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoaXRlbSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3RvcmVQcm9qZWN0cygpIHtcbiAgICAgICAgY29uc3QgcHJvamVjdExpc3QgPSBwcm9qZWN0cy5ncmFiUHJvamVjdExpc3QoKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3QnLCBzdHJpbmdpZnkocHJvamVjdExpc3QpKTtcbiAgICAgICAgY29uc29sZS5sb2coSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvamVjdCcpKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZFN0b3JhZ2UoKSB7XG4gICAgICAgIGNvbnN0IG5ld0xpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0JykpO1xuXG4gICAgICAgIGxldCBsb2FkZWRQcm9qZWN0cyA9IG5ld0xpc3QuZmlsdGVyKHByb2plY3QgPT4gcHJvamVjdC5pZCAhPT0gMCk7XG4gICAgICAgIGxvYWRlZFByb2plY3RzLmZvckVhY2gocHJvamVjdCA9PiB7XG4gICAgICAgICAgICBwcm9qZWN0LnRhc2tMaXN0ID0gW107XG4gICAgICAgICAgICBwcm9qZWN0cy5hZGRUb1Byb2plY3RMaXN0KHByb2plY3QpO1xuICAgICAgICAgICAgcmVuZGVyUHJvamVjdC5kaXNwbGF5UHJvamVjdChwcm9qZWN0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGdlbkxpc3QgPSBuZXdMaXN0WzBdO1xuXG4gICAgICAgIGdlbkxpc3QudGFza0xpc3QuZm9yRWFjaCh0YXNrID0+IHtcbiAgICAgICAgICAgIE5ld1Rhc2suYWRkVG9UYXNrbGlzdCh0YXNrLnByb2plY3QsIHRhc2spO1xuICAgICAgICAgICAgcmVuZGVyVGFzay51cGRhdGVEaXNwbGF5KHRhc2sucHJvamVjdCk7XG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgIH1cblxuICAgIHJldHVybiB7IHN0b3JlUHJvamVjdHMsXG4gICAgICAgICAgICAgbG9hZFN0b3JhZ2UgfVxufSkoKTtcblxuZXhwb3J0IHtzdG9yZUxvY2FsfSIsImltcG9ydCB7IHJlbmRlclByb2plY3QgfSBmcm9tIFwiLi9VSVwiO1xuaW1wb3J0IHsgQWRkdG9MaXN0IH0gZnJvbSBcIi4vbWFuYWdlTGlzdFwiO1xuaW1wb3J0IHsgc3RvcmVMb2NhbCB9IGZyb20gXCIuL3N0b3JhZ2VcIjtcblxuY29uc3QgbmV3UHJvamVjdCA9ICh0aXRsZSwgdGFza0xpc3QsIGlkKSA9PiB7XG4gICAgcmV0dXJuIHsgdGl0bGUsIHRhc2tMaXN0LCBpZCB9O1xufVxuXG5jb25zdCBwcm9qZWN0cyA9ICgoKSA9PiB7XG4gICAgbGV0IHByb2plY3RUaXRsZVxuICAgIGxldCBwcm9qZWN0TGlzdCA9IFtdO1xuXG4gICAgbGV0IHRhc2tMaXN0ID0gQWRkdG9MaXN0LlRvZG9MaXN0O1xuXG4gICAgY29uc3QgZ2VuZXJhbExpc3QgPSBuZXdQcm9qZWN0KCdHZW5lcmFsJywgdGFza0xpc3QsIDApO1xuICAgIHByb2plY3RMaXN0LnB1c2goZ2VuZXJhbExpc3QpO1xuXG4gICAgbGV0IGN1cnJlbnRQcm9qZWN0ID0gMDtcblxuICAgIGZ1bmN0aW9uIHVwZGF0ZUdlbmVyYWxMaXN0KG5ld0xpc3QpIHtcbiAgICAgICAgZ2VuZXJhbExpc3QudGFza0xpc3QgPSBuZXdMaXN0XG4gICAgICAgIGNvbnNvbGUubG9nKGdlbmVyYWxMaXN0LnRhc2tMaXN0KVxuICAgICAgICByZXR1cm4gZ2VuZXJhbExpc3RcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVQcm9qZWN0KGlkKSB7XG4gICAgICAgIGxldCB1cGRhdGUgPSBnZW5lcmFsTGlzdC50YXNrTGlzdC5maWx0ZXIodGFzayA9PiB0YXNrLnByb2plY3QgPT09IGlkKTtcbiAgICAgICAgY29uc29sZS5sb2codXBkYXRlKVxuICAgICAgICBpZiAoaWQgIT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9qZWN0TGlzdC5maWx0ZXIocHJvamVjdCA9PiBwcm9qZWN0LmlkID09PSBpZClbMF0udGFza0xpc3QgPSB1cGRhdGVcbiAgICAgICAgfSBlbHNlIHJldHVybjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBncmFiQ3VycmVudFByb2plY3RUYXNrcyhpZCkge1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0TGlzdC5maWx0ZXIocHJvamVjdCA9PiBwcm9qZWN0LmlkID09PSBpZClbMF0udGFza0xpc3QpXG4gICAgICAgIHJldHVybiBwcm9qZWN0TGlzdC5maWx0ZXIocHJvamVjdCA9PiBwcm9qZWN0LmlkID09PSBpZClbMF0udGFza0xpc3RcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVQcm9qZWN0KGlkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdiZWZvcmUnLCBwcm9qZWN0TGlzdCk7XG4gICAgICAgIHByb2plY3RMaXN0ID0gcHJvamVjdExpc3QuZmlsdGVyKHByb2plY3QgPT4gcHJvamVjdC5pZCAhPT0gaWQpO1xuICAgICAgICBjb25zb2xlLmxvZygnYWZ0ZXInLCBwcm9qZWN0TGlzdCk7XG4gICAgICAgIHJldHVybiBwcm9qZWN0TGlzdFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdyYWJDdXJyZW50UHJvamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRQcm9qZWN0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdyYWJQcm9qZWN0TGlzdCgpIHtcbiAgICAgICAgcmV0dXJuIHByb2plY3RMaXN0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVByb2plY3QoKSB7XG4gICAgICAgIHByb2plY3RUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0VGl0bGUnKS52YWx1ZTtcbiAgICAgICAgY29uc3QgcHJvamVjdElkID0gY3JlYXRlUHJvamVjdElkKClcbiAgICAgICAgY29uc3QgcHJvamVjdFRhc2tzID0gW107XG5cbiAgICAgICAgaWYgKHByb2plY3RUaXRsZSA9PT0gJycpIHJldHVyblxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3QgPSBuZXdQcm9qZWN0KHByb2plY3RUaXRsZSwgcHJvamVjdFRhc2tzLCBwcm9qZWN0SWQpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocHJvamVjdCk7XG4gICAgICAgICAgICBhZGRUb1Byb2plY3RMaXN0KHByb2plY3QpO1xuICAgICAgICAgICAgc3RvcmVMb2NhbC5zdG9yZVByb2plY3RzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0SWQoKSB7XG4gICAgICAgIGxldCBpZDtcbiAgICAgICAgaWYgKHByb2plY3RMaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGlkID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpZCA9IHByb2plY3RMaXN0W3Byb2plY3RMaXN0Lmxlbmd0aCAtIDFdLmlkICsgMTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZFRvUHJvamVjdExpc3QocHJvamVjdCkge1xuICAgICAgICBwcm9qZWN0TGlzdC5wdXNoKHByb2plY3QpO1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0TGlzdCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICAgIGxldCBwcm9qZWN0VGl0bGVWYWx1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0VGl0bGUnKTtcbiAgICAgICAgcHJvamVjdFRpdGxlVmFsdWUudmFsdWUgPSAnJztcbiAgICAgICAgcHJvamVjdFRpdGxlID0gJyc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3VibWl0UHJvamVjdCgpIHtcbiAgICAgICAgY29uc3QgY3JlYXRlUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjcmVhdGVQcm9qZWN0Jyk7XG5cbiAgICAgICAgY3JlYXRlUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNyZWF0ZVByb2plY3QoKTtcbiAgICAgICAgICAgIGlmIChwcm9qZWN0VGl0bGUgPT09ICcnKSByZXR1cm5cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBwcm9qZWN0ID0gcHJvamVjdExpc3RbcHJvamVjdExpc3QubGVuZ3RoIC0xXTtcblxuICAgICAgICAgICAgICAgIHJlbmRlclByb2plY3QuZGlzcGxheVByb2plY3QocHJvamVjdCk7XG4gICAgICAgICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBncmFiUHJvamVjdElkKGUpIHtcbiAgICAgICAgbGV0IHByb2plY3RJZCA9IHBhcnNlSW50KGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1wcm9qZWN0SWQnKSk7XG5cbiAgICAgICAgY3VycmVudFByb2plY3QgPSBwcm9qZWN0SWQ7XG5cbiAgICAgICAgcmV0dXJuIGN1cnJlbnRQcm9qZWN0O1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Ym1pdFByb2plY3QsXG4gICAgICAgICAgICAgZ3JhYlByb2plY3RJZCxcbiAgICAgICAgICAgICBncmFiQ3VycmVudFByb2plY3QsIFxuICAgICAgICAgICAgIGdyYWJQcm9qZWN0TGlzdCwgXG4gICAgICAgICAgICAgcHJvamVjdExpc3QsIFxuICAgICAgICAgICAgIHVwZGF0ZUdlbmVyYWxMaXN0LFxuICAgICAgICAgICAgIHVwZGF0ZVByb2plY3QsIFxuICAgICAgICAgICAgIGdyYWJDdXJyZW50UHJvamVjdFRhc2tzLCBcbiAgICAgICAgICAgICByZW1vdmVQcm9qZWN0LFxuICAgICAgICAgICAgIGFkZFRvUHJvamVjdExpc3QgfVxufSkoKVxuXG5leHBvcnQgeyBwcm9qZWN0cyB9XG5cbiIsIi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICoqTm90ZSoqOiAqYWxsKiBEYXRlIGFyZ3VtZW50cyBwYXNzZWQgdG8gYW55ICpkYXRlLWZucyogZnVuY3Rpb24gaXMgcHJvY2Vzc2VkIGJ5IGB0b0RhdGVgLlxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICpcbiAqIEBwYXJhbSBhcmd1bWVudCAtIFRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKlxuICogQHJldHVybnMgVGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ2xvbmUgdGhlIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUobmV3IERhdGUoMjAxNCwgMSwgMTEsIDExLCAzMCwgMzApKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCB0aGUgdGltZXN0YW1wIHRvIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUoMTM5MjA5ODQzMDAwMClcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0RhdGUoYXJndW1lbnQpIHtcbiAgY29uc3QgYXJnU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3VtZW50KTtcblxuICAvLyBDbG9uZSB0aGUgZGF0ZVxuICBpZiAoXG4gICAgYXJndW1lbnQgaW5zdGFuY2VvZiBEYXRlIHx8XG4gICAgKHR5cGVvZiBhcmd1bWVudCA9PT0gXCJvYmplY3RcIiAmJiBhcmdTdHIgPT09IFwiW29iamVjdCBEYXRlXVwiKVxuICApIHtcbiAgICAvLyBQcmV2ZW50IHRoZSBkYXRlIHRvIGxvc2UgdGhlIG1pbGxpc2Vjb25kcyB3aGVuIHBhc3NlZCB0byBuZXcgRGF0ZSgpIGluIElFMTBcbiAgICByZXR1cm4gbmV3IGFyZ3VtZW50LmNvbnN0cnVjdG9yKCthcmd1bWVudCk7XG4gIH0gZWxzZSBpZiAoXG4gICAgdHlwZW9mIGFyZ3VtZW50ID09PSBcIm51bWJlclwiIHx8XG4gICAgYXJnU3RyID09PSBcIltvYmplY3QgTnVtYmVyXVwiIHx8XG4gICAgdHlwZW9mIGFyZ3VtZW50ID09PSBcInN0cmluZ1wiIHx8XG4gICAgYXJnU3RyID09PSBcIltvYmplY3QgU3RyaW5nXVwiXG4gICkge1xuICAgIC8vIFRPRE86IENhbiB3ZSBnZXQgcmlkIG9mIGFzP1xuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gVE9ETzogQ2FuIHdlIGdldCByaWQgb2YgYXM/XG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCB0b0RhdGU7XG4iLCJpbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUubWpzXCI7XG5cbi8qKlxuICogQG5hbWUgc3RhcnRPZkRheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBvcmlnaW5hbCBkYXRlXG4gKlxuICogQHJldHVybnMgVGhlIHN0YXJ0IG9mIGEgZGF5XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIGRheSBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZEYXkobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gVHVlIFNlcCAwMiAyMDE0IDAwOjAwOjAwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydE9mRGF5KGRhdGUpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSk7XG4gIF9kYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gX2RhdGU7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgc3RhcnRPZkRheTtcbiIsImltcG9ydCB7IGlzU2FtZURheSB9IGZyb20gXCIuL2lzU2FtZURheS5tanNcIjtcblxuLyoqXG4gKiBAbmFtZSBpc1RvZGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIGRhdGUgdG8gY2hlY2tcbiAqXG4gKiBAcmV0dXJucyBUaGUgZGF0ZSBpcyB0b2RheVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyA2IE9jdG9iZXIgMjAxNCwgaXMgNiBPY3RvYmVyIDE0OjAwOjAwIHRvZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNUb2RheShuZXcgRGF0ZSgyMDE0LCA5LCA2LCAxNCwgMCkpXG4gKiAvLz0+IHRydWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVG9kYXkoZGF0ZSkge1xuICByZXR1cm4gaXNTYW1lRGF5KGRhdGUsIERhdGUubm93KCkpO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGlzVG9kYXk7XG4iLCJpbXBvcnQgeyBzdGFydE9mRGF5IH0gZnJvbSBcIi4vc3RhcnRPZkRheS5tanNcIjtcblxuLyoqXG4gKiBAbmFtZSBpc1NhbWVEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aCk/XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKT9cbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqXG4gKiBAcGFyYW0gZGF0ZUxlZnQgLSBUaGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIGRhdGVSaWdodCAtIFRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuXG4gKiBAcmV0dXJucyBUaGUgZGF0ZXMgYXJlIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIgMDY6MDA6MDAgYW5kIDQgU2VwdGVtYmVyIDE4OjAwOjAwIGluIHRoZSBzYW1lIGRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0LCA2LCAwKSwgbmV3IERhdGUoMjAxNCwgOCwgNCwgMTgsIDApKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciBhbmQgNCBPY3RvYmVyIGluIHRoZSBzYW1lIGRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0KSwgbmV3IERhdGUoMjAxNCwgOSwgNCkpXG4gKiAvLz0+IGZhbHNlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciwgMjAxNCBhbmQgNCBTZXB0ZW1iZXIsIDIwMTUgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQpLCBuZXcgRGF0ZSgyMDE1LCA4LCA0KSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU2FtZURheShkYXRlTGVmdCwgZGF0ZVJpZ2h0KSB7XG4gIGNvbnN0IGRhdGVMZWZ0U3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZGF0ZUxlZnQpO1xuICBjb25zdCBkYXRlUmlnaHRTdGFydE9mRGF5ID0gc3RhcnRPZkRheShkYXRlUmlnaHQpO1xuXG4gIHJldHVybiArZGF0ZUxlZnRTdGFydE9mRGF5ID09PSArZGF0ZVJpZ2h0U3RhcnRPZkRheTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBpc1NhbWVEYXk7XG4iLCJsZXQgZGVmYXVsdE9wdGlvbnMgPSB7fTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRPcHRpb25zKCkge1xuICByZXR1cm4gZGVmYXVsdE9wdGlvbnM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0T3B0aW9ucyhuZXdPcHRpb25zKSB7XG4gIGRlZmF1bHRPcHRpb25zID0gbmV3T3B0aW9ucztcbn1cbiIsImltcG9ydCB7IHRvRGF0ZSB9IGZyb20gXCIuL3RvRGF0ZS5tanNcIjtcbmltcG9ydCB7IGdldERlZmF1bHRPcHRpb25zIH0gZnJvbSBcIi4vX2xpYi9kZWZhdWx0T3B0aW9ucy5tanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIHN0YXJ0T2ZXZWVrfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgc3RhcnRPZldlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvYmplY3Qgd2l0aCBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIHN0YXJ0IG9mIGEgd2Vla1xuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gU3VuIEF1ZyAzMSAyMDE0IDAwOjAwOjAwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRoZSB3ZWVrIHN0YXJ0cyBvbiBNb25kYXksIHRoZSBzdGFydCBvZiB0aGUgd2VlayBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCksIHsgd2Vla1N0YXJ0c09uOiAxIH0pXG4gKiAvLz0+IE1vbiBTZXAgMDEgMjAxNCAwMDowMDowMFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRPZldlZWsoZGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKCk7XG4gIGNvbnN0IHdlZWtTdGFydHNPbiA9XG4gICAgb3B0aW9ucz8ud2Vla1N0YXJ0c09uID8/XG4gICAgb3B0aW9ucz8ubG9jYWxlPy5vcHRpb25zPy53ZWVrU3RhcnRzT24gPz9cbiAgICBkZWZhdWx0T3B0aW9ucy53ZWVrU3RhcnRzT24gPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5sb2NhbGU/Lm9wdGlvbnM/LndlZWtTdGFydHNPbiA/P1xuICAgIDA7XG5cbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSk7XG4gIGNvbnN0IGRheSA9IF9kYXRlLmdldERheSgpO1xuICBjb25zdCBkaWZmID0gKGRheSA8IHdlZWtTdGFydHNPbiA/IDcgOiAwKSArIGRheSAtIHdlZWtTdGFydHNPbjtcblxuICBfZGF0ZS5zZXREYXRlKF9kYXRlLmdldERhdGUoKSAtIGRpZmYpO1xuICBfZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIF9kYXRlO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IHN0YXJ0T2ZXZWVrO1xuIiwiaW1wb3J0IHsgaXNTYW1lV2VlayB9IGZyb20gXCIuL2lzU2FtZVdlZWsubWpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBpc1RoaXNXZWVrfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgaXNUaGlzV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIHNhbWUgd2VlayBhcyB0aGUgY3VycmVudCBkYXRlP1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIGluIHRoZSBzYW1lIHdlZWsgYXMgdGhlIGN1cnJlbnQgZGF0ZT9cbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvYmplY3Qgd2l0aCBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIGRhdGUgaXMgaW4gdGhpcyB3ZWVrXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDI1IFNlcHRlbWJlciAyMDE0LCBpcyAyMSBTZXB0ZW1iZXIgMjAxNCBpbiB0aGlzIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1RoaXNXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIxKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyAyNSBTZXB0ZW1iZXIgMjAxNCBhbmQgd2VlayBzdGFydHMgd2l0aCBNb25kYXlcbiAqIC8vIGlzIDIxIFNlcHRlbWJlciAyMDE0IGluIHRoaXMgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzVGhpc1dlZWsobmV3IERhdGUoMjAxNCwgOCwgMjEpLCB7IHdlZWtTdGFydHNPbjogMSB9KVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUaGlzV2VlayhkYXRlLCBvcHRpb25zKSB7XG4gIHJldHVybiBpc1NhbWVXZWVrKGRhdGUsIERhdGUubm93KCksIG9wdGlvbnMpO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGlzVGhpc1dlZWs7XG4iLCJpbXBvcnQgeyBzdGFydE9mV2VlayB9IGZyb20gXCIuL3N0YXJ0T2ZXZWVrLm1qc1wiO1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgaXNTYW1lV2Vla30gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIGlzU2FtZVdlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKT9cbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqXG4gKiBAcGFyYW0gZGF0ZUxlZnQgLSBUaGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIGRhdGVSaWdodCAtIFRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvYmplY3Qgd2l0aCBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIGRhdGVzIGFyZSBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSAzMSBBdWd1c3QgMjAxNCBhbmQgNCBTZXB0ZW1iZXIgMjAxNCBpbiB0aGUgc2FtZSB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCA3LCAzMSksIG5ldyBEYXRlKDIwMTQsIDgsIDQpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHdlZWsgc3RhcnRzIHdpdGggTW9uZGF5LFxuICogLy8gYXJlIDMxIEF1Z3VzdCAyMDE0IGFuZCA0IFNlcHRlbWJlciAyMDE0IGluIHRoZSBzYW1lIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDcsIDMxKSwgbmV3IERhdGUoMjAxNCwgOCwgNCksIHtcbiAqICAgd2Vla1N0YXJ0c09uOiAxXG4gKiB9KVxuICogLy89PiBmYWxzZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgMSBKYW51YXJ5IDIwMTQgYW5kIDEgSmFudWFyeSAyMDE1IGluIHRoZSBzYW1lIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDAsIDEpLCBuZXcgRGF0ZSgyMDE1LCAwLCAxKSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU2FtZVdlZWsoZGF0ZUxlZnQsIGRhdGVSaWdodCwgb3B0aW9ucykge1xuICBjb25zdCBkYXRlTGVmdFN0YXJ0T2ZXZWVrID0gc3RhcnRPZldlZWsoZGF0ZUxlZnQsIG9wdGlvbnMpO1xuICBjb25zdCBkYXRlUmlnaHRTdGFydE9mV2VlayA9IHN0YXJ0T2ZXZWVrKGRhdGVSaWdodCwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuICtkYXRlTGVmdFN0YXJ0T2ZXZWVrID09PSArZGF0ZVJpZ2h0U3RhcnRPZldlZWs7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgaXNTYW1lV2VlaztcbiIsImltcG9ydCB7IHByb2plY3RzIH0gZnJvbSBcIi4vbWFuYWdlUHJvamVjdFwiO1xuaW1wb3J0IHsgaXNUb2RheSwgdG9EYXRlLCBpc1RoaXNXZWVrIH0gZnJvbSBcImRhdGUtZm5zXCI7XG5pbXBvcnQgeyBBZGR0b0xpc3QgfSBmcm9tIFwiLi9tYW5hZ2VMaXN0XCI7XG5pbXBvcnQgeyBzdG9yZUxvY2FsIH0gZnJvbSBcIi4vc3RvcmFnZVwiO1xuXG5jb25zdCByZW5kZXJUYXNrID0gKCgpID0+IHtcbiAgICBmdW5jdGlvbiBkaXNwbGF5QWxsVGFzayhpdGVtcywgZGlzcGxheSkge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCdkYXRhLXRhc2tJZCcsIGAke2l0ZW1zLmlkfWApXG5cbiAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3Rhc2snKTtcblxuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIGNvbnN0IGR1ZWRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29uc3QgZGV0YWlscyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBzdGF0dXNDb250ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBjb25zdCBlZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICBjb25zdCB0YXNrQnRucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBkZWxJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgY29uc3QgZWRpdEltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICBjb25zdCB0YXNrRnVuYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gYCR7aXRlbXMudGl0bGV9YDtcbiAgICAgICAgZHVlZGF0ZS50ZXh0Q29udGVudCA9IGAke2l0ZW1zLmR1ZWRhdGV9YDtcbiAgICAgICAgZGV0YWlscy50ZXh0Q29udGVudCA9IGAke2l0ZW1zLmRldGFpbHN9YDtcbiAgICAgICAgbGFiZWwudGV4dENvbnRlbnQgPSAnRG9uZT8nO1xuXG4gICAgICAgIHRpdGxlLmNsYXNzTGlzdC5hZGQoJ3RpdGxlJyk7XG4gICAgICAgIGR1ZWRhdGUuY2xhc3NMaXN0LmFkZCgnZHVlZGF0ZScpO1xuICAgICAgICBkZXRhaWxzLmNsYXNzTGlzdC5hZGQoJ2RldGFpbHMnKTtcbiAgICAgICAgc3RhdHVzQ29udC5jbGFzc0xpc3QuYWRkKCdzdGF0dXMtY29udCcpO1xuICAgICAgICBsYWJlbC5jbGFzc0xpc3QuYWRkKCdsYWJlbCcpO1xuICAgICAgICBjaGVja2JveC5jbGFzc0xpc3QuYWRkKCdjaGVja2JveCcpO1xuICAgICAgICBwcmlvcml0eS5jbGFzc0xpc3QuYWRkKGAke2l0ZW1zLnByaW9yaXR5fWApO1xuICAgICAgICBwcmlvcml0eS5jbGFzc0xpc3QuYWRkKCdwcmlvcml0eScpO1xuICAgICAgICB0YXNrQnRucy5jbGFzc0xpc3QuYWRkKCd0YXNrQnRucycpO1xuICAgICAgICBkZWxldGVCdG4uY2xhc3NMaXN0LmFkZCgnZGVsZXRlJyk7XG4gICAgICAgIGVkaXRCdG4uY2xhc3NMaXN0LmFkZCgnZWRpdCcpO1xuICAgICAgICBkZWxJbWcuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgICAgICBlZGl0SW1nLmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICAgICAgdGFza0Z1bmMuY2xhc3NMaXN0LmFkZCgndGFza0Z1bmMnKTtcblxuICAgICAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnY2hlY2tib3gnKTtcbiAgICAgICAgY2hlY2tib3guc2V0QXR0cmlidXRlKCdpZCcsIGBzdGF0dXMtJHtpdGVtcy5pZH1gKTtcbiAgICAgICAgY2hlY2tib3guc2V0QXR0cmlidXRlKCduYW1lJywgJ3N0YXR1cycpO1xuICAgICAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgJ29mZicpO1xuICAgICAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsIGBzdGF0dXMtJHtpdGVtcy5pZH1gKTtcbiAgICAgICAgZGVsZXRlQnRuLnNldEF0dHJpYnV0ZSgnZGF0YS10YXNrSWQnLCBgJHtpdGVtcy5pZH1gKTtcblxuICAgICAgICBkZWxJbWcuc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3RyYXNoLWNhbi1vdXRsaW5lLnN2ZycpO1xuICAgICAgICBkZWxJbWcuc2V0QXR0cmlidXRlKCdhbHQnLCAnZGVsZXRlIGljb24nKTtcbiAgICAgICAgZWRpdEltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvdGV4dC1ib3gtZWRpdC1vdXRsaW5lLnN2ZycpO1xuICAgICAgICBlZGl0SW1nLnNldEF0dHJpYnV0ZSgnYWx0JywgJ2VkaXQgaWNvbicpO1xuXG5cbiAgICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2hlY2tib3gudmFsdWUgPT09ICdvZmYnKSB7aW5pdENoZWNrYm94T24oaXRlbXMsIGNoZWNrYm94LCBsYWJlbCwgZWRpdEJ0biwgZWRpdEltZywgY29udGFpbmVyKX1cbiAgICAgICAgICAgIGVsc2Uge2luaXRDaGVja2JveE9mZihpdGVtcywgY2hlY2tib3gsIGxhYmVsLCBlZGl0QnRuLCBlZGl0SW1nLCBjb250YWluZXIpfTtcbiAgICAgICAgXG4gICAgICAgICAgICBzdG9yZUxvY2FsLnN0b3JlUHJvamVjdHMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gaW5pdERlbEJ0bihpdGVtcy5pZCwgaXRlbXMucHJvamVjdCkpO1xuICAgICAgICBlZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge2luaXRFZGl0QnRuKGl0ZW1zKX0pO1xuXG4gICAgICAgIGlmIChpdGVtcy5zdGF0dXMgPT09ICdmaW5pc2hlZCcpIHtcbiAgICAgICAgICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZSgnY2hlY2tlZCcsJycpO1xuICAgICAgICAgICAgaW5pdENoZWNrYm94T24oaXRlbXMsIGNoZWNrYm94LCBsYWJlbCwgZWRpdEJ0biwgZWRpdEltZywgY29udGFpbmVyKTtcbiAgICAgICAgfTtcblxuICAgICAgICBkZWxldGVCdG4uYXBwZW5kKGRlbEltZyk7XG4gICAgICAgIGVkaXRCdG4uYXBwZW5kKGVkaXRJbWcpO1xuICAgICAgICBzdGF0dXNDb250LmFwcGVuZChsYWJlbCwgY2hlY2tib3gpO1xuICAgICAgICB0YXNrQnRucy5hcHBlbmQoZGVsZXRlQnRuLCBlZGl0QnRuKTtcbiAgICAgICAgdGFza0Z1bmMuYXBwZW5kKHRhc2tCdG5zLCBzdGF0dXNDb250KTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZChwcmlvcml0eSwgdGl0bGUsIGR1ZWRhdGUsIGRldGFpbHMsIHRhc2tGdW5jKTtcbiAgICAgICAgZGlzcGxheS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXG4gICAgICAgIHJldHVybiBkaXNwbGF5O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXRDaGVja2JveE9uKGl0ZW1zLCBjaGVja2JveCwgbGFiZWwsIGVkaXRCdG4sIGVkaXRJbWcsIGNvbnRhaW5lcikge1xuICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9ICdEb25lISc7XG4gICAgICAgIGxhYmVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZm9udC13ZWlnaHQ6IGJvbGQ7Jyk7XG4gICAgICAgIGNoZWNrYm94LnZhbHVlID0gJ29uJztcbiAgICAgICAgZWRpdEJ0bi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJycpO1xuICAgICAgICBlZGl0SW1nLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnb3BhY2l0eTogMC41OycpXG4gICAgICAgIGl0ZW1zLnN0YXR1cyA9ICdmaW5pc2hlZCc7XG4gICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdmaW5pc2hlZCcpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXRDaGVja2JveE9mZihpdGVtcywgY2hlY2tib3gsIGxhYmVsLCBlZGl0QnRuLCBlZGl0SW1nLCBjb250YWluZXIpIHtcbiAgICAgICAgbGFiZWwudGV4dENvbnRlbnQgPSAnRG9uZT8nO1xuICAgICAgICBsYWJlbC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgIGNoZWNrYm94LnZhbHVlID0gJ29mZic7XG4gICAgICAgIGVkaXRCdG4ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICBlZGl0SW1nLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgaXRlbXMuc3RhdHVzID0gJ3VuZmluaXNoZWQnO1xuICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnZmluaXNoZWQnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbml0RWRpdEJ0bih0YXNrKSB7XG4gICAgICAgIGNvbnN0IHRhc2tGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21haW4tZm9ybScpO1xuICAgICAgICBjb25zdCBkaWFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGlhbG9nJyk7XG5cbiAgICAgICAgdGFza0Zvcm0uY2xhc3NMaXN0LmFkZCgnZWRpdC1tb2RlJyk7XG4gICAgICAgIHRhc2tGb3JtLnNldEF0dHJpYnV0ZSgnZGF0YS10YXNrSWQnLCBgJHt0YXNrLmlkfWApO1xuXG4gICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZScpO1xuICAgICAgICBsZXQgZGV0YWlscyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzJyk7XG4gICAgICAgIGxldCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGUnKTtcbiAgICAgICAgbGV0IHByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW9yaXR5Jyk7XG5cbiAgICAgICAgY29uc3QgdGFza1RpdGxlID0gdGFzay50aXRsZTtcbiAgICAgICAgY29uc3QgdGFza0RldGFpbHMgPSB0YXNrLmRldGFpbHM7XG4gICAgICAgIGNvbnN0IHRhc2tEYXRlID0gdGFzay5kdWVkYXRlO1xuICAgICAgICBjb25zdCB0YXNrUHJpb3JpdHkgPSB0YXNrLnByaW9yaXR5O1xuXG4gICAgICAgIHRpdGxlLnZhbHVlID0gdGFza1RpdGxlO1xuICAgICAgICBkZXRhaWxzLnZhbHVlID0gdGFza0RldGFpbHM7XG4gICAgICAgIGRhdGUudmFsdWUgPSB0YXNrRGF0ZTtcbiAgICAgICAgcHJpb3JpdHkudmFsdWUgPSB0YXNrUHJpb3JpdHk7XG5cbiAgICAgICAgLyogdGFza0Zvcm0ucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKTsgKi9cbiAgICAgICAgZGlhbG9nLnNob3dNb2RhbCgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXREZWxCdG4oaWQsIHByb2plY3RJZCkge1xuICAgICAgICBsZXQgQWxsdGFzayA9IEFkZHRvTGlzdC5yZW1vdmVUYXNrKGlkKTtcbiAgICAgICAgY29uc3QgZ2VuZXJhbExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2VuZXJhbCcpO1xuXG4gICAgICAgIHByb2plY3RzLnVwZGF0ZUdlbmVyYWxMaXN0KEFsbHRhc2spO1xuICAgICAgICBwcm9qZWN0cy51cGRhdGVQcm9qZWN0KHByb2plY3RJZCk7XG4gICAgICAgIHN0b3JlTG9jYWwuc3RvcmVQcm9qZWN0cygpO1xuXG4gICAgICAgIHdoaWxlIChnZW5lcmFsTGlzdC5sYXN0RWxlbWVudENoaWxkKSBnZW5lcmFsTGlzdC5yZW1vdmVDaGlsZChnZW5lcmFsTGlzdC5sYXN0RWxlbWVudENoaWxkKTtcbiAgICAgICAgXG4gICAgICAgIHVwZGF0ZURpc3BsYXkocHJvamVjdElkKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0cy5wcm9qZWN0TGlzdCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHByb2plY3RJZClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBncmFiVGFiKCkge1xuICAgICAgICBsZXQgY3VycmVudFRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnZW5lcmFsJykuZ2V0QXR0cmlidXRlKCdjbGFzcycpO1xuICAgICAgICByZXR1cm4gY3VycmVudFRhYjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5KGlkKSB7XG4gICAgICAgIGxldCB0YWIgPSBncmFiVGFiKCk7XG4gICAgICAgIGlmICh0YWIgPT09ICdpbmJveFRhYicpIGRpc3BsYXlJbmJveCgpXG4gICAgICAgIGVsc2UgaWYgKHRhYiA9PT0gJ3RvZGF5VGFiJykgZGlzcGxheURhaWx5KClcbiAgICAgICAgZWxzZSBpZiAodGFiID09PSAnd2Vla1RhYicpIGRpc3BsYXlXZWVrbHkoKVxuICAgICAgICBlbHNlIGlmICh0YWIgPT09IGAke2lkfWAgJiYgaWQgIT09IDApIHJlbmRlclByb2plY3QuZGlzcGxheVByb2plY3RUYXNrcyhpZClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaXNwbGF5SW5ib3goKSB7XG4gICAgICAgIGxldCBsaXN0ID0gcHJvamVjdHMuZ3JhYlByb2plY3RMaXN0KClbMF0udGFza0xpc3Q7XG4gICAgICAgIGNvbnN0IGVtcHR5UGhyYXNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVtcHR5Jyk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmV3VGFzaycpO1xuICAgICAgICBjb25zdCBnZW5lcmFsTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnZW5lcmFsJyk7XG4gICAgICAgIG5ld1Rhc2tCdG4uc2V0QXR0cmlidXRlKCdkYXRhLXByb2plY3RJZCcsICcwJyk7XG4gICAgICAgIGdlbmVyYWxMaXN0LmNsYXNzTGlzdC5yZXBsYWNlKGdlbmVyYWxMaXN0LmdldEF0dHJpYnV0ZSgnY2xhc3MnKSwgJ2luYm94VGFiJyk7XG5cbiAgICAgICAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBlbXB0eVBocmFzZS5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZW1wdHlQaHJhc2Uuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAnJyk7XG5cbiAgICAgICAgICAgIHdoaWxlIChnZW5lcmFsTGlzdC5sYXN0RWxlbWVudENoaWxkKSBnZW5lcmFsTGlzdC5yZW1vdmVDaGlsZChnZW5lcmFsTGlzdC5sYXN0RWxlbWVudENoaWxkKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGxpc3QpXG4gICAgICAgICAgICBsaXN0LmZvckVhY2godGFzayA9PiBkaXNwbGF5QWxsVGFzayh0YXNrLCBnZW5lcmFsTGlzdCkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocHJvamVjdHMucHJvamVjdExpc3QpXG4gICAgICAgIH1cblxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlzcGxheURhaWx5KCkge1xuICAgICAgICBsZXQgbGlzdCA9IHByb2plY3RzLmdyYWJQcm9qZWN0TGlzdCgpWzBdLnRhc2tMaXN0O1xuICAgICAgICBjb25zdCBlbXB0eVBocmFzZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbXB0eScpO1xuICAgICAgICBjb25zdCBuZXdUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ld1Rhc2snKTtcbiAgICAgICAgY29uc3QgZ2VuZXJhbExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2VuZXJhbCcpO1xuICAgICAgICBuZXdUYXNrQnRuLnNldEF0dHJpYnV0ZSgnZGF0YS1wcm9qZWN0SWQnLCAnMCcpO1xuICAgICAgICBnZW5lcmFsTGlzdC5jbGFzc0xpc3QucmVwbGFjZShnZW5lcmFsTGlzdC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyksICd0b2RheVRhYicpO1xuICAgICAgICBcbiAgICAgICAgd2hpbGUgKGdlbmVyYWxMaXN0Lmxhc3RFbGVtZW50Q2hpbGQpIGdlbmVyYWxMaXN0LnJlbW92ZUNoaWxkKGdlbmVyYWxMaXN0Lmxhc3RFbGVtZW50Q2hpbGQpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZGFpbHlUYXNrcyA9IGxpc3QuZmlsdGVyKHRhc2sgPT4gaXNUb2RheSh0b0RhdGUodGFzay5kdWVkYXRlKSkpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGRhaWx5VGFza3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBlbXB0eVBocmFzZS5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZW1wdHlQaHJhc2Uuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAnJyk7XG5cbiAgICAgICAgICAgIGRhaWx5VGFza3MuZm9yRWFjaCh0YXNrID0+IGRpc3BsYXlBbGxUYXNrKHRhc2ssIGdlbmVyYWxMaXN0KSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaXNwbGF5V2Vla2x5KCkge1xuICAgICAgICBsZXQgbGlzdCA9IHByb2plY3RzLmdyYWJQcm9qZWN0TGlzdCgpWzBdLnRhc2tMaXN0O1xuICAgICAgICBjb25zdCBlbXB0eVBocmFzZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbXB0eScpO1xuICAgICAgICBjb25zdCBuZXdUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ld1Rhc2snKTtcbiAgICAgICAgY29uc3QgZ2VuZXJhbExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2VuZXJhbCcpO1xuICAgICAgICBuZXdUYXNrQnRuLnNldEF0dHJpYnV0ZSgnZGF0YS1wcm9qZWN0SWQnLCAnMCcpO1xuICAgICAgICBnZW5lcmFsTGlzdC5jbGFzc0xpc3QucmVwbGFjZShnZW5lcmFsTGlzdC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyksICd3ZWVrVGFiJyk7XG5cbiAgICAgICAgd2hpbGUgKGdlbmVyYWxMaXN0Lmxhc3RFbGVtZW50Q2hpbGQpIGdlbmVyYWxMaXN0LnJlbW92ZUNoaWxkKGdlbmVyYWxMaXN0Lmxhc3RFbGVtZW50Q2hpbGQpO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgd2Vla2x5VGFza3MgPSBsaXN0LmZpbHRlcih0YXNrID0+IGlzVGhpc1dlZWsodG9EYXRlKHRhc2suZHVlZGF0ZSkpKTtcblxuICAgICAgICBpZiAod2Vla2x5VGFza3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBlbXB0eVBocmFzZS5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZW1wdHlQaHJhc2Uuc2V0QXR0cmlidXRlKCdoaWRkZW4nICwnJyk7XG5cbiAgICAgICAgICAgIHdlZWtseVRhc2tzLmZvckVhY2godGFzayA9PiBkaXNwbGF5QWxsVGFzayh0YXNrLCBnZW5lcmFsTGlzdCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgZGlzcGxheUluYm94LCBkaXNwbGF5RGFpbHksIGRpc3BsYXlXZWVrbHksIGRpc3BsYXlBbGxUYXNrLCB1cGRhdGVEaXNwbGF5LCBncmFiVGFiIH1cbn0pKClcblxuY29uc3QgcmVuZGVyUHJvamVjdCA9ICgoKSA9PiB7XG4gICAgZnVuY3Rpb24gZGlzcGxheVByb2plY3QocHJvamVjdCkge1xuICAgICAgICBjb25zdCBuZXdUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ld1Rhc2snKTtcbiAgICAgICAgY29uc3QgcHJvamVjdERpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLXByb2plY3RzJyk7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBwcm9qZWN0RGVsQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGNvbnN0IHByb2pEZWxJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblxuICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChgcHJvamVjdC0ke3Byb2plY3QuaWR9YCk7XG4gICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjb250YWluZXItcHJvamVjdCcpO1xuICAgICAgICBwcm9qZWN0VGl0bGUuY2xhc3NMaXN0LmFkZCgncHJvamVjdC10aXRsZScpO1xuICAgICAgICBwcm9qZWN0RGVsQnRuLmNsYXNzTGlzdC5hZGQoJ2RlbC1wcm9qZWN0Jyk7XG4gICAgICAgIHByb2pEZWxJbWcuY2xhc3NMaXN0LmFkZCgncHJvakRlbEltZycpO1xuXG4gICAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvamVjdElkJywgYCR7cHJvamVjdC5pZH1gKTtcbiAgICAgICAgcHJvamVjdERlbEJ0bi5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICcnKTtcbiAgICAgICAgcHJvakRlbEltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvdHJhc2gtY2FuLW91dGxpbmUuc3ZnJyk7XG4gICAgICAgIHByb2pEZWxJbWcuc2V0QXR0cmlidXRlKCdhbHQnLCAnZGVsZXRlIGljb24nKTtcblxuICAgICAgICBwcm9qZWN0VGl0bGUudGV4dENvbnRlbnQgPSBgJHtwcm9qZWN0LnRpdGxlfWA7XG5cbiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgIG5ld1Rhc2tCdG4uc2V0QXR0cmlidXRlKCdkYXRhLXByb2plY3RJZCcsIGAke3Byb2plY3QuaWR9YCk7XG4gICAgICAgICAgICBkaXNwbGF5UHJvamVjdFRhc2tzKHByb2plY3QuaWQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKCkgPT4ge1xuICAgICAgICAgICAgcHJvamVjdERlbEJ0bi5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnYm9yZGVyOiAycHggc29saWQgYmxhY2s7Jyk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgIHByb2plY3REZWxCdG4uc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAnJyk7XG4gICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBwcm9qZWN0RGVsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBpbml0RGVsUHJvakJ0bihwcm9qZWN0LmlkKTtcbiAgICAgICAgfSlcblxuICAgICAgICBwcm9qZWN0RGVsQnRuLmFwcGVuZENoaWxkKHByb2pEZWxJbWcpO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kKHByb2plY3RUaXRsZSwgcHJvamVjdERlbEJ0bik7XG4gICAgICAgIHByb2plY3REaXNwbGF5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cbiAgICAgICAgcmV0dXJuIHByb2plY3REaXNwbGF5XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdERlbFByb2pCdG4ocHJvamVjdElkKSB7XG4gICAgICAgIHByb2plY3RzLnJlbW92ZVByb2plY3QocHJvamVjdElkKTtcblxuICAgICAgICBsZXQgdXBkYXRlZFByb2plY3RzID0gcHJvamVjdHMuZ3JhYlByb2plY3RMaXN0KCk7XG4gICAgICAgIGxldCB0YXNrTGlzdCA9IEFkZHRvTGlzdC5Ub2RvTGlzdDtcbiAgICAgICAgbGV0IHVwZGF0ZWRUYXNrTGlzdCA9IHRhc2tMaXN0LmZpbHRlcih0YXNrID0+IHRhc2sucHJvamVjdCA9PT0gcHJvamVjdElkKTtcblxuICAgICAgICB1cGRhdGVkVGFza0xpc3QuZm9yRWFjaCh0YXNrID0+IHtcbiAgICAgICAgICAgIGxldCBuZXdMaXN0ID0gQWRkdG9MaXN0LnJlbW92ZVRhc2sodGFzay5pZCk7XG4gICAgICAgICAgICBwcm9qZWN0cy51cGRhdGVHZW5lcmFsTGlzdChuZXdMaXN0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IHByb2plY3RzRGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGwtcHJvamVjdHMnKTtcbiAgICAgICAgd2hpbGUgKHByb2plY3RzRGlzcGxheS5sYXN0RWxlbWVudENoaWxkKSBwcm9qZWN0c0Rpc3BsYXkucmVtb3ZlQ2hpbGQocHJvamVjdHNEaXNwbGF5Lmxhc3RFbGVtZW50Q2hpbGQpO1xuXG4gICAgICAgIHVwZGF0ZWRQcm9qZWN0cy5mb3JFYWNoKHByb2plY3QgPT4ge1xuICAgICAgICAgICAgaWYgKHByb2plY3QuaWQgPiAwKSBkaXNwbGF5UHJvamVjdChwcm9qZWN0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHBhcnNlSW50KHJlbmRlclRhc2suZ3JhYlRhYihwcm9qZWN0SWQpKSA9PT0gcHJvamVjdElkKSByZW5kZXJUYXNrLmRpc3BsYXlJbmJveCgpXG4gICAgICAgIGVsc2UgcmVuZGVyVGFzay51cGRhdGVEaXNwbGF5KHByb2plY3RJZCk7XG5cbiAgICAgICAgc3RvcmVMb2NhbC5zdG9yZVByb2plY3RzKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlzcGxheVByb2plY3RUYXNrcyhpZCkge1xuICAgICAgICAvKiBsZXQgbGlzdCA9IHByb2plY3RzLnByb2plY3RMaXN0OyAqL1xuICAgICAgICBjb25zdCBlbXB0eVBocmFzZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbXB0eScpO1xuICAgICAgICBjb25zdCBnZW5lcmFsTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnZW5lcmFsJyk7XG4gICAgICAgIGdlbmVyYWxMaXN0LmNsYXNzTGlzdC5yZXBsYWNlKGdlbmVyYWxMaXN0LmdldEF0dHJpYnV0ZSgnY2xhc3MnKSwgYCR7aWR9YCk7XG5cbiAgICAgICAgd2hpbGUgKGdlbmVyYWxMaXN0Lmxhc3RFbGVtZW50Q2hpbGQpIGdlbmVyYWxMaXN0LnJlbW92ZUNoaWxkKGdlbmVyYWxMaXN0Lmxhc3RFbGVtZW50Q2hpbGQpO1xuICAgICAgICBcbiAgICAgICAgbGV0IHByb2plY3RUYXNrcyA9IHByb2plY3RzLmdyYWJDdXJyZW50UHJvamVjdFRhc2tzKGlkKTtcblxuICAgICAgICBpZiAocHJvamVjdFRhc2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZW1wdHlQaHJhc2UucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVtcHR5UGhyYXNlLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpO1xuICAgICAgICAgICAgcHJvamVjdFRhc2tzLmZvckVhY2godGFzayA9PiByZW5kZXJUYXNrLmRpc3BsYXlBbGxUYXNrKHRhc2ssIGdlbmVyYWxMaXN0KSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBkaXNwbGF5UHJvamVjdCwgZGlzcGxheVByb2plY3RUYXNrcyB9XG59KSgpXG5cbmV4cG9ydCB7IHJlbmRlclRhc2ssIHJlbmRlclByb2plY3QgfSIsImltcG9ydCB7IEFkZHRvTGlzdCB9IGZyb20gXCIuL21hbmFnZUxpc3RcIjtcbmltcG9ydCB7IHJlbmRlclRhc2sgfSBmcm9tIFwiLi9VSVwiO1xuaW1wb3J0IHsgcHJvamVjdHMgfSBmcm9tIFwiLi9tYW5hZ2VQcm9qZWN0XCI7XG5pbXBvcnQgeyB0b0RhdGUsIGlzVGhpc1dlZWssIGlzVG9kYXkgfSBmcm9tIFwiZGF0ZS1mbnNcIjtcbmltcG9ydCB7IHN0b3JlTG9jYWwgfSBmcm9tIFwiLi9zdG9yYWdlXCI7XG5cblxuY29uc3QgY3JlYXRlVGFzayA9IChpZCwgdGl0bGUsIGRldGFpbHMsIGR1ZWRhdGUsIHByaW9yaXR5LCBwcm9qZWN0LCBzdGF0dXMpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpZCwgdGl0bGUsIGRldGFpbHMsIGR1ZWRhdGUsIHByaW9yaXR5LCBwcm9qZWN0LCBzdGF0dXNcbiAgICB9XG59XG5cbmNvbnN0IE5ld1Rhc2sgPSAoKCkgPT4ge1xuXG4gICAgbGV0IHRpdGxlO1xuICAgIGxldCBkZXRhaWxzO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlTmV3VGFzaygpIHtcbiAgICAgICAgY29uc3QgcHJvamVjdExpc3QgPSBwcm9qZWN0cy5ncmFiUHJvamVjdExpc3QoKTtcblxuICAgICAgICB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZScpLnZhbHVlO1xuICAgICAgICBkZXRhaWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMnKS52YWx1ZTtcblxuICAgICAgICBsZXQgZHVlZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRlJykudmFsdWU7XG4gICAgICAgIGxldCBwcmlvcml0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmlvcml0eScpLnZhbHVlO1xuICAgICAgICBsZXQgaWQgPSBjcmVhdGVJZCgpO1xuICAgICAgICBsZXQgcHJvamVjdElkID0gcHJvamVjdHMuZ3JhYkN1cnJlbnRQcm9qZWN0KCk7XG4gICAgICAgIGxldCBzdGF0dXMgPSAndW5maW5pc2hlZCdcblxuICAgICAgICBjb25zb2xlLmxvZyhpc1RoaXNXZWVrKHRvRGF0ZShkdWVkYXRlKSkpXG4gICAgICAgIGNvbnNvbGUubG9nKGlzVG9kYXkodG9EYXRlKGR1ZWRhdGUpKSlcblxuICAgICAgICBpZiAodGl0bGUgPT09ICcnIHx8IGRldGFpbHMgPT09ICcnIHx8IGR1ZWRhdGUgPT09ICcnKSByZXR1cm5cblxuICAgICAgICBjb25zdCB0YXNrID0gY3JlYXRlVGFzayhpZCwgdGl0bGUsIGRldGFpbHMsIGR1ZWRhdGUsIHByaW9yaXR5LCBwcm9qZWN0SWQsIHN0YXR1cyk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRhc2spO1xuXG4gICAgICAgIGFkZFRvVGFza2xpc3QocHJvamVjdElkLCB0YXNrKTsgICAgICAgXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkVG9UYXNrbGlzdChwcm9qZWN0SWQsIHRhc2spIHtcbiAgICAgICAgY29uc3QgcHJvamVjdExpc3QgPSBwcm9qZWN0cy5ncmFiUHJvamVjdExpc3QoKTtcblxuICAgICAgICBpZiAocHJvamVjdElkID09PSAwKSB7XG4gICAgICAgICAgICBwcm9qZWN0TGlzdFswXS50YXNrTGlzdC5wdXNoKHRhc2spO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocHJvamVjdExpc3QpXG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHByb2plY3RMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocHJvamVjdExpc3RbaV0uaWQgPT09IHByb2plY3RJZCkge1xuICAgICAgICAgICAgICAgIEFkZHRvTGlzdC5hZGRUb0xpc3QodGFzayk7XG4gICAgICAgICAgICAgICAgcHJvamVjdExpc3RbaV0udGFza0xpc3QucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0TGlzdClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUlkKCkge1xuICAgICAgICBsZXQgbGlzdCA9IHByb2plY3RzLmdyYWJQcm9qZWN0TGlzdCgpWzBdLnRhc2tMaXN0O1xuICAgICAgICBsZXQgaWQ7XG5cbiAgICAgICAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gaWQgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGlkID0gbGlzdFtsaXN0Lmxlbmd0aC0xXS5pZCArIDE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgICAgbGV0IHRpdGxlVmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGUnKTtcbiAgICAgICAgdGl0bGVWYWx1ZS52YWx1ZSA9ICcnO1xuICAgICAgICB0aXRsZSA9ICcnO1xuXG4gICAgICAgIGxldCBkZXRhaWxzVmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV0YWlscycpO1xuICAgICAgICBkZXRhaWxzVmFsdWUudmFsdWUgPSAnJztcbiAgICAgICAgZGV0YWlscyA9ICcnO1xuXG4gICAgICAgIGxldCBkdWVkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGUnKTtcbiAgICAgICAgZHVlZGF0ZS52YWx1ZSA9ICcnO1xuXG4gICAgICAgIGxldCBwcmlvcml0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmlvcml0eScpO1xuICAgICAgICBwcmlvcml0eS52YWx1ZSA9ICdMb3cnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXRTdWJtaXRCdG4oKSB7XG4gICAgICAgIGNvbnN0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdWJtaXQnKTtcblxuICAgICAgICBzdWJtaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgc3VibWl0VGFzaygpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZWRpdFRhc2soaWQpIHtcbiAgICAgICAgbGV0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZScpLnZhbHVlO1xuICAgICAgICBsZXQgdGFza0RldGFpbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV0YWlscycpLnZhbHVlO1xuICAgICAgICBsZXQgdGFza0RhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0ZScpLnZhbHVlO1xuICAgICAgICBsZXQgdGFza1ByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW9yaXR5JykudmFsdWU7XG5cbiAgICAgICAgY29uc3QgdGFza0xpc3QgPSBwcm9qZWN0cy5ncmFiUHJvamVjdExpc3QoKVswXS50YXNrTGlzdDtcbiAgICAgICAgY29uc3QgZWRpdGVkVGFzayA9IHRhc2tMaXN0LmZpbHRlcih0YXNrID0+IGlkID09PSB0YXNrLmlkKVswXTtcblxuICAgICAgICBlZGl0ZWRUYXNrLnRpdGxlID0gdGFza1RpdGxlO1xuICAgICAgICBlZGl0ZWRUYXNrLmRldGFpbHMgPSB0YXNrRGV0YWlscztcbiAgICAgICAgZWRpdGVkVGFzay5kdWVkYXRlID0gdGFza0RhdGU7XG4gICAgICAgIGVkaXRlZFRhc2sucHJpb3JpdHkgPSB0YXNrUHJpb3JpdHk7XG5cbiAgICAgICAgdGl0bGUgPSB0YXNrVGl0bGU7XG4gICAgICAgIGRldGFpbHMgPSB0YXNrRGV0YWlscztcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhc2tMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGFza0xpc3RbaV0uaWQgPT09IGlkKSB7XG4gICAgICAgICAgICAgICAgdGFza0xpc3RbaV0gPSBlZGl0ZWRUYXNrO1xuICAgICAgICAgICAgICAgIHByb2plY3RzLnVwZGF0ZVByb2plY3QodGFza0xpc3RbaV0ucHJvamVjdCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocHJvamVjdHMuZ3JhYlByb2plY3RMaXN0KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3VibWl0VGFzaygpIHtcbiAgICAgICAgY29uc3QgbmV3VGFza0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWFpbi1mb3JtJyk7XG4gICAgICAgIC8qIGNvbnN0IG5ld1Rhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmV3VGFzaycpOyAqL1xuICAgICAgICBjb25zdCB0YXNrSWQgPSBwYXJzZUludChuZXdUYXNrRm9ybS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFza0lkJykpO1xuICAgICAgICBjb25zdCBkaWFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGlhbG9nJyk7XG4gICAgICAgIFxuICAgICAgICBpZiAobmV3VGFza0Zvcm0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlZGl0LW1vZGUnKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3dlcmsnKVxuICAgICAgICAgICAgZWRpdFRhc2sodGFza0lkKTtcbiAgICAgICAgfSBlbHNlIHtjcmVhdGVOZXdUYXNrKCl9O1xuICAgICAgICBzdG9yZUxvY2FsLnN0b3JlUHJvamVjdHMoKTtcblxuICAgICAgICBpZiAodGl0bGUgPT09ICcnIHx8IGRldGFpbHMgPT09ICcnKSByZXR1cm5cblxuICAgICAgICBsZXQgcHJvamVjdElkO1xuICAgICAgICBsZXQgdGFza0xpc3QgPSBwcm9qZWN0cy5ncmFiUHJvamVjdExpc3QoKVswXS50YXNrTGlzdFxuXG4gICAgICAgIGlmIChuZXdUYXNrRm9ybS5jbGFzc0xpc3QuY29udGFpbnMoJ2VkaXQtbW9kZScpKSB7XG4gICAgICAgICAgICBwcm9qZWN0SWQgPSB0YXNrTGlzdC5maWx0ZXIodGFzayA9PiB0YXNrSWQgPT09IHRhc2suaWQpWzBdLnByb2plY3Q7XG4gICAgICAgICAgICBuZXdUYXNrRm9ybS5jbGFzc0xpc3QucmVtb3ZlKCdlZGl0LW1vZGUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb2plY3RJZCA9IHRhc2tMaXN0W3Rhc2tMaXN0Lmxlbmd0aCAtIDFdLnByb2plY3Q7IFxuICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgcmVuZGVyVGFzay51cGRhdGVEaXNwbGF5KHByb2plY3RJZCk7XG4gICAgICAgIHJlc2V0KCk7XG4gICAgICAgIGRpYWxvZy5jbG9zZSgpO1xuICAgICAgICAvKiBuZXdUYXNrRm9ybS5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICcnKTtcbiAgICAgICAgbmV3VGFza0J0bi5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpOyAqL1xuICAgICAgICBcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5jZWxUYXNrKCkge1xuICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FuY2VsJyk7XG4gICAgICAgIGNvbnN0IGRpYWxvZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaWFsb2cnKTtcbiAgICAgICAgLyogY29uc3QgbmV3VGFza0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWFpbi1mb3JtJyk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmV3VGFzaycpOyAqL1xuXG4gICAgICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICByZXNldCgpO1xuICAgICAgICAgICAgZGlhbG9nLmNsb3NlKCk7XG4gICAgICAgICAgICAvKiBuZXdUYXNrRm9ybS5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICcnKTtcbiAgICAgICAgICAgIG5ld1Rhc2tCdG4ucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKTsgKi9cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvcGVuVGFza0NyZWF0b3IoKSB7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmV3VGFzaycpO1xuICAgICAgICBjb25zdCBkaWFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGlhbG9nJyk7XG4gICAgICAgIC8qIGNvbnN0IG5ld1Rhc2tGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21haW4tZm9ybScpOyAqL1xuXG4gICAgICAgIG5ld1Rhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgcHJvamVjdHMuZ3JhYlByb2plY3RJZChlKTtcbiAgICAgICAgICAgIGRpYWxvZy5zaG93TW9kYWwoKTtcbiAgICAgICAgICAgIC8qIG5ld1Rhc2tGb3JtLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7ICovXG4gICAgICAgICAgICAvKiBuZXdUYXNrQnRuLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpOyAqL1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiB7IGNyZWF0ZU5ld1Rhc2ssIGluaXRTdWJtaXRCdG4sIGNhbmNlbFRhc2ssIG9wZW5UYXNrQ3JlYXRvciwgYWRkVG9UYXNrbGlzdCB9XG59KSgpO1xuXG5leHBvcnQgeyBOZXdUYXNrIH1cbiIsImltcG9ydCB7IE5ld1Rhc2sgfSBmcm9tIFwiLi9tYW5hZ2VUYXNrLmpzXCI7XG5pbXBvcnQgeyBwcm9qZWN0cyB9IGZyb20gXCIuL21hbmFnZVByb2plY3QuanNcIjtcbmltcG9ydCB7IHJlbmRlclRhc2sgfSBmcm9tIFwiLi9VSS5qc1wiO1xuaW1wb3J0IHsgc3RvcmVMb2NhbCB9IGZyb20gXCIuL3N0b3JhZ2UuanNcIjtcblxuTmV3VGFzay5pbml0U3VibWl0QnRuKCk7XG5OZXdUYXNrLmNhbmNlbFRhc2soKTtcbk5ld1Rhc2sub3BlblRhc2tDcmVhdG9yKCk7XG5cbnByb2plY3RzLnN1Ym1pdFByb2plY3QoKTtcblxuY29uc3QgdG9kYXlUYWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kYXknKTtcbmNvbnN0IHdlZWtUYWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjd2Vla2x5Jyk7XG5jb25zdCBpbmJveFRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbmJveCcpO1xuXG50b2RheVRhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycscmVuZGVyVGFzay5kaXNwbGF5RGFpbHkpO1xud2Vla1RhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlbmRlclRhc2suZGlzcGxheVdlZWtseSk7XG5pbmJveFRhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlbmRlclRhc2suZGlzcGxheUluYm94KTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHN0b3JlTG9jYWwubG9hZFN0b3JhZ2UpOyJdLCJuYW1lcyI6WyJBZGR0b0xpc3QiLCJUb2RvTGlzdCIsImFkZFRvTGlzdCIsInRhc2siLCJwdXNoIiwiY29uc29sZSIsImxvZyIsInJlbW92ZVRhc2siLCJpZCIsImZpbHRlciIsInN0b3JlTG9jYWwiLCJwcm9qZWN0TGlzdCIsInByb2plY3RzIiwiZ3JhYlByb2plY3RMaXN0IiwiaXRlbSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwicGFyc2UiLCJnZXRJdGVtIiwibmV3TGlzdCIsInByb2plY3QiLCJmb3JFYWNoIiwidGFza0xpc3QiLCJhZGRUb1Byb2plY3RMaXN0IiwicmVuZGVyUHJvamVjdCIsImRpc3BsYXlQcm9qZWN0IiwiTmV3VGFzayIsImFkZFRvVGFza2xpc3QiLCJyZW5kZXJUYXNrIiwidXBkYXRlRGlzcGxheSIsIm5ld1Byb2plY3QiLCJ0aXRsZSIsInByb2plY3RUaXRsZSIsImdlbmVyYWxMaXN0IiwiY3VycmVudFByb2plY3QiLCJzdWJtaXRQcm9qZWN0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInZhbHVlIiwicHJvamVjdElkIiwibGVuZ3RoIiwiY3JlYXRlUHJvamVjdCIsImdyYWJQcm9qZWN0SWQiLCJwYXJzZUludCIsInRhcmdldCIsImdldEF0dHJpYnV0ZSIsImdyYWJDdXJyZW50UHJvamVjdCIsInVwZGF0ZUdlbmVyYWxMaXN0IiwidXBkYXRlUHJvamVjdCIsInVwZGF0ZSIsImdyYWJDdXJyZW50UHJvamVjdFRhc2tzIiwicmVtb3ZlUHJvamVjdCIsInRvRGF0ZSIsImFyZ3VtZW50IiwiYXJnU3RyIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwiRGF0ZSIsImNvbnN0cnVjdG9yIiwiTmFOIiwic3RhcnRPZkRheSIsImRhdGUiLCJfZGF0ZSIsInNldEhvdXJzIiwiaXNUb2RheSIsImRhdGVMZWZ0IiwiZGF0ZVJpZ2h0Iiwibm93IiwiZGVmYXVsdE9wdGlvbnMiLCJnZXREZWZhdWx0T3B0aW9ucyIsInN0YXJ0T2ZXZWVrIiwib3B0aW9ucyIsIndlZWtTdGFydHNPbiIsImxvY2FsZSIsImRheSIsImdldERheSIsImRpZmYiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImlzVGhpc1dlZWsiLCJpc1NhbWVXZWVrIiwiZGlzcGxheUFsbFRhc2siLCJpdGVtcyIsImRpc3BsYXkiLCJjb250YWluZXIiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiY2xhc3NMaXN0IiwiYWRkIiwiZHVlZGF0ZSIsImRldGFpbHMiLCJwcmlvcml0eSIsInN0YXR1c0NvbnQiLCJkZWxldGVCdG4iLCJlZGl0QnRuIiwiY2hlY2tib3giLCJsYWJlbCIsInRhc2tCdG5zIiwiZGVsSW1nIiwiZWRpdEltZyIsInRhc2tGdW5jIiwidGV4dENvbnRlbnQiLCJpbml0Q2hlY2tib3hPbiIsInJlbW92ZUF0dHJpYnV0ZSIsInN0YXR1cyIsInJlbW92ZSIsImluaXRDaGVja2JveE9mZiIsIkFsbHRhc2siLCJsYXN0RWxlbWVudENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJpbml0RGVsQnRuIiwidGFza0Zvcm0iLCJkaWFsb2ciLCJnZXRFbGVtZW50QnlJZCIsInRhc2tUaXRsZSIsInRhc2tEZXRhaWxzIiwidGFza0RhdGUiLCJ0YXNrUHJpb3JpdHkiLCJzaG93TW9kYWwiLCJpbml0RWRpdEJ0biIsImFwcGVuZCIsImFwcGVuZENoaWxkIiwiZ3JhYlRhYiIsInRhYiIsImRpc3BsYXlJbmJveCIsImRpc3BsYXlEYWlseSIsImRpc3BsYXlXZWVrbHkiLCJkaXNwbGF5UHJvamVjdFRhc2tzIiwibGlzdCIsImVtcHR5UGhyYXNlIiwibmV3VGFza0J0biIsInJlcGxhY2UiLCJkYWlseVRhc2tzIiwid2Vla2x5VGFza3MiLCJwcm9qZWN0VGFza3MiLCJwcm9qZWN0RGlzcGxheSIsInByb2plY3REZWxCdG4iLCJwcm9qRGVsSW1nIiwic3RvcFByb3BhZ2F0aW9uIiwidXBkYXRlZFByb2plY3RzIiwicHJvamVjdHNEaXNwbGF5IiwiaW5pdERlbFByb2pCdG4iLCJjcmVhdGVOZXdUYXNrIiwiY3JlYXRlSWQiLCJjcmVhdGVUYXNrIiwiaSIsInJlc2V0IiwiaW5pdFN1Ym1pdEJ0biIsIm5ld1Rhc2tGb3JtIiwidGFza0lkIiwiY29udGFpbnMiLCJlZGl0ZWRUYXNrIiwiZWRpdFRhc2siLCJjbG9zZSIsInN1Ym1pdFRhc2siLCJjYW5jZWxUYXNrIiwiY2FuY2VsQnRuIiwib3BlblRhc2tDcmVhdG9yIiwidG9kYXlUYWIiLCJ3ZWVrVGFiIiwiaW5ib3hUYWIiXSwic291cmNlUm9vdCI6IiJ9