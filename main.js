(()=>{"use strict";const e=(()=>{let e=[];return{addToList:function(t){e.push(t),console.log(e)},TodoList:e,removeTask:function(t){return e=e.filter((e=>t!==e.id))}}})(),t=(e,t,n)=>({title:e,taskList:t,id:n}),n=(()=>{let n,o=[],r=e.TodoList;const c=t("General",r,0);o.push(c);let i=0;return{submitProject:function(){document.querySelector("#createProject").addEventListener("click",(e=>{e.preventDefault(),function(){n=document.querySelector("#projectTitle").value;const e=0===o.length?0:o[o.length-1].id+1;if(""!==n){const r=t(n,[],e);console.log(r),function(e){o.push(e),console.log(o)}(r)}}(),""!==n&&(u.displayProject(),document.querySelector("#projectTitle").value="",n="")}))},grabProjectId:function(e){let t=parseInt(e.target.getAttribute("data-projectId"));return i=t,i},grabCurrentProject:function(){return i},grabProjectList:function(){return o},projectList:o,updateGeneralList:function(e){return c.taskList=e,console.log(c.taskList),c},updateProjectList:function(e){let t=c.taskList.filter((t=>t.project===e));return console.log(t),0!==e?o.filter((t=>t.id===e))[0].taskList=t:void 0},grabCurrentProjectTasks:function(e){return console.log(o.filter((t=>t.id===e))[0].taskList),o.filter((t=>t.id===e))[0].taskList}}})();function o(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function r(e){const t=o(e);return t.setHours(0,0,0,0),t}function c(e){return t=e,n=Date.now(),+r(t)==+r(n);var t,n}let i={};function l(){return i}function s(e,t){const n=l(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,c=o(e),i=c.getDay(),s=(i<r?7:0)+i-r;return c.setDate(c.getDate()-s),c.setHours(0,0,0,0),c}function a(e,t){return function(e,t,n){return+s(e,n)==+s(t,n)}(e,Date.now(),t)}const d=(()=>{function t(t,o){const c=document.createElement("div");c.setAttribute("data-taskId",`${t.id}`),c.classList.add("task");const s=document.createElement("div"),a=document.createElement("div"),d=document.createElement("div"),m=document.createElement("div"),p=document.createElement("button");return s.textContent=`Title: ${t.title}`,a.textContent=`Due Date: ${t.duedate}`,d.textContent=`Description: ${t.description}`,m.textContent=`Priority: ${t.priority}`,p.textContent="delete",p.setAttribute("data-taskId",`${t.id}`),p.addEventListener("click",(()=>function(t,o){let c=e.removeTask(t);const s=document.querySelector("#general");for(n.updateGeneralList(c),n.updateProjectList(o);s.lastElementChild;)s.removeChild(s.lastElementChild);(function(e){let t=document.querySelector("#general").getAttribute("class");"inboxTab"===t?r():"todayTab"===t?i():"weekTab"===t?l():t===`project-${e}`&&0!==e&&u.displayProjectTasks(e)})(o),console.log(n.projectList),console.log(o)}(t.id,t.project))),c.append(s,a,d,m,p),o.appendChild(c),o}function r(){let e=n.projectList[0].taskList;const o=document.querySelector("#general");for(o.classList.replace(o.getAttribute("class"),"inboxTab");o.lastElementChild;)o.removeChild(o.lastElementChild);e.forEach((e=>t(e,o))),console.log(e)}function i(){let e=n.projectList[0].taskList;const r=document.querySelector("#general");for(r.classList.replace(r.getAttribute("class"),"todayTab");r.lastElementChild;)r.removeChild(r.lastElementChild);e.filter((e=>c(o(e.duedate)))).forEach((e=>t(e,r)))}function l(){let e=n.projectList[0].taskList;const r=document.querySelector("#general");for(r.classList.replace(r.getAttribute("class"),"weekTab");r.lastElementChild;)r.removeChild(r.lastElementChild);e.filter((e=>a(o(e.duedate)))).forEach((e=>t(e,r)))}return{displayNewInput:function(){let e=n.projectList[0].taskList;t(e[e.length-1],document.querySelector("#general"))},displayInbox:r,displayDaily:i,displayWeekly:l,displayAllTask:t}})(),u=(()=>{function e(e){n.projectList;const t=document.querySelector("#general");for(t.classList.replace(t.getAttribute("class"),`project-${e}`);t.lastElementChild;)t.removeChild(t.lastElementChild);let o=n.grabCurrentProjectTasks(e);console.log(o),console.log(e),o.forEach((e=>d.displayAllTask(e,t)))}return{displayProject:function(){let t=n.projectList,o=t[t.length-1];const r=document.querySelector(".all-projects"),c=document.createElement("div"),i=document.createElement("div"),l=document.createElement("button");return c.classList.add(`project-${o.id}`),c.setAttribute("data-projectId",`${o.id}`),l.setAttribute("data-projectId",`${o.id}`),l.setAttribute("id",`project-${o.id}`),i.textContent=`${o.title}`,l.textContent="+",c.addEventListener("click",(t=>{t.stopPropagation(),e(o.id)})),l.addEventListener("click",(e=>{e.stopPropagation(),console.log("project id",n.grabProjectId(e));const t=document.querySelector("#main-form");n.grabProjectId(e),t.removeAttribute("hidden"),e.preventDefault()})),c.append(i,l),r.appendChild(c),r},displayProjectTasks:e}})(),m=(()=>{let t,r;function i(){const i=n.grabProjectList();t=document.getElementById("title").value,r=document.getElementById("description").value;let l=document.getElementById("date").value,s=document.getElementById("priority").value,d=function(){let e=n.projectList[0].taskList;return 0===e.length?0:e[e.length-1].id+1}(),u=n.grabCurrentProject();if(console.log(a(o(l))),console.log(c(o(l))),""!==t&&""!==r&&""!==l){const n=((e,t,n,o,r,c)=>({id:e,title:t,description:n,duedate:o,priority:r,project:c}))(d,t,r,l,s,u);console.log(n),0===u&&(i[0].taskList.push(n),console.log(i));for(let t=1;t<i.length;t++)i[t].id===u&&(e.addToList(n),i[t].taskList.push(n),console.log(i))}}function l(){document.getElementById("title").value="",t="",document.getElementById("description").value="",r="",document.getElementById("date").value="",document.getElementById("priority").value="Low"}return{createNewTask:i,initSubmitBtn:function(){document.querySelector("#submit").addEventListener("click",(e=>{!function(){const e=document.querySelector("#main-form"),n=document.querySelector("#newTask");i(),""!==t&&""!==r&&(d.displayNewInput(),l(),e.setAttribute("hidden",""),n.removeAttribute("hidden"))}(),e.preventDefault()}))},cancelTask:function(){const e=document.querySelector("#cancel"),t=document.querySelector("#main-form"),n=document.querySelector("#newTask");e.addEventListener("click",(e=>{l(),t.setAttribute("hidden",""),n.removeAttribute("hidden"),e.preventDefault()}))},openTaskCreator:function(){const e=document.querySelector("#newTask"),t=document.querySelector("#main-form");e.addEventListener("click",(o=>{n.grabProjectId(o),t.removeAttribute("hidden"),e.setAttribute("hidden",""),o.preventDefault()}))}}})();m.initSubmitBtn(),m.cancelTask(),m.openTaskCreator(),n.submitProject();const p=document.querySelector("#today"),f=document.querySelector("#weekly"),g=document.querySelector("#inbox");p.addEventListener("click",d.displayDaily),f.addEventListener("click",d.displayWeekly),g.addEventListener("click",d.displayInbox)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzdDK0IsRUFBUXZHLGlCQUFpQixRQUFTcUQsRUFBV29CLGVBQzdDK0IsRUFBU3hHLGlCQUFpQixRQUFTcUQsRUFBV2tCLGEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbWFuYWdlTGlzdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbWFuYWdlUHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvdG9EYXRlLm1qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3RhcnRPZkRheS5tanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2lzVG9kYXkubWpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9pc1NhbWVEYXkubWpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL2RlZmF1bHRPcHRpb25zLm1qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3RhcnRPZldlZWsubWpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9pc1RoaXNXZWVrLm1qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvaXNTYW1lV2Vlay5tanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL1VJLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9tYW5hZ2VUYXNrLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBBZGR0b0xpc3QgPSAoKCkgPT4ge1xuICAgIGxldCBUb2RvTGlzdCA9IFtdO1xuXG4gICAgZnVuY3Rpb24gYWRkVG9MaXN0KHRhc2spIHtcbiAgICAgICAgVG9kb0xpc3QucHVzaCh0YXNrKTtcbiAgICAgICAgY29uc29sZS5sb2coVG9kb0xpc3QpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZVRhc2soaWQpIHtcbiAgICAgICAgcmV0dXJuIFRvZG9MaXN0ID0gVG9kb0xpc3QuZmlsdGVyKHRhc2sgPT4gaWQgIT09IHRhc2suaWQpO1xuICAgIH1cblxuICAgIHJldHVybiB7IGFkZFRvTGlzdCwgVG9kb0xpc3QsIHJlbW92ZVRhc2sgfTtcbn0pKClcblxuXG5leHBvcnQgeyBBZGR0b0xpc3QgfSIsImltcG9ydCB7IHJlbmRlclByb2plY3QgfSBmcm9tIFwiLi9VSVwiO1xuaW1wb3J0IHsgQWRkdG9MaXN0IH0gZnJvbSBcIi4vbWFuYWdlTGlzdFwiO1xuaW1wb3J0IHsgTmV3VGFzayB9IGZyb20gXCIuL21hbmFnZVRhc2tcIjtcblxuY29uc3QgbmV3UHJvamVjdCA9ICh0aXRsZSwgdGFza0xpc3QsIGlkKSA9PiB7XG4gICAgcmV0dXJuIHsgdGl0bGUsIHRhc2tMaXN0LCBpZCB9O1xufVxuXG5jb25zdCBwcm9qZWN0cyA9ICgoKSA9PiB7XG4gICAgbGV0IHByb2plY3RUaXRsZVxuICAgIGxldCBwcm9qZWN0TGlzdCA9IFtdO1xuXG4gICAgbGV0IHRhc2tMaXN0ID0gQWRkdG9MaXN0LlRvZG9MaXN0O1xuXG4gICAgY29uc3QgZ2VuZXJhbExpc3QgPSBuZXdQcm9qZWN0KCdHZW5lcmFsJywgdGFza0xpc3QsIDApO1xuICAgIHByb2plY3RMaXN0LnB1c2goZ2VuZXJhbExpc3QpO1xuXG4gICAgbGV0IGN1cnJlbnRQcm9qZWN0ID0gMDtcblxuICAgIGZ1bmN0aW9uIHVwZGF0ZUdlbmVyYWxMaXN0KG5ld0xpc3QpIHtcbiAgICAgICAgZ2VuZXJhbExpc3QudGFza0xpc3QgPSBuZXdMaXN0XG4gICAgICAgIGNvbnNvbGUubG9nKGdlbmVyYWxMaXN0LnRhc2tMaXN0KVxuICAgICAgICByZXR1cm4gZ2VuZXJhbExpc3RcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVQcm9qZWN0TGlzdChpZCkge1xuICAgICAgICBsZXQgdXBkYXRlID0gZ2VuZXJhbExpc3QudGFza0xpc3QuZmlsdGVyKHRhc2sgPT4gdGFzay5wcm9qZWN0ID09PSBpZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHVwZGF0ZSlcbiAgICAgICAgaWYgKGlkICE9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvamVjdExpc3QuZmlsdGVyKHByb2plY3QgPT4gcHJvamVjdC5pZCA9PT0gaWQpWzBdLnRhc2tMaXN0ID0gdXBkYXRlXG4gICAgICAgIH0gZWxzZSByZXR1cm47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ3JhYkN1cnJlbnRQcm9qZWN0VGFza3MoaWQpIHtcbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdExpc3QuZmlsdGVyKHByb2plY3QgPT4gcHJvamVjdC5pZCA9PT0gaWQpWzBdLnRhc2tMaXN0KVxuICAgICAgICByZXR1cm4gcHJvamVjdExpc3QuZmlsdGVyKHByb2plY3QgPT4gcHJvamVjdC5pZCA9PT0gaWQpWzBdLnRhc2tMaXN0XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ3JhYkN1cnJlbnRQcm9qZWN0KCkge1xuICAgICAgICByZXR1cm4gY3VycmVudFByb2plY3Q7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ3JhYlByb2plY3RMaXN0KCkge1xuICAgICAgICByZXR1cm4gcHJvamVjdExpc3Q7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlUHJvamVjdCgpIHtcbiAgICAgICAgcHJvamVjdFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3RUaXRsZScpLnZhbHVlO1xuICAgICAgICBjb25zdCBwcm9qZWN0SWQgPSBjcmVhdGVQcm9qZWN0SWQoKVxuICAgICAgICBjb25zdCBwcm9qZWN0VGFza3MgPSBbXTtcblxuICAgICAgICBpZiAocHJvamVjdFRpdGxlID09PSAnJykgcmV0dXJuXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdCA9IG5ld1Byb2plY3QocHJvamVjdFRpdGxlLCBwcm9qZWN0VGFza3MsIHByb2plY3RJZCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0KTtcbiAgICAgICAgICAgIGFkZFRvUHJvamVjdExpc3QocHJvamVjdCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0SWQoKSB7XG4gICAgICAgIGxldCBpZDtcbiAgICAgICAgaWYgKHByb2plY3RMaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGlkID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpZCA9IHByb2plY3RMaXN0W3Byb2plY3RMaXN0Lmxlbmd0aCAtIDFdLmlkICsgMTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZFRvUHJvamVjdExpc3QocHJvamVjdCkge1xuICAgICAgICBwcm9qZWN0TGlzdC5wdXNoKHByb2plY3QpO1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0TGlzdCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICAgIGxldCBwcm9qZWN0VGl0bGVWYWx1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0VGl0bGUnKTtcbiAgICAgICAgcHJvamVjdFRpdGxlVmFsdWUudmFsdWUgPSAnJztcbiAgICAgICAgcHJvamVjdFRpdGxlID0gJyc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3VibWl0UHJvamVjdCgpIHtcbiAgICAgICAgY29uc3QgY3JlYXRlUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjcmVhdGVQcm9qZWN0Jyk7XG5cbiAgICAgICAgY3JlYXRlUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNyZWF0ZVByb2plY3QoKTtcbiAgICAgICAgICAgIGlmIChwcm9qZWN0VGl0bGUgPT09ICcnKSByZXR1cm5cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlbmRlclByb2plY3QuZGlzcGxheVByb2plY3QoKTtcbiAgICAgICAgICAgICAgICByZXNldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdyYWJQcm9qZWN0SWQoZSkge1xuICAgICAgICBsZXQgcHJvamVjdElkID0gcGFyc2VJbnQoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXByb2plY3RJZCcpKTtcblxuICAgICAgICBjdXJyZW50UHJvamVjdCA9IHByb2plY3RJZDtcblxuICAgICAgICByZXR1cm4gY3VycmVudFByb2plY3Q7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VibWl0UHJvamVjdCwgZ3JhYlByb2plY3RJZCwgZ3JhYkN1cnJlbnRQcm9qZWN0LCBncmFiUHJvamVjdExpc3QsIHByb2plY3RMaXN0LCB1cGRhdGVHZW5lcmFsTGlzdCx1cGRhdGVQcm9qZWN0TGlzdCwgZ3JhYkN1cnJlbnRQcm9qZWN0VGFza3MgfVxufSkoKVxuXG5leHBvcnQgeyBwcm9qZWN0cyB9XG5cbiIsIi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICoqTm90ZSoqOiAqYWxsKiBEYXRlIGFyZ3VtZW50cyBwYXNzZWQgdG8gYW55ICpkYXRlLWZucyogZnVuY3Rpb24gaXMgcHJvY2Vzc2VkIGJ5IGB0b0RhdGVgLlxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICpcbiAqIEBwYXJhbSBhcmd1bWVudCAtIFRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKlxuICogQHJldHVybnMgVGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ2xvbmUgdGhlIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUobmV3IERhdGUoMjAxNCwgMSwgMTEsIDExLCAzMCwgMzApKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCB0aGUgdGltZXN0YW1wIHRvIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUoMTM5MjA5ODQzMDAwMClcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0RhdGUoYXJndW1lbnQpIHtcbiAgY29uc3QgYXJnU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3VtZW50KTtcblxuICAvLyBDbG9uZSB0aGUgZGF0ZVxuICBpZiAoXG4gICAgYXJndW1lbnQgaW5zdGFuY2VvZiBEYXRlIHx8XG4gICAgKHR5cGVvZiBhcmd1bWVudCA9PT0gXCJvYmplY3RcIiAmJiBhcmdTdHIgPT09IFwiW29iamVjdCBEYXRlXVwiKVxuICApIHtcbiAgICAvLyBQcmV2ZW50IHRoZSBkYXRlIHRvIGxvc2UgdGhlIG1pbGxpc2Vjb25kcyB3aGVuIHBhc3NlZCB0byBuZXcgRGF0ZSgpIGluIElFMTBcbiAgICByZXR1cm4gbmV3IGFyZ3VtZW50LmNvbnN0cnVjdG9yKCthcmd1bWVudCk7XG4gIH0gZWxzZSBpZiAoXG4gICAgdHlwZW9mIGFyZ3VtZW50ID09PSBcIm51bWJlclwiIHx8XG4gICAgYXJnU3RyID09PSBcIltvYmplY3QgTnVtYmVyXVwiIHx8XG4gICAgdHlwZW9mIGFyZ3VtZW50ID09PSBcInN0cmluZ1wiIHx8XG4gICAgYXJnU3RyID09PSBcIltvYmplY3QgU3RyaW5nXVwiXG4gICkge1xuICAgIC8vIFRPRE86IENhbiB3ZSBnZXQgcmlkIG9mIGFzP1xuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gVE9ETzogQ2FuIHdlIGdldCByaWQgb2YgYXM/XG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCB0b0RhdGU7XG4iLCJpbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUubWpzXCI7XG5cbi8qKlxuICogQG5hbWUgc3RhcnRPZkRheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBvcmlnaW5hbCBkYXRlXG4gKlxuICogQHJldHVybnMgVGhlIHN0YXJ0IG9mIGEgZGF5XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIGRheSBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZEYXkobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gVHVlIFNlcCAwMiAyMDE0IDAwOjAwOjAwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydE9mRGF5KGRhdGUpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSk7XG4gIF9kYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gX2RhdGU7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgc3RhcnRPZkRheTtcbiIsImltcG9ydCB7IGlzU2FtZURheSB9IGZyb20gXCIuL2lzU2FtZURheS5tanNcIjtcblxuLyoqXG4gKiBAbmFtZSBpc1RvZGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIGRhdGUgdG8gY2hlY2tcbiAqXG4gKiBAcmV0dXJucyBUaGUgZGF0ZSBpcyB0b2RheVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyA2IE9jdG9iZXIgMjAxNCwgaXMgNiBPY3RvYmVyIDE0OjAwOjAwIHRvZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNUb2RheShuZXcgRGF0ZSgyMDE0LCA5LCA2LCAxNCwgMCkpXG4gKiAvLz0+IHRydWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVG9kYXkoZGF0ZSkge1xuICByZXR1cm4gaXNTYW1lRGF5KGRhdGUsIERhdGUubm93KCkpO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGlzVG9kYXk7XG4iLCJpbXBvcnQgeyBzdGFydE9mRGF5IH0gZnJvbSBcIi4vc3RhcnRPZkRheS5tanNcIjtcblxuLyoqXG4gKiBAbmFtZSBpc1NhbWVEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aCk/XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKT9cbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqXG4gKiBAcGFyYW0gZGF0ZUxlZnQgLSBUaGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIGRhdGVSaWdodCAtIFRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuXG4gKiBAcmV0dXJucyBUaGUgZGF0ZXMgYXJlIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIgMDY6MDA6MDAgYW5kIDQgU2VwdGVtYmVyIDE4OjAwOjAwIGluIHRoZSBzYW1lIGRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0LCA2LCAwKSwgbmV3IERhdGUoMjAxNCwgOCwgNCwgMTgsIDApKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciBhbmQgNCBPY3RvYmVyIGluIHRoZSBzYW1lIGRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0KSwgbmV3IERhdGUoMjAxNCwgOSwgNCkpXG4gKiAvLz0+IGZhbHNlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciwgMjAxNCBhbmQgNCBTZXB0ZW1iZXIsIDIwMTUgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQpLCBuZXcgRGF0ZSgyMDE1LCA4LCA0KSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU2FtZURheShkYXRlTGVmdCwgZGF0ZVJpZ2h0KSB7XG4gIGNvbnN0IGRhdGVMZWZ0U3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZGF0ZUxlZnQpO1xuICBjb25zdCBkYXRlUmlnaHRTdGFydE9mRGF5ID0gc3RhcnRPZkRheShkYXRlUmlnaHQpO1xuXG4gIHJldHVybiArZGF0ZUxlZnRTdGFydE9mRGF5ID09PSArZGF0ZVJpZ2h0U3RhcnRPZkRheTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBpc1NhbWVEYXk7XG4iLCJsZXQgZGVmYXVsdE9wdGlvbnMgPSB7fTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRPcHRpb25zKCkge1xuICByZXR1cm4gZGVmYXVsdE9wdGlvbnM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0T3B0aW9ucyhuZXdPcHRpb25zKSB7XG4gIGRlZmF1bHRPcHRpb25zID0gbmV3T3B0aW9ucztcbn1cbiIsImltcG9ydCB7IHRvRGF0ZSB9IGZyb20gXCIuL3RvRGF0ZS5tanNcIjtcbmltcG9ydCB7IGdldERlZmF1bHRPcHRpb25zIH0gZnJvbSBcIi4vX2xpYi9kZWZhdWx0T3B0aW9ucy5tanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIHN0YXJ0T2ZXZWVrfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgc3RhcnRPZldlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvYmplY3Qgd2l0aCBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIHN0YXJ0IG9mIGEgd2Vla1xuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gU3VuIEF1ZyAzMSAyMDE0IDAwOjAwOjAwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRoZSB3ZWVrIHN0YXJ0cyBvbiBNb25kYXksIHRoZSBzdGFydCBvZiB0aGUgd2VlayBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCksIHsgd2Vla1N0YXJ0c09uOiAxIH0pXG4gKiAvLz0+IE1vbiBTZXAgMDEgMjAxNCAwMDowMDowMFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRPZldlZWsoZGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKCk7XG4gIGNvbnN0IHdlZWtTdGFydHNPbiA9XG4gICAgb3B0aW9ucz8ud2Vla1N0YXJ0c09uID8/XG4gICAgb3B0aW9ucz8ubG9jYWxlPy5vcHRpb25zPy53ZWVrU3RhcnRzT24gPz9cbiAgICBkZWZhdWx0T3B0aW9ucy53ZWVrU3RhcnRzT24gPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5sb2NhbGU/Lm9wdGlvbnM/LndlZWtTdGFydHNPbiA/P1xuICAgIDA7XG5cbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSk7XG4gIGNvbnN0IGRheSA9IF9kYXRlLmdldERheSgpO1xuICBjb25zdCBkaWZmID0gKGRheSA8IHdlZWtTdGFydHNPbiA/IDcgOiAwKSArIGRheSAtIHdlZWtTdGFydHNPbjtcblxuICBfZGF0ZS5zZXREYXRlKF9kYXRlLmdldERhdGUoKSAtIGRpZmYpO1xuICBfZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIF9kYXRlO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IHN0YXJ0T2ZXZWVrO1xuIiwiaW1wb3J0IHsgaXNTYW1lV2VlayB9IGZyb20gXCIuL2lzU2FtZVdlZWsubWpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBpc1RoaXNXZWVrfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgaXNUaGlzV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIHNhbWUgd2VlayBhcyB0aGUgY3VycmVudCBkYXRlP1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIGluIHRoZSBzYW1lIHdlZWsgYXMgdGhlIGN1cnJlbnQgZGF0ZT9cbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvYmplY3Qgd2l0aCBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIGRhdGUgaXMgaW4gdGhpcyB3ZWVrXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDI1IFNlcHRlbWJlciAyMDE0LCBpcyAyMSBTZXB0ZW1iZXIgMjAxNCBpbiB0aGlzIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1RoaXNXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIxKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyAyNSBTZXB0ZW1iZXIgMjAxNCBhbmQgd2VlayBzdGFydHMgd2l0aCBNb25kYXlcbiAqIC8vIGlzIDIxIFNlcHRlbWJlciAyMDE0IGluIHRoaXMgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzVGhpc1dlZWsobmV3IERhdGUoMjAxNCwgOCwgMjEpLCB7IHdlZWtTdGFydHNPbjogMSB9KVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUaGlzV2VlayhkYXRlLCBvcHRpb25zKSB7XG4gIHJldHVybiBpc1NhbWVXZWVrKGRhdGUsIERhdGUubm93KCksIG9wdGlvbnMpO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGlzVGhpc1dlZWs7XG4iLCJpbXBvcnQgeyBzdGFydE9mV2VlayB9IGZyb20gXCIuL3N0YXJ0T2ZXZWVrLm1qc1wiO1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgaXNTYW1lV2Vla30gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIGlzU2FtZVdlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKT9cbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqXG4gKiBAcGFyYW0gZGF0ZUxlZnQgLSBUaGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIGRhdGVSaWdodCAtIFRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvYmplY3Qgd2l0aCBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIGRhdGVzIGFyZSBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSAzMSBBdWd1c3QgMjAxNCBhbmQgNCBTZXB0ZW1iZXIgMjAxNCBpbiB0aGUgc2FtZSB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCA3LCAzMSksIG5ldyBEYXRlKDIwMTQsIDgsIDQpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHdlZWsgc3RhcnRzIHdpdGggTW9uZGF5LFxuICogLy8gYXJlIDMxIEF1Z3VzdCAyMDE0IGFuZCA0IFNlcHRlbWJlciAyMDE0IGluIHRoZSBzYW1lIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDcsIDMxKSwgbmV3IERhdGUoMjAxNCwgOCwgNCksIHtcbiAqICAgd2Vla1N0YXJ0c09uOiAxXG4gKiB9KVxuICogLy89PiBmYWxzZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgMSBKYW51YXJ5IDIwMTQgYW5kIDEgSmFudWFyeSAyMDE1IGluIHRoZSBzYW1lIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDAsIDEpLCBuZXcgRGF0ZSgyMDE1LCAwLCAxKSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU2FtZVdlZWsoZGF0ZUxlZnQsIGRhdGVSaWdodCwgb3B0aW9ucykge1xuICBjb25zdCBkYXRlTGVmdFN0YXJ0T2ZXZWVrID0gc3RhcnRPZldlZWsoZGF0ZUxlZnQsIG9wdGlvbnMpO1xuICBjb25zdCBkYXRlUmlnaHRTdGFydE9mV2VlayA9IHN0YXJ0T2ZXZWVrKGRhdGVSaWdodCwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuICtkYXRlTGVmdFN0YXJ0T2ZXZWVrID09PSArZGF0ZVJpZ2h0U3RhcnRPZldlZWs7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgaXNTYW1lV2VlaztcbiIsImltcG9ydCB7IHByb2plY3RzIH0gZnJvbSBcIi4vbWFuYWdlUHJvamVjdFwiO1xuaW1wb3J0IHsgaXNUb2RheSwgdG9EYXRlLCBpc1RoaXNXZWVrIH0gZnJvbSBcImRhdGUtZm5zXCI7XG5pbXBvcnQgeyBBZGR0b0xpc3QgfSBmcm9tIFwiLi9tYW5hZ2VMaXN0XCI7XG5cbmNvbnN0IHJlbmRlclRhc2sgPSAoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIGRpc3BsYXlBbGxUYXNrKGl0ZW1zLCBkaXNwbGF5KSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFza0lkJywgYCR7aXRlbXMuaWR9YClcblxuICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgndGFzaycpO1xuXG4gICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgY29uc3QgZHVlZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcblxuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IGBUaXRsZTogJHtpdGVtcy50aXRsZX1gO1xuICAgICAgICBkdWVkYXRlLnRleHRDb250ZW50ID0gYER1ZSBEYXRlOiAke2l0ZW1zLmR1ZWRhdGV9YDtcbiAgICAgICAgZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBgRGVzY3JpcHRpb246ICR7aXRlbXMuZGVzY3JpcHRpb259YDtcbiAgICAgICAgcHJpb3JpdHkudGV4dENvbnRlbnQgPSBgUHJpb3JpdHk6ICR7aXRlbXMucHJpb3JpdHl9YDtcbiAgICAgICAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gJ2RlbGV0ZSc7XG5cbiAgICAgICAgZGVsZXRlQnRuLnNldEF0dHJpYnV0ZSgnZGF0YS10YXNrSWQnLCBgJHtpdGVtcy5pZH1gKTtcblxuICAgICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBpbml0RGVsQnRuKGl0ZW1zLmlkLCBpdGVtcy5wcm9qZWN0KSk7XG5cbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCh0aXRsZSwgZHVlZGF0ZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBkZWxldGVCdG4pO1xuICAgICAgICBkaXNwbGF5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cbiAgICAgICAgcmV0dXJuIGRpc3BsYXk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdERlbEJ0bihpZCwgcHJvamVjdElkKSB7XG4gICAgICAgIGxldCBBbGx0YXNrID0gQWRkdG9MaXN0LnJlbW92ZVRhc2soaWQpO1xuICAgICAgICBjb25zdCBnZW5lcmFsTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnZW5lcmFsJyk7XG5cbiAgICAgICAgcHJvamVjdHMudXBkYXRlR2VuZXJhbExpc3QoQWxsdGFzayk7XG4gICAgICAgIHByb2plY3RzLnVwZGF0ZVByb2plY3RMaXN0KHByb2plY3RJZCk7XG5cbiAgICAgICAgd2hpbGUgKGdlbmVyYWxMaXN0Lmxhc3RFbGVtZW50Q2hpbGQpIGdlbmVyYWxMaXN0LnJlbW92ZUNoaWxkKGdlbmVyYWxMaXN0Lmxhc3RFbGVtZW50Q2hpbGQpO1xuICAgICAgICBcbiAgICAgICAgLyogaWYgKHByb2plY3RJZCA9PT0gMCkge2Rpc3BsYXlJbmJveCgpfVxuICAgICAgICBlbHNlIHtyZW5kZXJQcm9qZWN0LmRpc3BsYXlQcm9qZWN0VGFza3MocHJvamVjdElkKX0gKi9cbiAgICAgICAgLyogQWxsdGFzay5mb3JFYWNoKHRhc2sgPT4gZGlzcGxheUFsbFRhc2sodGFzaywgZ2VuZXJhbExpc3QpKTsgKi9cblxuICAgICAgICB1cGRhdGVEaXNwbGF5KHByb2plY3RJZCk7XG5cbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdHMucHJvamVjdExpc3QpO1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0SWQpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ3JhYlRhYigpIHtcbiAgICAgICAgbGV0IGN1cnJlbnRUYWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2VuZXJhbCcpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKTtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRUYWI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlRGlzcGxheShpZCkge1xuICAgICAgICBsZXQgdGFiID0gZ3JhYlRhYigpO1xuICAgICAgICBpZiAodGFiID09PSAnaW5ib3hUYWInKSBkaXNwbGF5SW5ib3goKVxuICAgICAgICBlbHNlIGlmICh0YWIgPT09ICd0b2RheVRhYicpIGRpc3BsYXlEYWlseSgpXG4gICAgICAgIGVsc2UgaWYgKHRhYiA9PT0gJ3dlZWtUYWInKSBkaXNwbGF5V2Vla2x5KClcbiAgICAgICAgZWxzZSBpZiAodGFiID09PSBgcHJvamVjdC0ke2lkfWAgJiYgaWQgIT09IDApIHJlbmRlclByb2plY3QuZGlzcGxheVByb2plY3RUYXNrcyhpZClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaXNwbGF5TmV3SW5wdXQoKSB7XG4gICAgICAgIGxldCBsaXN0ID0gcHJvamVjdHMucHJvamVjdExpc3RbMF0udGFza0xpc3Q7XG4gICAgICAgIGxldCBpdGVtcyA9IGxpc3RbbGlzdC5sZW5ndGggLSAxXTtcblxuICAgICAgICBjb25zdCBnZW5lcmFsTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnZW5lcmFsJyk7XG4gICAgICAgIFxuICAgICAgICBkaXNwbGF5QWxsVGFzayhpdGVtcywgZ2VuZXJhbExpc3QpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRpc3BsYXlJbmJveCgpIHtcbiAgICAgICAgbGV0IGxpc3QgPSBwcm9qZWN0cy5wcm9qZWN0TGlzdFswXS50YXNrTGlzdDtcbiAgICAgICAgY29uc3QgZ2VuZXJhbExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2VuZXJhbCcpO1xuICAgICAgICBnZW5lcmFsTGlzdC5jbGFzc0xpc3QucmVwbGFjZShnZW5lcmFsTGlzdC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyksICdpbmJveFRhYicpO1xuXG4gICAgICAgIHdoaWxlIChnZW5lcmFsTGlzdC5sYXN0RWxlbWVudENoaWxkKSBnZW5lcmFsTGlzdC5yZW1vdmVDaGlsZChnZW5lcmFsTGlzdC5sYXN0RWxlbWVudENoaWxkKTtcblxuICAgICAgICBsaXN0LmZvckVhY2godGFzayA9PiBkaXNwbGF5QWxsVGFzayh0YXNrLCBnZW5lcmFsTGlzdCkpO1xuICAgICAgICBjb25zb2xlLmxvZyhsaXN0KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRpc3BsYXlEYWlseSgpIHtcbiAgICAgICAgbGV0IGxpc3QgPSBwcm9qZWN0cy5wcm9qZWN0TGlzdFswXS50YXNrTGlzdDtcbiAgICAgICAgY29uc3QgZ2VuZXJhbExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2VuZXJhbCcpO1xuICAgICAgICBnZW5lcmFsTGlzdC5jbGFzc0xpc3QucmVwbGFjZShnZW5lcmFsTGlzdC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyksICd0b2RheVRhYicpO1xuXG4gICAgICAgIHdoaWxlIChnZW5lcmFsTGlzdC5sYXN0RWxlbWVudENoaWxkKSBnZW5lcmFsTGlzdC5yZW1vdmVDaGlsZChnZW5lcmFsTGlzdC5sYXN0RWxlbWVudENoaWxkKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGRhaWx5VGFza3MgPSBsaXN0LmZpbHRlcih0YXNrID0+IGlzVG9kYXkodG9EYXRlKHRhc2suZHVlZGF0ZSkpKTtcbiAgICAgICAgXG4gICAgICAgIGRhaWx5VGFza3MuZm9yRWFjaCh0YXNrID0+IGRpc3BsYXlBbGxUYXNrKHRhc2ssIGdlbmVyYWxMaXN0KSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlzcGxheVdlZWtseSgpIHtcbiAgICAgICAgbGV0IGxpc3QgPSBwcm9qZWN0cy5wcm9qZWN0TGlzdFswXS50YXNrTGlzdDtcbiAgICAgICAgY29uc3QgZ2VuZXJhbExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2VuZXJhbCcpO1xuICAgICAgICBnZW5lcmFsTGlzdC5jbGFzc0xpc3QucmVwbGFjZShnZW5lcmFsTGlzdC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyksICd3ZWVrVGFiJyk7XG5cbiAgICAgICAgd2hpbGUgKGdlbmVyYWxMaXN0Lmxhc3RFbGVtZW50Q2hpbGQpIGdlbmVyYWxMaXN0LnJlbW92ZUNoaWxkKGdlbmVyYWxMaXN0Lmxhc3RFbGVtZW50Q2hpbGQpO1xuXG4gICAgICAgIGNvbnN0IHdlZWtseVRhc2tzID0gbGlzdC5maWx0ZXIodGFzayA9PiBpc1RoaXNXZWVrKHRvRGF0ZSh0YXNrLmR1ZWRhdGUpKSk7XG5cbiAgICAgICAgd2Vla2x5VGFza3MuZm9yRWFjaCh0YXNrID0+IGRpc3BsYXlBbGxUYXNrKHRhc2ssIGdlbmVyYWxMaXN0KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgZGlzcGxheU5ld0lucHV0LCBkaXNwbGF5SW5ib3gsIGRpc3BsYXlEYWlseSwgZGlzcGxheVdlZWtseSwgZGlzcGxheUFsbFRhc2sgfVxufSkoKVxuXG5jb25zdCByZW5kZXJQcm9qZWN0ID0gKCgpID0+IHtcbiAgICBmdW5jdGlvbiBkaXNwbGF5UHJvamVjdCgpIHtcbiAgICAgICAgbGV0IGxpc3QgPSBwcm9qZWN0cy5wcm9qZWN0TGlzdDtcbiAgICAgICAgbGV0IHByb2plY3QgPSBsaXN0W2xpc3QubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgY29uc3QgcHJvamVjdERpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLXByb2plY3RzJyk7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBwcm9qZWN0VGFza0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuXG4gICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGBwcm9qZWN0LSR7cHJvamVjdC5pZH1gKTtcbiAgICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1wcm9qZWN0SWQnLCBgJHtwcm9qZWN0LmlkfWApO1xuICAgICAgICBwcm9qZWN0VGFza0J0bi5zZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvamVjdElkJywgYCR7cHJvamVjdC5pZH1gKTtcbiAgICAgICAgcHJvamVjdFRhc2tCdG4uc2V0QXR0cmlidXRlKCdpZCcsIGBwcm9qZWN0LSR7cHJvamVjdC5pZH1gKTtcblxuICAgICAgICBwcm9qZWN0VGl0bGUudGV4dENvbnRlbnQgPSBgJHtwcm9qZWN0LnRpdGxlfWA7XG4gICAgICAgIHByb2plY3RUYXNrQnRuLnRleHRDb250ZW50ID0gJysnO1xuXG4gICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgZGlzcGxheVByb2plY3RUYXNrcyhwcm9qZWN0LmlkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcHJvamVjdFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwcm9qZWN0IGlkJywgcHJvamVjdHMuZ3JhYlByb2plY3RJZChlKSk7XG4gICAgICAgICAgICBjb25zdCBuZXdUYXNrRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtYWluLWZvcm0nKTtcblxuICAgICAgICAgICAgcHJvamVjdHMuZ3JhYlByb2plY3RJZChlKTtcbiAgICAgICAgICAgIG5ld1Rhc2tGb3JtLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgY29udGFpbmVyLmFwcGVuZChwcm9qZWN0VGl0bGUsIHByb2plY3RUYXNrQnRuKTtcbiAgICAgICAgcHJvamVjdERpc3BsYXkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblxuICAgICAgICByZXR1cm4gcHJvamVjdERpc3BsYXlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaXNwbGF5UHJvamVjdFRhc2tzKGlkKSB7XG4gICAgICAgIGxldCBsaXN0ID0gcHJvamVjdHMucHJvamVjdExpc3Q7XG4gICAgICAgIGNvbnN0IGdlbmVyYWxMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dlbmVyYWwnKTtcbiAgICAgICAgZ2VuZXJhbExpc3QuY2xhc3NMaXN0LnJlcGxhY2UoZ2VuZXJhbExpc3QuZ2V0QXR0cmlidXRlKCdjbGFzcycpLCBgcHJvamVjdC0ke2lkfWApO1xuXG4gICAgICAgIHdoaWxlIChnZW5lcmFsTGlzdC5sYXN0RWxlbWVudENoaWxkKSBnZW5lcmFsTGlzdC5yZW1vdmVDaGlsZChnZW5lcmFsTGlzdC5sYXN0RWxlbWVudENoaWxkKTtcblxuICAgICAgICAvKiBsZXQgcHJvamVjdExpc3QgPSBsaXN0LmZpbHRlcih0YXNrID0+IGlkID09PSB0YXNrLmlkKTsgKi9cbiAgICAgICAgbGV0IHByb2plY3RUYXNrcyA9IHByb2plY3RzLmdyYWJDdXJyZW50UHJvamVjdFRhc2tzKGlkKTtcbiAgICAgICAgLyogY29uc29sZS5sb2cocHJvamVjdExpc3QpOyAqL1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0VGFza3MpXG4gICAgICAgIGNvbnNvbGUubG9nKGlkKVxuXG4gICAgICAgIHByb2plY3RUYXNrcy5mb3JFYWNoKHRhc2sgPT4gcmVuZGVyVGFzay5kaXNwbGF5QWxsVGFzayh0YXNrLCBnZW5lcmFsTGlzdCkpO1xuICAgIH1cblxuICAgIHJldHVybiB7IGRpc3BsYXlQcm9qZWN0LCBkaXNwbGF5UHJvamVjdFRhc2tzIH1cbn0pKClcblxuZXhwb3J0IHsgcmVuZGVyVGFzaywgcmVuZGVyUHJvamVjdCB9IiwiaW1wb3J0IHsgQWRkdG9MaXN0IH0gZnJvbSBcIi4vbWFuYWdlTGlzdFwiO1xuaW1wb3J0IHsgcmVuZGVyVGFzayB9IGZyb20gXCIuL1VJXCI7XG5pbXBvcnQgeyBwcm9qZWN0cyB9IGZyb20gXCIuL21hbmFnZVByb2plY3RcIjtcbmltcG9ydCB7IHRvRGF0ZSwgaXNUaGlzV2VlaywgaXNUb2RheSB9IGZyb20gXCJkYXRlLWZuc1wiO1xuXG5cbmNvbnN0IGNyZWF0ZVRhc2sgPSAoaWQsIHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlZGF0ZSwgcHJpb3JpdHksIHByb2plY3QpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpZCwgdGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVkYXRlLCBwcmlvcml0eSwgcHJvamVjdFxuICAgIH1cbn1cblxuY29uc3QgTmV3VGFzayA9ICgoKSA9PiB7XG5cbiAgICBsZXQgdGl0bGU7XG4gICAgbGV0IGRlc2NyaXB0aW9uO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlTmV3VGFzaygpIHtcbiAgICAgICAgY29uc3QgcHJvamVjdExpc3QgPSBwcm9qZWN0cy5ncmFiUHJvamVjdExpc3QoKTtcblxuICAgICAgICB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZScpLnZhbHVlO1xuICAgICAgICBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXNjcmlwdGlvbicpLnZhbHVlO1xuXG4gICAgICAgIGxldCBkdWVkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGUnKS52YWx1ZTtcbiAgICAgICAgbGV0IHByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW9yaXR5JykudmFsdWU7XG4gICAgICAgIGxldCBpZCA9IGNyZWF0ZUlkKCk7XG4gICAgICAgIGxldCBwcm9qZWN0SWQgPSBwcm9qZWN0cy5ncmFiQ3VycmVudFByb2plY3QoKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhpc1RoaXNXZWVrKHRvRGF0ZShkdWVkYXRlKSkpXG4gICAgICAgIGNvbnNvbGUubG9nKGlzVG9kYXkodG9EYXRlKGR1ZWRhdGUpKSlcblxuICAgICAgICBpZiAodGl0bGUgPT09ICcnIHx8XG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9PT0gJycgfHxcbiAgICAgICAgICAgIGR1ZWRhdGUgPT09ICcnKSByZXR1cm5cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrID0gY3JlYXRlVGFzayhpZCwgdGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVkYXRlLCBwcmlvcml0eSwgcHJvamVjdElkKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRhc2spO1xuXG4gICAgICAgICAgICBpZiAocHJvamVjdElkID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcHJvamVjdExpc3RbMF0udGFza0xpc3QucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0TGlzdClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwcm9qZWN0TGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChwcm9qZWN0TGlzdFtpXS5pZCA9PT0gcHJvamVjdElkKSB7XG4gICAgICAgICAgICAgICAgICAgIEFkZHRvTGlzdC5hZGRUb0xpc3QodGFzayk7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RMaXN0W2ldLnRhc2tMaXN0LnB1c2godGFzayk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb2plY3RMaXN0KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVJZCgpIHtcbiAgICAgICAgbGV0IGxpc3QgPSBwcm9qZWN0cy5wcm9qZWN0TGlzdFswXS50YXNrTGlzdDtcbiAgICAgICAgbGV0IGlkO1xuXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGlkID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpZCA9IGxpc3RbbGlzdC5sZW5ndGgtMV0uaWQgKyAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICAgIGxldCB0aXRsZVZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpdGxlJyk7XG4gICAgICAgIHRpdGxlVmFsdWUudmFsdWUgPSAnJztcbiAgICAgICAgdGl0bGUgPSAnJztcblxuICAgICAgICBsZXQgZGVzY3JpcHRpb25WYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXNjcmlwdGlvbicpO1xuICAgICAgICBkZXNjcmlwdGlvblZhbHVlLnZhbHVlID0gJyc7XG4gICAgICAgIGRlc2NyaXB0aW9uID0gJyc7XG5cbiAgICAgICAgbGV0IGR1ZWRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0ZScpO1xuICAgICAgICBkdWVkYXRlLnZhbHVlID0gJyc7XG5cbiAgICAgICAgbGV0IHByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW9yaXR5Jyk7XG4gICAgICAgIHByaW9yaXR5LnZhbHVlID0gJ0xvdyc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdFN1Ym1pdEJ0bigpIHtcbiAgICAgICAgY29uc3Qgc3VibWl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N1Ym1pdCcpO1xuXG4gICAgICAgIHN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBzdWJtaXRUYXNrKCk7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdWJtaXRUYXNrKCkge1xuICAgICAgICBjb25zdCBuZXdUYXNrRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtYWluLWZvcm0nKTtcbiAgICAgICAgY29uc3QgbmV3VGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdUYXNrJyk7XG4gICAgICAgIFxuICAgICAgICBjcmVhdGVOZXdUYXNrKCk7XG5cbiAgICAgICAgaWYgKHRpdGxlID09PSAnJyB8fCBkZXNjcmlwdGlvbiA9PT0gJycpIHJldHVyblxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlbmRlclRhc2suZGlzcGxheU5ld0lucHV0KCk7XG4gICAgICAgICAgICByZXNldCgpO1xuICAgICAgICAgICAgbmV3VGFza0Zvcm0uc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAnJyk7XG4gICAgICAgICAgICBuZXdUYXNrQnRuLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5jZWxUYXNrKCkge1xuICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FuY2VsJyk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21haW4tZm9ybScpO1xuICAgICAgICBjb25zdCBuZXdUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ld1Rhc2snKTtcblxuICAgICAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgICAgIG5ld1Rhc2tGb3JtLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpO1xuICAgICAgICAgICAgbmV3VGFza0J0bi5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9wZW5UYXNrQ3JlYXRvcigpIHtcbiAgICAgICAgY29uc3QgbmV3VGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdUYXNrJyk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21haW4tZm9ybScpO1xuXG4gICAgICAgIG5ld1Rhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgcHJvamVjdHMuZ3JhYlByb2plY3RJZChlKTtcbiAgICAgICAgICAgIG5ld1Rhc2tGb3JtLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICBuZXdUYXNrQnRuLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiB7IGNyZWF0ZU5ld1Rhc2ssIGluaXRTdWJtaXRCdG4sIGNhbmNlbFRhc2ssIG9wZW5UYXNrQ3JlYXRvciB9XG59KSgpO1xuXG5leHBvcnQgeyBOZXdUYXNrIH1cbiIsImltcG9ydCB7IE5ld1Rhc2sgfSBmcm9tIFwiLi9tYW5hZ2VUYXNrLmpzXCI7XG5pbXBvcnQgeyBwcm9qZWN0cyB9IGZyb20gXCIuL21hbmFnZVByb2plY3QuanNcIjtcbmltcG9ydCB7IHJlbmRlclRhc2sgfSBmcm9tIFwiLi9VSS5qc1wiO1xuXG5OZXdUYXNrLmluaXRTdWJtaXRCdG4oKTtcbk5ld1Rhc2suY2FuY2VsVGFzaygpO1xuTmV3VGFzay5vcGVuVGFza0NyZWF0b3IoKTtcblxucHJvamVjdHMuc3VibWl0UHJvamVjdCgpO1xuXG5jb25zdCB0b2RheVRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RheScpO1xuY29uc3Qgd2Vla1RhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3ZWVrbHknKTtcbmNvbnN0IGluYm94VGFiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2luYm94Jyk7XG5cbnRvZGF5VGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxyZW5kZXJUYXNrLmRpc3BsYXlEYWlseSk7XG53ZWVrVGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVuZGVyVGFzay5kaXNwbGF5V2Vla2x5KTtcbmluYm94VGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVuZGVyVGFzay5kaXNwbGF5SW5ib3gpOyJdLCJuYW1lcyI6WyJBZGR0b0xpc3QiLCJUb2RvTGlzdCIsImFkZFRvTGlzdCIsInRhc2siLCJwdXNoIiwiY29uc29sZSIsImxvZyIsInJlbW92ZVRhc2siLCJpZCIsImZpbHRlciIsIm5ld1Byb2plY3QiLCJ0aXRsZSIsInRhc2tMaXN0IiwicHJvamVjdHMiLCJwcm9qZWN0VGl0bGUiLCJwcm9qZWN0TGlzdCIsImdlbmVyYWxMaXN0IiwiY3VycmVudFByb2plY3QiLCJzdWJtaXRQcm9qZWN0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInZhbHVlIiwicHJvamVjdElkIiwibGVuZ3RoIiwicHJvamVjdCIsImFkZFRvUHJvamVjdExpc3QiLCJjcmVhdGVQcm9qZWN0IiwicmVuZGVyUHJvamVjdCIsImRpc3BsYXlQcm9qZWN0IiwiZ3JhYlByb2plY3RJZCIsInBhcnNlSW50IiwidGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwiZ3JhYkN1cnJlbnRQcm9qZWN0IiwiZ3JhYlByb2plY3RMaXN0IiwidXBkYXRlR2VuZXJhbExpc3QiLCJuZXdMaXN0IiwidXBkYXRlUHJvamVjdExpc3QiLCJ1cGRhdGUiLCJncmFiQ3VycmVudFByb2plY3RUYXNrcyIsInRvRGF0ZSIsImFyZ3VtZW50IiwiYXJnU3RyIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwiRGF0ZSIsImNvbnN0cnVjdG9yIiwiTmFOIiwic3RhcnRPZkRheSIsImRhdGUiLCJfZGF0ZSIsInNldEhvdXJzIiwiaXNUb2RheSIsImRhdGVMZWZ0IiwiZGF0ZVJpZ2h0Iiwibm93IiwiZGVmYXVsdE9wdGlvbnMiLCJnZXREZWZhdWx0T3B0aW9ucyIsInN0YXJ0T2ZXZWVrIiwib3B0aW9ucyIsIndlZWtTdGFydHNPbiIsImxvY2FsZSIsImRheSIsImdldERheSIsImRpZmYiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImlzVGhpc1dlZWsiLCJpc1NhbWVXZWVrIiwicmVuZGVyVGFzayIsImRpc3BsYXlBbGxUYXNrIiwiaXRlbXMiLCJkaXNwbGF5IiwiY29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImFkZCIsImR1ZWRhdGUiLCJkZXNjcmlwdGlvbiIsInByaW9yaXR5IiwiZGVsZXRlQnRuIiwidGV4dENvbnRlbnQiLCJBbGx0YXNrIiwibGFzdEVsZW1lbnRDaGlsZCIsInJlbW92ZUNoaWxkIiwidGFiIiwiZGlzcGxheUluYm94IiwiZGlzcGxheURhaWx5IiwiZGlzcGxheVdlZWtseSIsImRpc3BsYXlQcm9qZWN0VGFza3MiLCJ1cGRhdGVEaXNwbGF5IiwiaW5pdERlbEJ0biIsImFwcGVuZCIsImFwcGVuZENoaWxkIiwibGlzdCIsInJlcGxhY2UiLCJmb3JFYWNoIiwiZGlzcGxheU5ld0lucHV0IiwicHJvamVjdFRhc2tzIiwicHJvamVjdERpc3BsYXkiLCJwcm9qZWN0VGFza0J0biIsInN0b3BQcm9wYWdhdGlvbiIsIm5ld1Rhc2tGb3JtIiwicmVtb3ZlQXR0cmlidXRlIiwiTmV3VGFzayIsImNyZWF0ZU5ld1Rhc2siLCJnZXRFbGVtZW50QnlJZCIsImNyZWF0ZUlkIiwiY3JlYXRlVGFzayIsImkiLCJyZXNldCIsImluaXRTdWJtaXRCdG4iLCJuZXdUYXNrQnRuIiwic3VibWl0VGFzayIsImNhbmNlbFRhc2siLCJjYW5jZWxCdG4iLCJvcGVuVGFza0NyZWF0b3IiLCJ0b2RheVRhYiIsIndlZWtUYWIiLCJpbmJveFRhYiJdLCJzb3VyY2VSb290IjoiIn0=